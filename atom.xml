<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HacpğŸ‰</title>
  
  
  <link href="https://www.hacp.top/atom.xml" rel="self"/>
  
  <link href="https://www.hacp.top/"/>
  <updated>2024-05-10T14:19:03.000Z</updated>
  <id>https://www.hacp.top/</id>
  
  <author>
    <name>HacpğŸ‰</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ’åºç®—æ³•</title>
    <link href="https://www.hacp.top/posts/6.html"/>
    <id>https://www.hacp.top/posts/6.html</id>
    <published>2024-05-10T14:19:03.000Z</published>
    <updated>2024-05-10T14:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å†’æ³¡æ’åº">1.å†’æ³¡æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function bubbleSort(arr) &#123;</span><br><span class="line">    let len = arr.length;</span><br><span class="line">    for (let i = 0; i &lt; len - 1; i++) &#123;</span><br><span class="line">        for (let j = 0; j &lt; len - 1 - i; j++) &#123;</span><br><span class="line">            if (arr[j] &gt; arr[j + 1]) &#123;        // ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯”</span><br><span class="line">                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-æ’å…¥æ’åº">2.æ’å…¥æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function insertionSort(arr) &#123;</span><br><span class="line">    let len = arr.length;</span><br><span class="line">    let preIndex, current;</span><br><span class="line">    for (let i = 1; i &lt; len; i++) &#123;</span><br><span class="line">        preIndex = i - 1;</span><br><span class="line">        current = arr[i];</span><br><span class="line">        while (preIndex &gt;= 0 &amp;&amp; arr[preIndex] &gt; current) &#123;</span><br><span class="line">            arr[preIndex + 1] = arr[preIndex];</span><br><span class="line">            preIndex--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[preIndex + 1] = current;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-é€‰æ‹©æ’åº">3.é€‰æ‹©æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function selectionSort(arr) &#123;</span><br><span class="line">    let len = arr.length;</span><br><span class="line">    let minIndex, temp;</span><br><span class="line">    for (let i = 0; i &lt; len - 1; i++) &#123;</span><br><span class="line">        minIndex = i;</span><br><span class="line">        for (let j = i + 1; j &lt; len; j++) &#123;</span><br><span class="line">            if (arr[j] &lt; arr[minIndex]) &#123;</span><br><span class="line">                minIndex = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        temp = arr[i];</span><br><span class="line">        arr[i] = arr[minIndex];</span><br><span class="line">        arr[minIndex] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å¿«é€Ÿæ’åº">4.å¿«é€Ÿæ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">function quickSort(arr, left, right) &#123;</span><br><span class="line">    let len = arr.length,</span><br><span class="line">        partitionIndex,</span><br><span class="line">        left = typeof left != &#x27;undefined&#x27; ? left : 0,</span><br><span class="line">        right = typeof right != &#x27;undefined&#x27; ? right : len - 1;</span><br><span class="line"> </span><br><span class="line">    if (left &lt; right) &#123;</span><br><span class="line">        partitionIndex = partition(arr, left, right);</span><br><span class="line"> </span><br><span class="line">        quickSort(arr, left, partitionIndex - 1);</span><br><span class="line">        quickSort(arr, partitionIndex + 1, right);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function partition(arr, left, right) &#123;</span><br><span class="line">    let pivot = arr[right],</span><br><span class="line">        partitionIndex = left;</span><br><span class="line"> </span><br><span class="line">    for (let i = left; i &lt; right; i++) &#123;</span><br><span class="line">        if (arr[i] &lt; pivot) &#123;</span><br><span class="line">            swap(arr, i, partitionIndex);</span><br><span class="line">            partitionIndex++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(arr, right, partitionIndex);</span><br><span class="line">    return partitionIndex;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function swap(arr, i, j) &#123;</span><br><span class="line">    let temp = arr[i];</span><br><span class="line">    arr[i] = arr[j];</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å½’å¹¶æ’åº">5.å½’å¹¶æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function mergeSort(arr) &#123;</span><br><span class="line">    let len = arr.length;</span><br><span class="line">    if (len &lt; 2) &#123;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line">    let middle = Math.floor(len / 2),</span><br><span class="line">        left = arr.slice(0, middle),</span><br><span class="line">        right = arr.slice(middle);</span><br><span class="line">    return merge(mergeSort(left), mergeSort(right));</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function merge(left, right) &#123;</span><br><span class="line">    let result = [];</span><br><span class="line">    while (left.length &amp;&amp; right.length) &#123;</span><br><span class="line">        if (left[0] &lt;= right[0]) &#123;</span><br><span class="line">            result.push(left.shift());</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            result.push(right.shift());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    while (left.length)</span><br><span class="line">        result.push(left.shift());</span><br><span class="line">    while (right.length)</span><br><span class="line">        result.push(right.shift());</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-å †æ’åº">6.å †æ’åº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">function heapSort(arr) &#123;</span><br><span class="line">    // å»ºå †</span><br><span class="line">    buildHeap(arr);</span><br><span class="line"></span><br><span class="line">    let len = arr.length;</span><br><span class="line">    let temp;</span><br><span class="line"></span><br><span class="line">    // å †è°ƒæ•´æ’åº</span><br><span class="line">    for (let i = len - 1; i &gt; 0; i--) &#123;</span><br><span class="line">        // å°†å½“å‰æœªæ’åºåºåˆ—ä¸­æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ æ”¾åˆ°åºåˆ—çš„èµ·å§‹ä½ç½®</span><br><span class="line">        temp = arr[0];</span><br><span class="line">        arr[0] = arr[i];</span><br><span class="line">        arr[i] = temp;</span><br><span class="line"></span><br><span class="line">        // é‡æ–°å¯¹å‰©ä½™æœªæ’åºå…ƒç´ è¿›è¡Œæœ€å¤§å †è°ƒæ•´</span><br><span class="line">        heapify(arr, 0, i);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å»ºå †</span><br><span class="line">function buildHeap(arr) &#123;</span><br><span class="line">    let len = arr.length;</span><br><span class="line">    // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹è°ƒæ•´</span><br><span class="line">    for (let i = Math.floor(len / 2) - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">        heapify(arr, i, len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å †è°ƒæ•´</span><br><span class="line">function heapify(arr, i, len) &#123;</span><br><span class="line">    let largest = i;</span><br><span class="line">    let left = 2 * i + 1;</span><br><span class="line">    let right = 2 * i + 2;</span><br><span class="line"></span><br><span class="line">    if (left &lt; len &amp;&amp; arr[left] &gt; arr[largest]) &#123;</span><br><span class="line">        largest = left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (right &lt; len &amp;&amp; arr[right] &gt; arr[largest]) &#123;</span><br><span class="line">        largest = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (largest != i) &#123;</span><br><span class="line">        let swap = arr[i];</span><br><span class="line">        arr[i] = arr[largest];</span><br><span class="line">        arr[largest] = swap;</span><br><span class="line"></span><br><span class="line">        // é€’å½’è°ƒæ•´å­æ ‘</span><br><span class="line">        heapify(arr, largest, len);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ’åºç®—æ³•ä¸“é¢˜</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.hacp.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.hacp.top/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>çˆ±å¿ƒ</title>
    <link href="https://www.hacp.top/posts/5.html"/>
    <id>https://www.hacp.top/posts/5.html</id>
    <published>2024-01-03T10:19:03.000Z</published>
    <updated>2024-01-03T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å®ç°æ„æ€">1.å®ç°æ„æ€</h2><p>æœ€å¼€å§‹æƒ³ç”¨ç¼©å°å›¾ç‰‡ç„¶åä½¿ç”¨æ›²çº¿çš„æ–¹å¼éå†å¾ªç¯å½¢æˆçˆ±å¿ƒï¼Œå®é™…æµ‹è¯•ä¸‹æ¥ï¼Œæ€§èƒ½è€—æŸå¤ªå¤§ï¼Œä»¥è‡³äºå®ç°éš¾åº¦æ›´é«˜ï¼Œä½ç½®å’Œé€Ÿåº¦ä¸å¯æ§</p><p>æ€ç´¢è‰¯ä¹…åï¼Œè¿˜æ˜¯å†³å®šç”¨ç”»å¸ƒ</p><p>Particle å’Œ ParticlePool ç±»å®šä¹‰äº†ç²’å­å’Œç²’å­æ± ï¼Œç”¨äºç»˜åˆ¶å’Œç®¡ç†ç²’å­ã€‚</p><p>pointOnHeart å‡½æ•°è¿”å›ä¸€ä¸ªä½äºæ¡ƒå¿ƒæ›²çº¿ä¸Šçš„ç‚¹ï¼Œç”¨æ¥åˆå§‹åŒ–ç²’å­çš„ä½ç½®ã€‚</p><p>ç„¶åä½¿ç”¨ canvas ç»˜åˆ¶å°ç²’å­åˆ›é€ ä¸€ä¸ªå½¢çŠ¶ä¸ºæ¡ƒå¿ƒçš„åŠ¨æ€æ•ˆæœã€‚</p><p>ä»£ç ä¸­ render å‡½æ•°æ˜¯ä¸»è¦çš„æ¸²æŸ“å‡½æ•°ï¼Œç”¨äºæ›´æ–°ç²’å­çŠ¶æ€ã€ç»˜åˆ¶ç²’å­ä»¥åŠåˆ›å»ºæ–°çš„ç²’å­ã€‚</p><p>æœ€åé€šè¿‡å»¶è¿Ÿä¸€æ®µæ—¶é—´è°ƒç”¨ onResize å‡½æ•°ï¼Œè®¾ç½®ç”»å¸ƒå¤§å°å¹¶å¼€å§‹æ¸²æŸ“ã€‚</p><h2 id="2-å…ˆç¡®å®šé¡µé¢çš„å¸ƒå±€ï¼Œåˆ†ä¸ºå·¦å³å¸ƒå±€">2.å…ˆç¡®å®šé¡µé¢çš„å¸ƒå±€ï¼Œåˆ†ä¸ºå·¦å³å¸ƒå±€</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;mainDiv&quot;&gt;</span><br><span class="line">&lt;div id=&quot;content&quot;&gt;</span><br><span class="line">&lt;div id=&quot;code&quot;&gt;</span><br><span class="line">&lt;span class=&quot;comments&quot;&gt;äººç”Ÿè‡³å°‘è¯¥æœ‰ä¸€æ¬¡&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;span class=&quot;comments&quot;&gt;ä¸ºäº†æŸä¸€ä¸ªäººè€Œå¿˜äº†è‡ªå·±&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;span class=&quot;keyword&quot;&gt;ä¸æ±‚ç»“æœï¼Œä¸æ±‚åŒè¡Œï¼Œ&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;span class=&quot;keyword&quot;&gt;ä¸æ±‚æ›¾ç»æ‹¥æœ‰ï¼Œç”šè‡³ä¸æ±‚ä½ çˆ±æˆ‘ï¼Œ&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;span class=&quot;keyword&quot;/&gt;åªæ±‚åœ¨æˆ‘æœ€ç¾çš„å¹´åé‡Œ&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;span class=&quot;keyword&quot;/&gt;é‡åˆ°ä½ &lt;/span&gt;&lt;br /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;loveHeart&quot;&gt;</span><br><span class="line">&lt;canvas id=&quot;garden&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;div id=&quot;words&quot;&gt;</span><br><span class="line">&lt;div id=&quot;messages&quot;&gt;</span><br><span class="line">äº²çˆ±çš„ï¼Œè¿™æ˜¯æˆ‘ä»¬ç›¸è¯†çš„æ—¶å…‰ã€‚</span><br><span class="line">&lt;div id=&quot;elapseClock&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;loveu&quot;&gt;</span><br><span class="line">çˆ±ä½ çš„ã€‚&lt;br/&gt;</span><br><span class="line">&lt;div class=&quot;signature&quot;&gt;- ä¾¯å…ˆç”Ÿ&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="3-ç¡®å®šæ¿å—æ ·å¼">3.ç¡®å®šæ¿å—æ ·å¼</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">    font-family: digit;</span><br><span class="line">    src: url(&#x27;digital-7_mono.ttf&#x27;) format(&quot;truetype&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">    background: #ffe;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    overflow: auto</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mainDiv &#123;</span></span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">loveHeart &#123;</span></span><br><span class="line">    float: left;</span><br><span class="line">    width: 670px;</span><br><span class="line">    height: 625px</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">garden &#123;</span></span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">elapseClock &#123;</span></span><br><span class="line">    text-align: right;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    margin-top: 10px;</span><br><span class="line">    margin-bottom: 10px</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">words &#123;</span></span><br><span class="line">    font-family: &quot;sans-serif&quot;;</span><br><span class="line">    width: 500px;</span><br><span class="line">    font-size: 24px;</span><br><span class="line">    color: #666</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">messages &#123;</span></span><br><span class="line">    display: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">elapseClock .digit &#123;</span></span><br><span class="line">    font-family: &quot;digit&quot;;</span><br><span class="line">    font-size: 36px</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">loveu &#123;</span></span><br><span class="line">    padding: 5px;</span><br><span class="line">    font-size: 22px;</span><br><span class="line">    margin-top: 80px;</span><br><span class="line">    margin-right: 120px;</span><br><span class="line">    text-align: right;</span><br><span class="line">    display: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">loveu .signature &#123;</span></span><br><span class="line">    margin-top: 10px;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    font-style: italic</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">clickSound &#123;</span></span><br><span class="line">    display: none</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code &#123;</span></span><br><span class="line">    float: left;</span><br><span class="line">    width: 440px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    color: #333;</span><br><span class="line">    font-family: &quot;Consolas&quot;, &quot;Monaco&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, &quot;sans-serif&quot;;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    line-height: 35px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code .string &#123;</span></span><br><span class="line">    color: #2a36ff</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code .keyword &#123;</span></span><br><span class="line">    color: #7f0055;</span><br><span class="line">    font-weight: bold</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code .placeholder &#123;</span></span><br><span class="line">    margin-left: 15px</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code .space &#123;</span></span><br><span class="line">    margin-left: 7px</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">code .comments &#123;</span></span><br><span class="line">    color: #3f7f5f</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">copyright &#123;</span></span><br><span class="line">    margin-top: 10px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    width: 100%;</span><br><span class="line">    color: #666</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">errorMsg &#123;</span></span><br><span class="line">    width: 100%;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-size: 24px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 100px;</span><br><span class="line">    left: 0</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">copyright a &#123;</span></span><br><span class="line">    color: #666</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å®ç°çˆ±å¿ƒç²’å­é€»è¾‘">4.å®ç°çˆ±å¿ƒç²’å­é€»è¾‘</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function Vector(x, y) &#123;</span><br><span class="line">    this.x = x;</span><br><span class="line">    this.y = y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Vector.prototype = &#123;</span><br><span class="line">rotate: function (theta) &#123;</span><br><span class="line">    var x = this.x;</span><br><span class="line">    var y = this.y;</span><br><span class="line">    this.x = Math.cos(theta) * x - Math.sin(theta) * y;</span><br><span class="line">    this.y = Math.sin(theta) * x + Math.cos(theta) * y;</span><br><span class="line">    return this;</span><br><span class="line">&#125;,</span><br><span class="line">mult: function (f) &#123;</span><br><span class="line">    this.x *= f;</span><br><span class="line">    this.y *= f;</span><br><span class="line">    return this;</span><br><span class="line">&#125;,</span><br><span class="line">clone: function () &#123;</span><br><span class="line">    return new Vector(this.x, this.y);</span><br><span class="line">&#125;,</span><br><span class="line">length: function () &#123;</span><br><span class="line">    return Math.sqrt(this.x * this.x + this.y * this.y);</span><br><span class="line">&#125;,</span><br><span class="line">subtract: function (v) &#123;</span><br><span class="line">    this.x -= v.x;</span><br><span class="line">    this.y -= v.y;</span><br><span class="line">    return this;</span><br><span class="line">&#125;,</span><br><span class="line">set: function (x, y) &#123;</span><br><span class="line">    this.x = x;</span><br><span class="line">    this.y = y;</span><br><span class="line">    return this;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function Petal(stretchA, stretchB, startAngle, angle, growFactor, bloom) &#123;</span><br><span class="line">    this.stretchA = stretchA;</span><br><span class="line">    this.stretchB = stretchB;</span><br><span class="line">    this.startAngle = startAngle;</span><br><span class="line">    this.angle = angle;</span><br><span class="line">    this.bloom = bloom;</span><br><span class="line">    this.growFactor = growFactor;</span><br><span class="line">    this.r = 1;</span><br><span class="line">    this.isfinished = false;</span><br><span class="line">    //this.tanAngleA = Garden.random(-Garden.degrad(Garden.options.tanAngle), Garden.degrad(Garden.options.tanAngle));</span><br><span class="line">    //this.tanAngleB = Garden.random(-Garden.degrad(Garden.options.tanAngle), Garden.degrad(Garden.options.tanAngle));</span><br><span class="line">&#125;</span><br><span class="line">Petal.prototype = &#123;</span><br><span class="line">draw: function () &#123;</span><br><span class="line">    var ctx = this.bloom.garden.ctx;</span><br><span class="line">    var v1, v2, v3, v4;</span><br><span class="line">    v1 = new Vector(0, this.r).rotate(Garden.degrad(this.startAngle));</span><br><span class="line">    v2 = v1.clone().rotate(Garden.degrad(this.angle));</span><br><span class="line">    v3 = v1.clone().mult(this.stretchA); //.rotate(this.tanAngleA);</span><br><span class="line">    v4 = v2.clone().mult(this.stretchB); //.rotate(this.tanAngleB);</span><br><span class="line">    ctx.strokeStyle = this.bloom.c;</span><br><span class="line">    ctx.beginPath();</span><br><span class="line">    ctx.moveTo(v1.x, v1.y);</span><br><span class="line">    ctx.bezierCurveTo(v3.x, v3.y, v4.x, v4.y, v2.x, v2.y);</span><br><span class="line">    ctx.stroke();</span><br><span class="line">&#125;,</span><br><span class="line">render: function () &#123;</span><br><span class="line">    if (this.r &lt;= this.bloom.r) &#123;</span><br><span class="line">        this.r += this.growFactor; // / 10;</span><br><span class="line">        this.draw();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        this.isfinished = true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Bloom(p, r, c, pc, garden) &#123;</span><br><span class="line">    this.p = p;</span><br><span class="line">    this.r = r;</span><br><span class="line">    this.c = c;</span><br><span class="line">    this.pc = pc;</span><br><span class="line">    this.petals = [];</span><br><span class="line">    this.garden = garden;</span><br><span class="line">    this.init();</span><br><span class="line">    this.garden.addBloom(this);</span><br><span class="line">&#125;</span><br><span class="line">Bloom.prototype = &#123;</span><br><span class="line">draw: function () &#123;</span><br><span class="line">    var p, isfinished = true;</span><br><span class="line">    this.garden.ctx.save();</span><br><span class="line">    this.garden.ctx.translate(this.p.x, this.p.y);</span><br><span class="line">    for (var i = 0; i &lt; this.petals.length; i++) &#123;</span><br><span class="line">        p = this.petals[i];</span><br><span class="line">        p.render();</span><br><span class="line">        isfinished *= p.isfinished;</span><br><span class="line">    &#125;</span><br><span class="line">    this.garden.ctx.restore();</span><br><span class="line">    if (isfinished == true) &#123;</span><br><span class="line">        this.garden.removeBloom(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">init: function () &#123;</span><br><span class="line">    var angle = 360 / this.pc;</span><br><span class="line">    var startAngle = Garden.randomInt(0, 90);</span><br><span class="line">    for (var i = 0; i &lt; this.pc; i++) &#123;</span><br><span class="line">        this.petals.push(new Petal(Garden.random(Garden.options.petalStretch.min, Garden.options.petalStretch.max), Garden.random(Garden.options.petalStretch.min, Garden.options.petalStretch.max), startAngle + i * angle, angle, Garden.random(Garden.options.growFactor.min, Garden.options.growFactor.max), this));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Garden(ctx, element) &#123;</span><br><span class="line">    this.blooms = [];</span><br><span class="line">    this.element = element;</span><br><span class="line">    this.ctx = ctx;</span><br><span class="line">&#125;</span><br><span class="line">Garden.prototype = &#123;</span><br><span class="line">render: function () &#123;</span><br><span class="line">    for (var i = 0; i &lt; this.blooms.length; i++) &#123;</span><br><span class="line">        this.blooms[i].draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">addBloom: function (b) &#123;</span><br><span class="line">    this.blooms.push(b);</span><br><span class="line">&#125;,</span><br><span class="line">removeBloom: function (b) &#123;</span><br><span class="line">    var bloom;</span><br><span class="line">    for (var i = 0; i &lt; this.blooms.length; i++) &#123;</span><br><span class="line">        bloom = this.blooms[i];</span><br><span class="line">        if (bloom === b) &#123;</span><br><span class="line">            this.blooms.splice(i, 1);</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">createRandomBloom: function (x, y) &#123;</span><br><span class="line">    this.createBloom(x, y, Garden.randomInt(Garden.options.bloomRadius.min, Garden.options.bloomRadius.max), Garden.randomrgba(Garden.options.color.rmin, Garden.options.color.rmax, Garden.options.color.gmin, Garden.options.color.gmax, Garden.options.color.bmin, Garden.options.color.bmax, Garden.options.color.opacity), Garden.randomInt(Garden.options.petalCount.min, Garden.options.petalCount.max));</span><br><span class="line">&#125;,</span><br><span class="line">createBloom: function (x, y, r, c, pc) &#123;</span><br><span class="line">    new Bloom(new Vector(x, y), r, c, pc, this);</span><br><span class="line">&#125;,</span><br><span class="line">clear: function () &#123;</span><br><span class="line">    this.blooms = [];</span><br><span class="line">    this.ctx.clearRect(0, 0, this.element.width, this.element.height);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Garden.options = &#123;</span><br><span class="line">petalCount: &#123;</span><br><span class="line">    min: 8,</span><br><span class="line">    max: 15</span><br><span class="line">&#125;,</span><br><span class="line">petalStretch: &#123;</span><br><span class="line">    min: 0.1,</span><br><span class="line">    max: 3</span><br><span class="line">&#125;,</span><br><span class="line">growFactor: &#123;</span><br><span class="line">    min: 0.1,</span><br><span class="line">    max: 1</span><br><span class="line">&#125;,</span><br><span class="line">bloomRadius: &#123;</span><br><span class="line">    min: 8,</span><br><span class="line">    max: 10</span><br><span class="line">&#125;,</span><br><span class="line">density: 10,</span><br><span class="line">growSpeed: 1000 / 60,</span><br><span class="line">color: &#123;</span><br><span class="line">    rmin: 128,</span><br><span class="line">    rmax: 255,</span><br><span class="line">    gmin: 0,</span><br><span class="line">    gmax: 128,</span><br><span class="line">    bmin: 0,</span><br><span class="line">    bmax: 128,</span><br><span class="line">    opacity: 0.1</span><br><span class="line">&#125;,</span><br><span class="line">tanAngle: 60</span><br><span class="line">&#125;;</span><br><span class="line">Garden.random = function (min, max) &#123;</span><br><span class="line">return Math.random() * (max - min) + min;</span><br><span class="line">&#125;;</span><br><span class="line">Garden.randomInt = function (min, max) &#123;</span><br><span class="line">return Math.floor(Math.random() * (max - min + 1)) + min;</span><br><span class="line">&#125;;</span><br><span class="line">Garden.circle = 2 * Math.PI;</span><br><span class="line">Garden.degrad = function (angle) &#123;</span><br><span class="line">return Garden.circle / 360 * angle;</span><br><span class="line">&#125;;</span><br><span class="line">Garden.raddeg = function (angle) &#123;</span><br><span class="line">return angle / Garden.circle * 360;</span><br><span class="line">&#125;;</span><br><span class="line">Garden.rgba = function (r, g, b, a) &#123;</span><br><span class="line">return &#x27;rgba(&#x27; + r + &#x27;,&#x27; + g + &#x27;,&#x27; + b + &#x27;,&#x27; + a + &#x27;)&#x27;;</span><br><span class="line">&#125;;</span><br><span class="line">Garden.randomrgba = function (rmin, rmax, gmin, gmax, bmin, bmax, a) &#123;</span><br><span class="line">var r = Math.round(Garden.random(rmin, rmax));</span><br><span class="line">var g = Math.round(Garden.random(gmin, gmax));</span><br><span class="line">var b = Math.round(Garden.random(bmin, bmax));</span><br><span class="line">var limit = 5;</span><br><span class="line">if (Math.abs(r - g) &lt;= limit &amp;&amp; Math.abs(g - b) &lt;= limit &amp;&amp; Math.abs(b - r) &lt;= limit) &#123;</span><br><span class="line">    return Garden.rgba(rmin, rmax, gmin, gmax, bmin, bmax, a);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    return Garden.rgba(r, g, b, a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-æ„é€ ç”»å¸ƒå¤§å°å’Œè¿åŠ¨è½¨è¿¹">5.æ„é€ ç”»å¸ƒå¤§å°å’Œè¿åŠ¨è½¨è¿¹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var $window = $(window), gardenCtx, gardenCanvas, $garden, garden;</span><br><span class="line">var clientWidth = $(window).width();</span><br><span class="line">var clientHeight = $(window).height();</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="function"><span class="title">function</span></span> () &#123;</span></span><br><span class="line">    // setup garden</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">loveHeart = $(<span class="string">&quot;#loveHeart&quot;</span>);</span></span><br><span class="line">var offsetX = $loveHeart.width() / 2;</span><br><span class="line">var offsetY = $loveHeart.height() / 2 - 55;</span><br><span class="line">    $garden = $(&quot;#garden&quot;);</span><br><span class="line">    gardenCanvas = $garden[0];</span><br><span class="line">gardenCanvas.width = $(&quot;#loveHeart&quot;).width();</span><br><span class="line">    gardenCanvas.height = $(&quot;#loveHeart&quot;).height()</span><br><span class="line">    gardenCtx = gardenCanvas.getContext(&quot;2d&quot;);</span><br><span class="line">    gardenCtx.globalCompositeOperation = &quot;lighter&quot;;</span><br><span class="line">    garden = new Garden(gardenCtx, gardenCanvas);</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&quot;#content&quot;</span>).css(<span class="string">&quot;width&quot;</span>, <span class="variable">$loveHeart</span>.width() + $(<span class="string">&quot;#code&quot;</span>).width());</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&quot;#content&quot;</span>).css(<span class="string">&quot;height&quot;</span>, Math.max(<span class="variable">$loveHeart</span>.height(), $(<span class="string">&quot;#code&quot;</span>).height()));</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&quot;#content&quot;</span>).css(<span class="string">&quot;margin-top&quot;</span>, Math.max((<span class="variable">$window</span>.height() - $(&quot;#content&quot;).height()) / 2, 10));</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&quot;#content&quot;</span>).css(<span class="string">&quot;margin-left&quot;</span>, Math.max((<span class="variable">$window</span>.width() - $(&quot;#content&quot;).width()) / 2, 10));</span></span><br><span class="line"></span><br><span class="line">    // renderLoop</span><br><span class="line">    setInterval(function () &#123;</span><br><span class="line">        garden.render();</span><br><span class="line">    &#125;, Garden.options.growSpeed);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(window).resize(<span class="function"><span class="title">function</span></span>() &#123;</span></span><br><span class="line">    var newWidth = $(window).width();</span><br><span class="line">    var newHeight = $(window).height();</span><br><span class="line">    if (newWidth != clientWidth &amp;&amp; newHeight != clientHeight) &#123;</span><br><span class="line">        location.replace(location);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function getHeartPoint(angle) &#123;</span><br><span class="line">var t = angle / Math.PI;</span><br><span class="line">var x = 19.5 * (16 * Math.pow(Math.sin(t), 3));</span><br><span class="line">var y = - 20 * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));</span><br><span class="line">return new Array(offsetX + x, offsetY + y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function startHeartAnimation() &#123;</span><br><span class="line">var interval = 50;</span><br><span class="line">var angle = 10;</span><br><span class="line">var heart = new Array();</span><br><span class="line">var animationTimer = setInterval(function () &#123;</span><br><span class="line">var bloom = getHeartPoint(angle);</span><br><span class="line">var draw = true;</span><br><span class="line">for (var i = 0; i &lt; heart.length; i++) &#123;</span><br><span class="line">var p = heart[i];</span><br><span class="line">var distance = Math.sqrt(Math.pow(p[0] - bloom[0], 2) + Math.pow(p[1] - bloom[1], 2));</span><br><span class="line">if (distance &lt; Garden.options.bloomRadius.max * 1.3) &#123;</span><br><span class="line">draw = false;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if (draw) &#123;</span><br><span class="line">heart.push(bloom);</span><br><span class="line">garden.createRandomBloom(bloom[0], bloom[1]);</span><br><span class="line">&#125;</span><br><span class="line">if (angle &gt;= 30) &#123;</span><br><span class="line">clearInterval(animationTimer);</span><br><span class="line">showMessages();</span><br><span class="line">&#125; else &#123;</span><br><span class="line">angle += 0.2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, interval);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">(function($</span><span class="language-bash">) &#123;</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">.fn.typewriter = <span class="function"><span class="title">function</span></span>() &#123;</span></span><br><span class="line">this.each(function() &#123;</span><br><span class="line">var $ele = $(this), str = $ele.html(), progress = 0;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ele.html(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line">var timer = setInterval(function() &#123;</span><br><span class="line">var current = str.substr(progress, 1);</span><br><span class="line">if (current == &#x27;&lt;&#x27;) &#123;</span><br><span class="line">progress = str.indexOf(&#x27;&gt;&#x27;, progress) + 1;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">progress++;</span><br><span class="line">&#125;</span><br><span class="line">$ele.html(str.substring(0, progress) + (progress &amp; 1 ? &#x27;_&#x27; : &#x27;&#x27;));</span><br><span class="line">if (progress &gt;= str.length) &#123;</span><br><span class="line">clearInterval(timer);</span><br><span class="line">&#125;</span><br><span class="line">&#125;, 75);</span><br><span class="line">&#125;);</span><br><span class="line">return this;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;)(jQuery);</span><br><span class="line"></span><br><span class="line">function timeElapse(date)&#123;</span><br><span class="line">var current = Date();</span><br><span class="line">var seconds = (Date.parse(current) - Date.parse(date)) / 1000;</span><br><span class="line">var days = Math.floor(seconds / (3600 * 24));</span><br><span class="line">seconds = seconds % (3600 * 24);</span><br><span class="line">var hours = Math.floor(seconds / 3600);</span><br><span class="line">if (hours &lt; 10) &#123;</span><br><span class="line">hours = &quot;0&quot; + hours;</span><br><span class="line">&#125;</span><br><span class="line">seconds = seconds % 3600;</span><br><span class="line">var minutes = Math.floor(seconds / 60);</span><br><span class="line">if (minutes &lt; 10) &#123;</span><br><span class="line">minutes = &quot;0&quot; + minutes;</span><br><span class="line">&#125;</span><br><span class="line">seconds = seconds % 60;</span><br><span class="line">if (seconds &lt; 10) &#123;</span><br><span class="line">seconds = &quot;0&quot; + seconds;</span><br><span class="line">&#125;</span><br><span class="line">var result = &quot;&lt;span class=\&quot;digit\&quot;&gt;&quot; + days + &quot;&lt;/span&gt; days &lt;span class=\&quot;digit\&quot;&gt;&quot; + hours + &quot;&lt;/span&gt; hours &lt;span class=\&quot;digit\&quot;&gt;&quot; + minutes + &quot;&lt;/span&gt; minutes &lt;span class=\&quot;digit\&quot;&gt;&quot; + seconds + &quot;&lt;/span&gt; seconds&quot;; </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&quot;#elapseClock&quot;</span>).html(result);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showMessages() &#123;</span><br><span class="line">adjustWordsPosition();</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#messages&#x27;</span>).fadeIn(5000, <span class="function"><span class="title">function</span></span>() &#123;</span></span><br><span class="line">showLoveU();</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function adjustWordsPosition() &#123;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#words&#x27;</span>).css(<span class="string">&quot;position&quot;</span>, <span class="string">&quot;absolute&quot;</span>);</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#words&#x27;</span>).css(<span class="string">&quot;top&quot;</span>, $(<span class="string">&quot;#garden&quot;</span>).position().top + 195);</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#words&#x27;</span>).css(<span class="string">&quot;left&quot;</span>, $(<span class="string">&quot;#garden&quot;</span>).position().left + 70);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function adjustCodePosition() &#123;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#code&#x27;</span>).css(<span class="string">&quot;margin-top&quot;</span>, ($(<span class="string">&quot;#garden&quot;</span>).height() - $(<span class="string">&quot;#code&quot;</span>).height()) / 2);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showLoveU() &#123;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(<span class="string">&#x27;#loveu&#x27;</span>).fadeIn(3000);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-æ•ˆæœå±•ç¤º">6.æ•ˆæœå±•ç¤º</h2><ul><li><p class='p blue'>è¯·ä½¿ç”¨ç”µè„‘ç«¯æŸ¥çœ‹æ•ˆæœ</p></li></ul><div class="tag link"><a class="link-card" title="çˆ±å¿ƒæ•ˆæœæ¼”ç¤º" href="/assets/heart.html"><div class="left"><img src="https://tuchuang.voooe.cn/images/2024/05/10/1715347320685.png"/></div><div class="right"><p class="text">çˆ±å¿ƒæ•ˆæœæ¼”ç¤º</p><p class="url">/assets/heart.html</p></div></a></div>]]></content>
    
    
    <summary type="html">ç”µå­ç‰ˆçˆ±å¿ƒä»£ç </summary>
    
    
    
    <category term="ä»£ç " scheme="https://www.hacp.top/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="ä»£ç " scheme="https://www.hacp.top/tags/%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šä¸”å¬é£åŸã€‹</title>
    <link href="https://www.hacp.top/posts/3.html"/>
    <id>https://www.hacp.top/posts/3.html</id>
    <published>2023-09-15T10:50:00.000Z</published>
    <updated>2023-09-15T10:50:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p><font size="4px"><b>å¯¼è¯» ğŸ“</b></font></p><p>ã€Šä¸”å¬é£åŸã€‹æ˜¯æ‘ä¸Šæ˜¥æ ‘çš„ä»£è¡¨ä½œï¼Œä¹Ÿæ˜¯æ— æ•°äººçš„é’æ˜¥å›å¿†ï¼Œæ¯ä¸ªäººçš„é’æ˜¥é‡Œéƒ½æœ‰ä¸€ä¸ªæµªæ¼«é‚‚é€…å´æ— æ³•ç›¸å®ˆçš„äººï¼Œè¿™ä¸ªäººï¼Œæˆ–è®¸æ˜¯é—æ†¾ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¾å¥½ï¼ŒæŠ˜å°„ç€æ„Ÿæƒ…é‡Œæœ€æ¸©æƒ…çš„ä¸€é¢ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imageaa531157e524a4d6.png" alt="" /></p><p>æ‘ä¸Šæ˜¥æ ‘ä½œä¸ºçŸ¥åä½œå®¶ï¼Œç”¨ä¸€æ”¯ç¬”å†™å°½äº†äººé—´çš„æ‚²æ¬¢ç¦»åˆï¼Œä»–å°†é’æ˜¥çš„è‰²å½©ã€çˆ±æƒ…çš„æ‚²å–œã€äººæ€§çš„ä¸åŒéƒ½åˆ»ç”»çš„æ·±å…¥äººå¿ƒã€‚</p><p>ä¹Ÿå› æ­¤ï¼Œæ¯æ¬¡è¯»ä»–çš„æ–‡å­—ï¼Œéƒ½ç»™äººä¸€ç§æ²äººå¿ƒè„¾çš„æ„Ÿè§‰ï¼Œè€Œä»–é¦–æ¬¡æç¬”å°±å¾—å¥–çš„ä»£è¡¨ä½œã€Šä¸”å¬é£åŸã€‹ï¼Œä»¥ä¸€åœºå›å¿†ä¸ºå¼€å§‹çš„æ•…äº‹ï¼Œåœ¨é‚‚é€…ä¸€ä¸ªå°å¥³å­©ä¹‹åï¼Œè‹¥éšè‹¥ç°çš„çˆ±æƒ…å’Œæ— ç–¾è€Œç»ˆçš„ç»“æœï¼Œè®²é€äº†é’æ˜¥æ—¶ä»£é‡Œçš„æ— å¥ˆä¸è¿·èŒ«ï¼Œä¹Ÿä½“ç°äº†äººæ€§å¯¹æ„Ÿæƒ…æœ€åˆå–„è‰¯çš„ä¸€é¢ã€‚</p><p>ä¹Ÿè®¸ï¼Œé’æ˜¥æ—¶ä»£çš„çˆ±æƒ…æ˜¯æœ€çº¯ç²¹çš„ï¼Œä¹Ÿæ˜¯æœ€æµªæ¼«å’Œä¸æºæ‚ä»»ä½•æ‚å¿µçš„ï¼Œä¸€ä¸ªç”·å­©çœŸæ­£åŠ¨äº†å¿ƒä¹‹åï¼Œæ˜¯ä¸ä¼šä»¥ä»»ä½•æ–¹å¼ä¼¤å®³å¥³å­©çš„ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imageafd7f6c59f1e9898.png" alt="" /></p></div><h2 id="1ã€ä¸ä¼šè¶æœºå æœ‰ã€‚">1ã€ä¸ä¼šè¶æœºå æœ‰ã€‚</h2><p>ã€Šä¸”å¬é£åŸã€‹é‡Œï¼Œç”·ä¸»åœ¨é…’å§é‡Œé‚‚é€…äº†å–å¾—çƒ‚é†‰å¦‚æ³¥çš„å¥³ä¸»ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå·¦æ‰‹æ²¡æœ‰å°æŒ‡çš„å°‘å¥³ï¼Œé‚£æ™šï¼Œå¥¹çš„å¿ƒæƒ…å·®åˆ°äº†æç‚¹ï¼Œè¯•å›¾ç”¨é…’ç²¾éº»ç—¹è‡ªå·±ï¼Œæ°å·§é‡åˆ°äº†æ­£ä¹‰çš„ç”·ä¸»ã€‚</p><p>å‡ºäºæ€œçˆ±ä¹‹å¿ƒï¼Œç”·ä¸»å¤§è´¹å‘¨ç« åœ°å°†å¥³ä¸»é€å›äº†å®¶ã€‚</p><p>å¥½äººåšåˆ°åº•çš„ç”·ä¸»ï¼Œè®©å¥³ä¸»å®‰å…¨ç€åºŠåæ²¡æœ‰é©¬ä¸Šç¦»å»ï¼Œè€Œæ˜¯å¼€å§‹äº†æ— è¨€çš„å®ˆæŠ¤ã€‚</p><p>å¥³ä¸»ä¸çœäººäº‹åœ°åœ¨é…£ç¡ï¼Œä¸è‡ªè§‰ä¸­è„±æ‰äº†è‡ªå·±çš„è¡£æœï¼Œè€Œç”·ä¸»ï¼Œè‡ªå§‹è‡³ç»ˆå®ˆæŠ¤åœ¨èº«è¾¹ï¼Œæ²¡æœ‰ä»»ä½•éåˆ†ä¹‹æƒ³ï¼Œä¹Ÿæ²¡æœ‰åšä»€ä¹ˆå‡ºæ ¼çš„äº‹ã€‚</p><p>ç­‰åˆ°ç¬¬äºŒå¤©é†’æ¥ï¼Œå¥³ä¸»çœ‹ç€èµ¤è£¸çš„è‡ªå·±ï¼Œä»¥ä¸ºè¢«ç”·ä¸»å äº†ä¾¿å®œï¼Œéª‚äº†ç”·ä¸»ã€‚</p><p>ä½†ç”·ä¸»è§£é‡Šäº†ä¸€ç•ªåï¼Œä¾¿ä¸å†ç†ä¼šäº†ï¼Œä»–çŸ¥é“ï¼Œæ¸…è€…è‡ªæ¸…ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image2d1f261677390016.png" alt="" /></p><p>å¯¹äºå¥³ä¸»ï¼Œç”·ä¸»æ˜¯æœ‰å¥½æ„Ÿçš„ï¼Œä½†ä»–æ²¡æœ‰é€‰æ‹©è¶æœºå æœ‰ï¼Œè¿™æ ·çš„è¡Œä¸ºï¼Œæ‰æ˜¯å›å­ä½œé£ã€‚</p><p>æ¯ä¸ªäººéƒ½ä¼šæœ‰æƒ…ç»ªä½è½çš„æ—¶åˆ»ï¼Œè€Œå»é…’å§æ”¾æ¾ä¹Ÿæ˜¯è§£å‹çš„ä¸€ç§æ–¹å¼ï¼Œå¯åœ¨ç”Ÿæ´»ä¸­ï¼Œå¤§éƒ¨åˆ†å¥³å­©å­æ ¹æœ¬ä¸æ•¢è¿™ä¹ˆåšï¼Œå› ä¸ºä¸€æ—¦è¢«é…’ç²¾å¼„è¿·ç³Šäº†ï¼Œå°±æœ‰å¯èƒ½è¢«åç”·å­©å äº†ä¾¿å®œã€‚</p><p>è€Œä¹¦ä¸­çš„ç”·ä¸»ï¼Œçºµç„¶å¯¹å¥³å­©æœ‰å¥½æ„Ÿï¼Œä¹Ÿæ²¡æœ‰ä¼ºæœºè€ŒåŠ¨ï¼Œè¿™æ ·çš„è¡Œä¸ºï¼Œä¸å…è®©ä»–çš„å–œæ¬¢ä¸Šå‡äº†ä¸€ä¸ªæ¡£æ¬¡ã€‚</p><p><b>å–œæ¬¢æ˜¯å æœ‰ï¼Œçˆ±æ˜¯ä¿æŠ¤ã€‚</b></p><p><b>ä¸€ä¸ªæ·±çˆ±ä½ çš„ç”·äººï¼Œæ‡‚å¾—ä¿æŠ¤è„†å¼±çš„ä½ ï¼Œæ‡‚å¾—åœ¨ä½ éœ€è¦çš„æ—¶å€™ï¼Œç»™äºˆå®ˆæŠ¤å’Œé™ªä¼´ï¼Œè¿™æ ·çš„ç”·äººï¼Œæ‰æ˜¯å€¼å¾—æ‰˜ä»˜ç»ˆèº«çš„ã€‚</b></p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image9d205a4f5df770ba.png" alt="" /></p><h2 id="2ã€æ„¿æ„æŠŠé€‰æ‹©æƒäº¤ç»™ä½ ã€‚">2ã€æ„¿æ„æŠŠé€‰æ‹©æƒäº¤ç»™ä½ ã€‚</h2><p>ã€Šä¸”å¬é£åŸã€‹é‡Œï¼Œåœ¨å’Œå¥³ä¸»åˆ†åˆ«åï¼Œç”·ä¸»å¼€å¯äº†ç–¯ç‹‚çš„æƒ³å¿µæ¨¡å¼ã€‚</p><p>é‚£ä¸€å¤œçš„é‚‚é€…ï¼Œåœ¨ä»–å¿ƒé‡ŒåŸ‹ä¸‹äº†çˆ±æƒ…çš„ç§å­ï¼Œå´æ²¡æœ‰æœºä¼šè®©å®ƒç”Ÿæ ¹å‘èŠ½ï¼Œå› ä¸ºä»–è¿å¥³å­©å«ä»€ä¹ˆéƒ½ä¸çŸ¥é“ã€‚</p><p>ç™¾æ— èŠèµ–ä¹‹é™…ï¼Œç”·å­©å»ä¸€å®¶å”±ç‰‡åº—æŒ‘é€‰æ­Œæ›²ï¼Œä»¤äººæ„å¤–çš„æ˜¯ï¼Œå¥³ä¸»å°±æ˜¯å”±ç‰‡åº—çš„å”®å–å‘˜ã€‚</p><p>ç”·ä¸»å–œå‡ºæœ›å¤–ï¼Œé‚€çº¦å¥³ä¸»ä¸€èµ·åƒé¥­ã€‚</p><p>ä½†å› ä¸ºä¹‹å‰çš„è¯¯ä¼šï¼Œå¥³ä¸»æœ‰ç‚¹ä¸æƒ…æ„¿ï¼Œè€Œç”·ä¸»åœ¨çœ‹å‡ºäº†å¥³ä¸»çš„ä¸ºéš¾ä¹‹åï¼Œå¹¶æ²¡æœ‰å¼ºè¿«ï¼Œä»–æŠŠåƒé¥­çš„é€‰æ‹©æƒäº¤ç»™äº†å¥³ä¸»ã€‚</p><p>è¿™ä¸€ä¸¾åŠ¨å¾ˆæ˜¯æš–å¿ƒã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imaged56e59c7d3babf99.png" alt="" /></p><p>ç°å®ä¸­ï¼Œå¾ˆå°‘æœ‰ç”·å­©å­æ‡‚å¾—ç…§é¡¾å–œæ¬¢çš„äººçš„æ„æ„¿ï¼Œåªä¹ æƒ¯æŠŠè‡ªå·±çš„æƒ³æ³•å¼ºåŠ åœ¨çˆ±äººèº«ä¸Šã€‚</p><p>è€Œç”·ä¸»ï¼Œå´æŠŠé€‰æ‹©æƒäº¤ç»™äº†å¥³ä¸»ï¼Œä»å†…å¿ƒæ·±å¤„å°Šé‡å¥³ä¸»çš„æ„æ„¿ã€‚</p><p>ä¹Ÿæ˜¯ä»–çš„å°Šé‡ï¼Œèµ¢å¾—äº†å¥³ä¸»çš„å¥½æ„Ÿï¼Œæœ€ç»ˆï¼Œå¥³ä¸»ä¸»åŠ¨é‚€è¯·ä»–ï¼Œå’Œä»–å…±è¿›æ™šé¤ï¼Œä¸¤äººçš„æ„Ÿæƒ…æ›´è¿‘äº†ä¸€æ­¥ã€‚</p><p>å°Šé‡ä¸€ä¸ªäººçš„æ„æ„¿ï¼Œæ˜¯çˆ±æƒ…é‡Œæœ€åŸºæœ¬çš„å¸¸è¯†ï¼Œå´ä¹Ÿæ˜¯æœ€éš¾åšåˆ°çš„ä¸€ç‚¹ã€‚</p><p><b>å¤§éƒ¨åˆ†çš„ç”·å­©ï¼Œéƒ½å–œæ¬¢ç”¨è‡ªå·±çš„è§‚å¿µå®šä¹‰ä¸¤ä¸ªäººç›¸å¤„æ–¹å¼ï¼Œä¸æ³¨é‡å¯¹æ–¹æ„æ„¿ï¼Œä¸åœ¨ä¹å¯¹æ–¹æ„Ÿå—ï¼›æ®Šä¸çŸ¥ï¼Œç»†èŠ‚æˆå°±çˆ±æƒ…ï¼Œæ„Ÿæƒ…ä¹Ÿè´¥ç»™ç»†èŠ‚ã€‚</b></p><p>æ¯ä¸ªå¥³å­©éƒ½å¸Œæœ›åœ¨çˆ±æƒ…é‡Œæœ‰ä¸€ç‚¹é€‰æ‹©çš„ç‹¬ç«‹ç©ºé—´ï¼Œå¯å¤§å¤šæ•°çš„å¥³å­©éƒ½å¤±æœ›äº†ã€‚</p><p>æ‰€ä»¥åœ¨æ„Ÿæƒ…é‡Œï¼Œé‡åˆ°ä¸€ä¸ªä¼šæŠŠé€‰æ‹©æƒäº¤ç»™ä½ çš„ç”·å­©ï¼Œä¸€å®šè¦æ‡‚å¾—çæƒœï¼Œå› ä¸ºé‚£ä¸ªäººï¼Œæ‰æ˜¯ç”¨å¿ƒçˆ±ä½ çš„äººã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image6cadacf86215f7e1.png" alt="" /></p><h2 id="3ã€å°Šé‡å½¼æ­¤çš„é€‰æ‹©ã€‚">3ã€å°Šé‡å½¼æ­¤çš„é€‰æ‹©ã€‚</h2><p>æ‘ä¸Šæ˜¥æ ‘å¹¶æ²¡æœ‰åœ¨ã€Šä¸”å¬é£åŸã€‹é‡Œç•™ä¸‹æœ‰æƒ…äººç»ˆæˆçœ·å±çš„å®Œç¾ç»“å±€ã€‚</p><p>è¿™æ®µçœŸæŒšè€Œç¾å¥½çš„æ„Ÿæƒ…åªå­˜åœ¨äº†18å¤©ï¼Œ18å¤©åï¼Œå¥³ä¸»ç¦»å¼€äº†ç”·ä¸»çš„ç”Ÿæ´»ï¼Œä»æ­¤ï¼Œç”·ä¸»å†ä¹Ÿæ²¡æœ‰è§è¿‡å¥³å­©ã€‚</p><p>ä»–ç­‰å¾…è¿‡å¥³å­©ï¼Œä¹ŸæœŸå¾…è¿‡ä¸¤äººçš„é‡é€¢ï¼Œå¯å§‹ç»ˆéƒ½æ²¡æœ‰ç­‰åˆ°ã€‚æœ€åï¼Œç”·ä¸»å°†è¿™ä»½çˆ±ï¼ŒåŸ‹è—äºå¿ƒä¸­ï¼Œå°˜å°äºè®°å¿†ï¼Œå¸¦ç€ç¾å¥½çš„å›å¿†ï¼Œèµ°å‘äº†ä½™ç”Ÿã€‚</p><p>ä¸æ˜¯æ‰€æœ‰çš„çˆ±æƒ…ï¼Œéƒ½ä¸€å®šè¦å ä¸ºå·±æœ‰ï¼›é©»è¶³äºå›å¿†çš„æ„Ÿæƒ…ï¼Œæ›´åŠ å¼¥è¶³çè´µã€‚</p><p>åŸæ¥ï¼Œåœ¨æ„Ÿæƒ…é‡Œï¼Œç›¸çˆ±ä¸ä¸€å®šèƒ½ç›¸å®ˆï¼Œç›¸å®ˆä¸ä¸€å®šèƒ½ç›¸ä¼´ä¸€è¾ˆå­ã€‚æ­£å¦‚ä½œå®¶å‘¨å›½å¹³æ›¾è¯´ï¼šâ€œçˆ±çš„ä»·å€¼åœ¨äºå®ƒè‡ªèº«ï¼Œè€Œä¸åœ¨äºå®ƒçš„ç»“æœã€‚â€<p><p>ç”Ÿæ´»æœ‰å¤ªå¤šä¸ç¡®å®šæ€§ï¼Œæœ‰äº›äººï¼Œæ³¨å®šåªæ˜¯å½¼æ­¤ç”Ÿå‘½ä¸­çš„è¿‡å®¢ã€‚</p><p>æ—¢ç„¶æ²¡æœ‰èƒ½åŠ›å†³å®šä¸¤ä¸ªäººçš„å¹¸ç¦ï¼Œä¸å¦‚å°Šé‡å½¼æ­¤çš„é€‰æ‹©ï¼Œç»™å¯¹æ–¹ç•™ä¸‹ä¸€å¥ç¾å¥½çš„ç¥ç¦ï¼Œç»™è‡ªå·±ä¸€ä¸ªé‡æ–°å¼€å§‹çš„å¯èƒ½ã€‚</p><p>çˆ±æƒ…ï¼Œä¸ä¸€å®šè¦ç›¸å®ˆæ‰ç¾å¥½ï¼›ç•™åœ¨å›å¿†é‡Œçš„çˆ±äººï¼Œä¹Ÿå€¼å¾—ç¼…æ€€ä¸€ç”Ÿã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imageff5767fd16acdd2c.png" alt="" /></p>]]></content>
    
    
    <summary type="html">ä½ ä¼šæ‡‚ä¸€ä¸ªç”·äººæœ€é«˜çº§çš„çˆ±</summary>
    
    
    
    <category term="é˜…è¯»" scheme="https://www.hacp.top/categories/%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="ä¹¦ç±" scheme="https://www.hacp.top/tags/%E4%B9%A6%E7%B1%8D/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šæ´»ç€ã€‹</title>
    <link href="https://www.hacp.top/posts/4.html"/>
    <id>https://www.hacp.top/posts/4.html</id>
    <published>2023-09-09T10:19:03.000Z</published>
    <updated>2023-09-09T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p><font size="4px"><b>å¯¼è¯» ğŸ“</b></font></p><p>èº«å¤„è’è¯çš„ä¸–ç•Œï¼Œæ¯ä¸ªäººéƒ½è¯¥è¯»è¯»ä½™åã€‚</p><p>ä½™åçš„ä»£è¡¨ä½œã€Šæ´»ç€ã€‹é£é¡å…¨çƒï¼Œæ‰“åŠ¨ä¸€ä»£åˆä¸€ä»£è¯»è€…ã€‚</p><p>ç”Ÿå‘½ä¸èƒ½æ‰¿å—ä¹‹è½»ï¼Œèƒ½æ¥å—ä¹‹ç—›ï¼Œæ„¿æˆ‘ä»¬éƒ½èƒ½ä»ä¸­æ‰¾åˆ°åŠ›é‡ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/10/image5613326d3feb6eb4.png" alt="" /></p><p>ä½œå®¶ä½™åè¯´ï¼š</p><p>â€œäººæ˜¯ä¸ºæ´»ç€æœ¬èº«è€Œæ´»ç€çš„ï¼Œè€Œä¸æ˜¯ä¸ºäº†æ´»ç€ä¹‹å¤–çš„ä»»ä½•äº‹ç‰©æ‰€æ´»ç€ã€‚â€</p><p>ã€Šæ´»ç€ã€‹çš„ä¸»äººå…¬å¾ç¦è´µï¼Œå°‘å¹´æ—¶èµŒå…‰å®¶äº§ï¼Œæ°”æ­»çˆ¶äº²ï¼›ä¸­å¹´ä¸§å­åˆä¸§å¦»ï¼Œè€å¹´æ—¶åˆå¤±å»äº†å”¯ä¸€çš„å¤–å­™ã€‚</p><p>ç„¶è€Œè¿™ä¸€åˆ‡ä¸å¹¸ï¼Œå¹¶æ²¡æœ‰è®©ä»–å€’ä¸‹ã€‚</p><p>ä»–åœ¨æ‰¿å—äº†å·¨å¤§çš„ç—›è‹¦ä¹‹åï¼Œå­¦ä¼šäº†åšå¼ºé¢å¯¹ä¸€åˆ‡ï¼Œæ´»å‡ºäº†ç”Ÿå‘½åº”æœ‰çš„æ·±åº¦å’Œåšåº¦ã€‚</p><p>è¯»å®Œã€Šæ´»ç€ã€‹ï¼Œä½ ä¼šå‘ç°éŸ§æ€§æ˜¯å¾ç¦è´µçš„äººç”Ÿåº•è‰²ã€‚</p><p>æ­£æ˜¯è¿™ä»½éŸ§æ€§æ‰¿è½½ç€ä»–çš„ä½¿å‘½ï¼Œå†³å®šäº†ä»–èƒ½èµ°å¤šè¿œã€‚</p></div><h2 id="1-éŸ§æ€§ï¼Œæ˜¯è®¤æ¸…ç°å®åçš„å¤åŸåŠ›">1.éŸ§æ€§ï¼Œæ˜¯è®¤æ¸…ç°å®åçš„å¤åŸåŠ›</h2><p>å¾è€çˆ·æœ‰ä¸€ç™¾å¤šäº©ç”°åœ°ï¼Œæ˜¯æ–¹åœ†å‡ åé‡Œçš„å¤§æˆ·ã€‚</p><p>ç¦è´µæ˜¯ä»–å”¯ä¸€çš„ç‹¬è‹—ï¼Œçˆ·ä¿©å„¿æ˜¯è¿œè¿‘é—»åçš„é˜”è€çˆ·å’Œé˜”å°‘çˆ·ã€‚</p><p>å¾è€çˆ·ä¸ºäº†è®©ç¦è´µå¥½å¥½è¯»ä¹¦ï¼Œè¿˜ä¸“é—¨ç»™ä»–è¯·äº†ç§å¡¾å…ˆç”Ÿã€‚</p><p>å¯ä»–å¤©ç”Ÿä¸æ˜¯è¯»ä¹¦çš„é‚£å—æ–™ï¼Œå…ˆç”Ÿè®©ä»–å¿µä¹¦æ—¶ï¼Œä»–å±…ç„¶ç‹‚å¦„åœ°å¯¹å…ˆç”Ÿè¯´ï¼šâ€œå¥½å¥½å¬ç€ï¼Œçˆ¹ç»™ä½ å¿µä¸€æ®µã€‚â€</p><p>ç§å¡¾å…ˆç”Ÿè¢«ä»–æ°”å¾—åŠæ­»ï¼Œå¿ä¸ä½åœ¨å¾è€çˆ·é¢å‰å‘ŠçŠ¶ï¼šâ€œä½ å®¶å°‘çˆ·é•¿å¤§äº†å‡†èƒ½å½“ä¸ªäºŒæµå­ã€‚â€</p><p>æ²¡æƒ³åˆ°ï¼Œè€å…ˆç”Ÿä¸€è¯­æˆé½‘ã€‚</p><p>é•¿å¤§åçš„ç¦è´µï¼Œåƒå–å«–æ ·æ ·ä¿±å…¨ï¼Œåæ¥ä»–è¿˜è¿·ä¸Šäº†èµŒåšã€‚</p><p>ä¸€å¼€å§‹èµŒè¾“äº†ï¼Œä»–å°±ä¼šå·æ¯äº²ã€è€å©†çš„é¦–é¥°å»è¿˜å€ºã€‚åæ¥ä»–å«Œéº»çƒ¦ï¼Œå¹²è„†å¼€å§‹èµŠè´¦ã€‚</p><p>è¿™ä¸€èµŠè´¦ï¼Œä»–å°±ä¸æ¸…æ¥šè‡ªå·±ç©¶ç«Ÿè¾“äº†å¤šå°‘ã€‚è€Œä¸”ä»–è¿˜å¤©çœŸåœ°è®¤ä¸ºï¼Œèƒ½ä»èµŒåœºèµ¢å›å¾è€çˆ·å¹´è½»æ—¶è¾“æ‰çš„å®¶äº§ã€‚</p><p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œå¼€èµŒå±€çš„é¾™äºŒä¸å†è®©ä»–èµŠè´¦ã€‚ä»–æ‰çŸ¥é“è‡ªå·±ä¸ä»…è¾“å…‰äº†å®¶é‡Œçš„ä¸€ç™¾å¤šäº©ç”°åœ°ï¼Œè¿˜æœ‰å®¶äº§ã€‚</p><p>ç¦è´µåƒç”Ÿäº†ä¸€åœºå¤§ç—…ï¼Œä»–è„¸è‰²è‹ç™½ï¼Œè·Œè·Œæ’æ’åœ°å›åˆ°å®¶é‡Œã€‚</p><p>å¾è€çˆ·å¾—çŸ¥è¿™ä¸ªæ¶ˆæ¯ï¼Œæ²¡è¿‡å¤šä¹…å°±è¢«æ°”æ­»äº†ã€‚æ€€ç€èº«å­•çš„å®¶çï¼Œä¹Ÿè¢«ä»–çš„è€ä¸ˆäººæ¥å›åŸé‡Œå»ã€‚</p><p>åŸæœ¬å¹¸ç¦çš„ä¸€å®¶äººè¢«å¼„å¾—ä¸ƒé›¶å…«æ•£ï¼Œè€Œé€ æˆè¿™ä¸€æ‚²å‰§çš„æ ¹æºå°±æ˜¯ç¦è´µçš„èµŒåšã€‚</p><p>ç¦è´µä¸€å®¶äººæ¬åˆ°èŒ…è‰å±‹å»å±…ä½ï¼Œå¹´è¿ˆçš„æ¯äº²ä¸ºäº†ç”Ÿè®¡æŒç€ç¯®å­ã€æ‰­ç€å°è„šå»ç”°é‡ŒåŠ³ä½œï¼Œè¿˜æœ‰å¹´å¹¼çš„å¥³å„¿å‡¤éœè·Ÿç€ä»–æŒ¨é¥¿å—è‹¦ã€‚</p><p>ä¸€å‘åœ¨æµ‘æµ‘å™©å™©ä¸­åº¦æ—¥çš„ç¦è´µï¼Œä»–çš„å¿ƒçªç„¶è¢«ä»€ä¹ˆä¸œè¥¿åˆºäº†ä¸€ä¸‹ï¼Œå¾ˆç–¼å¾ˆç–¼ã€‚</p><p>ç¦è´µå¯¹è‡ªå·±è¯´ï¼šâ€œæˆ‘æƒ³æƒ³å†ä¸èƒ½åƒä»å‰é‚£æ ·è¿‡æ—¥å­ï¼Œæˆ‘å¾—å…»æ´»æˆ‘å¨˜å’Œå‡¤éœã€‚â€</p><p>ä»–çš„è§‰é†’å°±åœ¨ä¸€ç¬é—´ï¼Œå”¤é†’ä»–çš„æ˜¯æ·±æ¤äºå†…å¿ƒæ·±å¤„çš„éŸ§æ€§ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä»–ä¸ç”Ÿä¿±æ¥çš„å¤åŸåŠ›ã€‚</p><p>æ˜¯çš„ï¼Œäººç”Ÿçš„é“è·¯ä¸ä¼šä¸€å¸†é£é¡ºï¼Œå¿…ç„¶ä¼šä¼´éšç€æŒ«æŠ˜ã€ç£¨éš¾ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/10/image5b1c7894dfc53ac6.png" alt="" /></p><p>å¦‚æœæˆ‘ä»¬èƒ½åœ¨è€ƒéªŒä¸­æ¸…é†’æ‰¾åˆ°è‡ªå·±çš„å®šä½ï¼Œé‡æ–°å¼€å§‹ï¼Œæ‰ä¼šç«‹äºä¸è´¥ä¹‹åœ°ã€‚</p><p>æœ‰å¥è¯è¯´å¾—å¥½ï¼š</p><p>â€œå…·æœ‰å¤åŸåŠ›çš„äººï¼Œèƒ½å¤Ÿåœ¨é¢ä¸´å›°å¢ƒæ—¶ä¸æŠ±æ€¨ï¼Œå¹¶ä¸”è¿…é€Ÿå¹³å¤å†…å¿ƒçš„ç„¦èºä¸å®‰ï¼Œä»å®¹åœ°é¢å¯¹ç°å®ï¼Œçµæ´»åº”å¯¹ã€‚â€</p><p>ç”±æ­¤å¯è§ï¼Œå¤åŸåŠ›æ˜¯ä¸€ä¸ªäººè¿…é€Ÿèµ°å‘æˆç†Ÿï¼Œæ‰¿æ‹…è´£ä»»çš„ä¸€ç§ä½“ç°ã€‚</p><p>éŸ§æ€§ï¼Œæ˜¯é¢å¯¹å›°å¢ƒçš„åšå¿ä¸æ‹”</p><h2 id="2-å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€ã€‚">2.å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€ã€‚</h2><p>ç¦è´µå‹‡æ•¢åœ°è¿ˆå‡ºäº†è¡ŒåŠ¨çš„ç¬¬ä¸€æ­¥ï¼Œä»–æƒ³å‡­å€Ÿè‡ªå·±çš„åŒæ‰‹å…»æ´»æ¯äº²å’Œå¥³å„¿ã€‚</p><p>å¾ˆå¿«ï¼Œä»–ä»é¾™äºŒæ‰‹é‡Œç§Ÿæ¥äº†äº”äº©åœ°ã€‚</p><p>å¯¹äºä»å°å¨‡ç”Ÿæƒ¯å…»ï¼Œæ²¡æœ‰å¹²è¿‡å†œæ´»çš„ä»–æ¥è¯´ï¼Œè¿™é¡¹å·¥ä½œéš¾åº¦å¯ä¸å°ã€‚</p><p>ä¸ºäº†è®©åº„ç¨¼èµ¶ä¸Šæ’­ç§å­£èŠ‚ï¼Œæœ‰ä¸ªå¥½æ”¶æˆã€‚</p><p>ä»–å¸¸å¸¸èµ·æ—©è´ªé»‘ï¼Œæœ‰æ—¶æ‰‹è„šæ“¦ç ´çš®æµè¡€äº†ï¼Œä»–å°±æŠŠæ³¥å·´ç³Šåˆ°ä¼¤å£å¤„åŠ é€Ÿæ„ˆåˆã€‚</p><p>è¿™æ ·çš„æ—¥å­å¾ˆè‹¦å¾ˆç´¯ï¼Œç¦è´µå´ç¡å¾—éå¸¸è¸å®ã€‚ä»–ç”šè‡³å¹»æƒ³ç€ï¼Œè€å¾å®¶è¿˜ä¼šæ…¢æ…¢å‘è¾¾èµ·æ¥ã€‚</p><p>ç©ºé—²æ—¶ï¼Œå¾ç¦è´µä¼šæƒ¦è®°å®¶çå’Œå¥¹è‚šå­é‡Œçš„å­©å­ã€‚åœ¨å¿å¿‘ä¸å®‰çš„ç­‰å¾…ä¸­ï¼Œå®¶çå¸¦ç€å„¿å­æœ‰åº†å›æ¥äº†ã€‚</p><p>ç¦è´µçœ‹åˆ°å®¶çå›æ¥ï¼Œéå¸¸å¼€å¿ƒã€‚è¿™å›ï¼Œä»–çŸ¥é“å¿ƒç–¼å®¶çäº†ï¼Œè„æ´»ã€ç´¯æ´»ä»–éƒ½æŠ¢ç€å¹²ï¼Œè¿™ä¸ªå®¶æ­£åœ¨æœç€å¥½çš„æ–¹å‘å»å‘å±•ã€‚<p>ç„¶è€Œå‘½è¿çš„èµ°å‘ï¼Œä»æ¥éƒ½æ˜¯ä¸ä»¥äººçš„æ„å¿—ä¸ºè½¬ç§»ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/10/image1821714d105e4f05.png" alt="" /></p><p>å¨˜ç—…äº†ï¼Œç¦è´µå»åŸé‡Œè¯·éƒä¸­ã€‚é˜´å·®é˜³é”™ï¼Œå´è¢«å›½å†›æŠ“äº†å£®ä¸ã€‚</p><p>å½“å£®ä¸çš„æ—¥å­é‡Œï¼Œä»–å‡ æ¬¡ä¸æ­»ç¥æ“¦è‚©è€Œè¿‡ã€‚é‚£æ—¶æ”¯æ’‘ç€ä»–æ´»ä¸‹å»çš„å”¯ä¸€ä¿¡å¿µå°±æ˜¯å›å®¶ã€‚</p><p>ä¸¤å¹´åï¼Œç¦è´µå›åˆ°å®¶é‡Œæ—¶ï¼Œå¨˜å·²ç¦»ä¸–ï¼Œå‡¤éœä¹Ÿåœ¨ä¸€æ¬¡é‡ç—…ä¸­å˜æˆäº†è‹å“‘å¥³å­©ã€‚</p><p>é¢å¯¹è¿™ä¸€åˆ‡å˜æ•…ï¼Œç¦è´µæ²¡æœ‰ä»»ä½•æ€¨è¨€ï¼Œè€Œæ˜¯å¦ç„¶æ¥å—ã€‚</p><p>å› ä¸ºç¦è´µç»å†æˆ˜äº‰çš„è€ƒéªŒï¼Œæ¿€å‘äº†ä»–ä¸ç”Ÿä¿±æ¥çš„éŸ§æ€§ï¼Œè¿˜æœ‰ä»–å¯¹ç”Ÿæ´»åšå¿ä¸æ‹”çš„æ¯…åŠ›ã€‚ä»–ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥ã€‚</p><p>å½“ç¦è´µçœ‹åˆ°è´ªå©ªçš„é¾™äºŒè¢«æªæ¯™åï¼Œä»–æ›´æ˜¯å¯¹æœªæ¥å……æ»¡äº†ä¿¡å¿ƒã€‚ä»–å¯¹è‡ªå·±è¯´ï¼Œè¿™ä¸‹å¯è¦å¥½å¥½æ´»äº†ã€‚</p><p> â€œå‘ç€é•¿æœŸçš„ç›®æ ‡ï¼ŒåšæŒè‡ªå·±çš„æ¿€æƒ…ï¼Œå³ä¾¿ç»å†å¤±è´¥ï¼Œä¾ç„¶èƒ½å¤ŸåšæŒä¸æ‡ˆåœ°åŠªåŠ›ä¸‹å»ï¼Œè¿™ç§å“è´¨å°±å«åšåšæ¯…ã€‚â€</p><p>ç¦è´µæ­£æ˜¯å‡­å€Ÿç€è¿™ä»½åšæŒå’Œæ¯…åŠ›ï¼Œæ‰¿å—äº†å¸¸äººæ‰€ä¸èƒ½æ‰¿å—çš„è‹¦éš¾ï¼Œèµ°å‡ºäº†å±äºè‡ªå·±çš„é‚£ä»½å¤©åœ°ã€‚</p><p>å› ä¸ºä»–åšä¿¡åªæœ‰å¥½å¥½æ´»ç€ï¼Œæ‰æ˜¯äººç”Ÿæœ€å¤§çš„èµ¢å®¶ã€‚</p><h2 id="3-éŸ§æ€§ï¼Œæ˜¯å†ç»ç£¨éš¾çš„äº‘æ·¡é£è½»">3.éŸ§æ€§ï¼Œæ˜¯å†ç»ç£¨éš¾çš„äº‘æ·¡é£è½»</h2><p>æ¸…è´«çš„æ—¥å­é‡Œï¼Œç¦è´µä¸€å®¶äººå…¶ä¹èèã€‚<p>è½¬çœ¼é—´ï¼Œå‡¤éœå·²æ˜¯å¤§å§‘å¨˜ï¼Œå‡ºè½å¾—äº­äº­ç‰ç«‹ï¼Œæœ‰åº†ä¹Ÿåˆ°äº†è¯»ä¹¦çš„å¹´é¾„ã€‚</p><p>æœ‰åº†æ˜¯ä¸ªæ‡‚äº‹çš„å­©å­ï¼Œä»–ä¸ä»…å¸®è¡¬ç€ç¦è´µå¹²å®¶åŠ¡æ´»å„¿ï¼Œä»–è¿˜å› ä¸ºé•¿è·‘æˆç»©ä¼˜ç§€ï¼Œç»™å®¶é‡ŒæŒ£æ¥äº†è£èª‰ã€‚</p><p>çœ‹ä¼¼å¹³é™çš„ç”Ÿæ´»ï¼Œå®é™…ä¸Šæ˜¯æš—æµæ±¹æ¶Œã€‚</p><p>å¿é•¿çš„å¥³äººç”Ÿå­©å­å¤§å‡ºè¡€ï¼Œå­¦æ ¡ç»„ç»‡å­©å­ä»¬å»çŒ®è¡€ã€‚æœ‰åº†çš„è¡€å‹æœ€åŒ¹é…ï¼Œè°çŸ¥ä¸‹æ‰‹ä¸çŸ¥è½»é‡çš„åŒ»ç”Ÿï¼ŒæŠ½å¹²äº†æœ‰åº†çš„è¡€ã€‚</p><p>ç¦è´µæƒ³ä¸æ˜ç™½ï¼Œæ—©ä¸Šè¿˜æ˜¯æ´»è¹¦ä¹±è·³çš„å„¿å­ï¼Œåˆ°äº†æ™šä¸Šå°±å˜æˆä¸€å…·æ²¡æœ‰æ¸©åº¦çš„èº¯ä½“ã€‚</p><p>ç¦è´µçš„å¿ƒåœ¨æ»´è¡€ï¼Œæ·±å…¥éª¨é«“çš„ç—›æ’•æ‰¯ç€ä»–ï¼Œè¿å¸¦ç€èº«ä¸Šçš„æ¯å¯¸è‚Œè‚¤ã€‚</p><p>æœ‰åº†èµ°äº†ï¼Œç¦è´µè®¤ä¸ºå¾—äº†è½¯éª¨ç—…çš„å®¶çè‚¯å®šç»å—ä¸ä½æ‰“å‡»ï¼Œä¹Ÿä¼šç¦»ä»–è€Œå»ã€‚</p><p>å°±åœ¨æ‰€æœ‰äººå¯¹å®¶ççš„ç—…ä¸æŠ±ä»»ä½•å¸Œæœ›æ—¶ï¼Œå®¶çå±…ç„¶å¥‡è¿¹èˆ¬çš„æŒºäº†è¿‡æ¥ã€‚</p><p>å‡¤éœä¹Ÿå«ç»™äº†åŸé‡Œçš„æ¬è¿å·¥äºŒå–œã€‚äºŒå–œé•¿å¾—å¾ˆä¸€èˆ¬ï¼Œå¯¹å‡¤éœå´æ˜¯å®æ‰“å®åœ°å¥½ã€‚</p><p>æ²¡è¿‡å¤šä¹…ï¼Œå‡¤éœæ€€å­•çš„å¥½æ¶ˆæ¯ç»™è¿™ä¸ªå¤šç¾å¤šéš¾çš„å®¶åº­å¸¦æ¥äº†ä¸€ä¸ä¸å–œæ‚¦ã€‚</p><p>â€œåæœˆæ€€èƒï¼Œä¸€æœåˆ†å¨©ã€‚â€åœ¨ä¸€ä¸ªé›ªä¸‹å¾—å¾ˆå¤§çš„æ—¥å­é‡Œï¼Œå‡¤éœç”Ÿä¸‹äº†å„¿å­ã€‚</p><p>è°çŸ¥ç¦è´µå‰è„šåˆšèµ°ï¼Œå‡¤éœå°±å¤§å‡ºè¡€ï¼Œä¸åˆ°å¤©é»‘å°±æ–­äº†æ°”ã€‚</p><p>å®¶çç»™å‡¤éœçš„å„¿å­å–åâ€”â€”è‹¦æ ¹ã€‚å‡¤éœèµ°åä¸åˆ°ä¸‰ä¸ªæœˆï¼Œå®¶çä¹Ÿèµ°äº†ã€‚</p><p>ç¦è´µåªæœ‰äºŒå–œå’Œè‹¦æ ¹ä¸¤ä¸ªäº²äººäº†ã€‚äºŒå–œæ—¢å½“çˆ¹åˆå½“å¦ˆï¼Œç…§çœ‹è‹¦æ ¹å¾ˆè¾›è‹¦ã€‚</p><p>åœ¨è‹¦æ ¹å››å²é‚£å¹´ï¼ŒäºŒå–œè¢«ä¸¤æ’æ°´æ³¥æ¿å¤¹æ­»äº†ã€‚</p><p>ç¦è´µå·²ç»æ²¡æœ‰çœ¼æ³ªäº†ï¼Œä»–å·²ç»è¢«ç”Ÿæ´»ç£¨å¹³äº†æ£±è§’ã€‚</p><p>é¢å¯¹äº²äººä¸€ä¸ªä¸ªçš„ç¦»å»ï¼Œä»–å·²ç»ä¹ æƒ¯äº†é¢å¯¹ã€‚</p><p>ä»–å¯¹è‡ªå·±è¯´ï¼Œåªè¦æœ‰è‹¦æ ¹åœ¨æ¯”ä»€ä¹ˆéƒ½å¼ºï¼Œé¦™ç«è¿˜ä¼šå¾€ä¸‹ä¼ ï¼Œè¿™æ—¥å­è¿˜å¾—å¥½å¥½è¿‡ä¸‹å»ã€‚</p><p>è‹¦æ ¹æ˜¯ä»–çš„å‘½æ ¹å­ï¼Œæ›´æ˜¯ä»–å¸Œæœ›çš„æ‹æ–ã€‚ç¦è´µè™½ç„¶å¾ˆç´¯ï¼Œå¯æ˜¯å¿ƒé‡Œå¾ˆé«˜å…´ã€‚æœ‰äº†è‹¦æ ¹ï¼Œä»–æ´»ç€å°±æœ‰äº†å¥”å¤´ã€‚</p><p>çœ‹ç€è‹¦æ ¹ä¸€å¤©æ¯”ä¸€å¤©æ‡‚äº‹ï¼Œç¦è´µç¡è§‰éƒ½èƒ½å’§ç€å˜´ç¬‘é†’ã€‚</p><p>å°±åœ¨ç¦è´µå¯¹æœªæ¥å……æ»¡å¸Œæœ›æ—¶ï¼Œè‹¦æ ¹å´å› åƒç‚’è±†å­æ’‘æ­»äº†ã€‚è¿™æ—¶çš„ç¦è´µï¼Œå·²ç»ä¸ä¼šå“­äº†ã€‚</p><p>ä»–çš„çœ¼æ³ªæµåœ¨äº†å¿ƒåº•ï¼ŒåŒ–ä¸ºåº”å¯¹ç”Ÿæ´»çš„å‹‡æ°”ã€‚</p><p> å°¼é‡‡è¯´ï¼š</p><p>â€œå‡¡æ€ä¸æ­»æˆ‘çš„ï¼Œå¿…å°†è®©æˆ‘æ›´å¼ºå¤§ã€‚â€</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/10/image42d3586c40a57402.png" alt="" /></p><p>ç¦è´µç—›å®šæ€ç—›ï¼Œä»–æ·±çŸ¥è¦æƒ³æ´»ä¸‹å»ï¼Œå°±å¿…é¡»æ‰¿å—è¿™ä¸€åˆ‡ã€‚</p><p>åœ¨è‹¦æ ¹æ­»åçš„ç¬¬äºŒå¹´ï¼Œç¦è´µä¹°äº†ä¸€å¤´å’Œä»–ä¸€æ ·è€çš„ç‰›ã€‚</p><p>ä»–ç»™è€ç‰›å–åå«ç¦è´µã€‚ä»–æ¯å¤©éƒ½ä¼šå’Œè€ç‰›åƒçŸ¥å¿ƒæœ‹å‹ä¸€æ ·ï¼Œè¯´è¯´è¯ï¼Œå” å” å®¶å¸¸ã€‚</p><p>æœ‰æ—¶ï¼Œä»–å’Œåˆ«äººè°ˆèµ·ä»–æ‰€ç»å†çš„è¿‡å¾€ï¼Œä¹Ÿæ˜¯ä¸æ‚²ä¸å–œï¼Œæ·¡å®šä»å®¹ã€‚</p><p>ä½œå®¶ç™½è½æ¢…è¯´ï¼Œèµ°è¿‡å¹³æ¹–çƒŸé›¨ï¼Œå²æœˆå±±æ²³ï¼Œé‚£äº›å†å°½åŠ«æ•°ï¼Œå°éç™¾å‘³çš„äººï¼Œä¼šæ›´åŠ ç”ŸåŠ¨è€Œå¹²å‡€ã€‚</p><p>ç¦è´µå°±æ˜¯è¿™æ ·çš„äººï¼Œè‹¦éš¾è®©ä»–å­¦ä¼šé¢å¯¹ï¼Œè®©ä»–æ·¡å®šä»å®¹ã€‚</p><p>ä»–çš„ç”Ÿå‘½æœ‰äº†éŸ§æ€§ï¼Œä»–çš„äººç”Ÿæ›´åŠ åšé‡ã€‚</p>]]></content>
    
    
    <summary type="html">å¿ƒç†éŸ§æ€§ï¼Œå†³å®šäº†ä¸€ä¸ªäººèƒ½èµ°å¤šè¿œ</summary>
    
    
    
    <category term="é˜…è¯»" scheme="https://www.hacp.top/categories/%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="ä¹¦ç±" scheme="https://www.hacp.top/tags/%E4%B9%A6%E7%B1%8D/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šå¤©é»‘ä»¥åã€‹</title>
    <link href="https://www.hacp.top/posts/2.html"/>
    <id>https://www.hacp.top/posts/2.html</id>
    <published>2023-08-15T10:40:03.000Z</published>
    <updated>2023-08-15T10:40:03.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p><font size="4px"><b>å¯¼è¯» ğŸ“</b></font></p><p>ã€Šå¤©é»‘ä»¥åã€‹è®²è¿°äº†å…¥å¤œåçš„ç”Ÿæ´»ï¼Œç”¨çœŸå®åˆæ— å¥ˆçš„å¿ƒè·¯å†ç¨‹ï¼Œè§£å¼€äº†çƒ¦æ¼çš„æ ¹æºï¼Œè®©äººæ˜ç™½ï¼Œè‹¥æƒ³ä»å¿ƒçµçš„ä¼¤å®³ä¸­è§£è„±ï¼Œå”¯æœ‰å…ˆé¢å¯¹è‡ªå·±çš„ç—›è‹¦ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imagee81cf66452274d68.png" alt="" /></p><p>çƒ¦æ¼ï¼Œæ˜¯æ¯ä¸ªäººæœ‰çš„ï¼Œå®ƒåƒå½±å­ä¸€æ ·ï¼Œå¦‚å½±éšå½¢ã€‚</p><p>ä»¥å‰çš„æ—¶ä»£ï¼Œç”µå­è®¾å¤‡è¿˜æ²¡æœ‰æ™®åŠçš„æ—¶å€™ï¼Œäº²æœ‹å¥½å‹èšåœ¨ä¸€èµ·èŠèŠå¤©ï¼Œçƒ¦æ¼å¥½åƒå°±èƒ½å¾—åˆ°é‡Šæ”¾ï¼›å¯å¦‚ä»Šï¼Œè¶Šæ¥è¶Šå¤šçš„é«˜ç§‘æŠ€æ–¹ä¾¿äº†ç”Ÿæ´»ï¼Œå´ä¹Ÿé˜»ç¢äº†äººä»¬çš„æ²Ÿé€šã€‚</p><p>äºæ˜¯ä¹ï¼Œå¤§éƒ¨åˆ†çš„äººåœ¨ç™½å¤©é‡Œå…‰é²œäº®ä¸½ï¼Œåœ¨å¤œæ™šé—´é»¯ç„¶ç¥ä¼¤ï¼Œåˆ°å¤„å¯»æ‰¾é¸¡æ±¤è¯•å›¾å®‰æ…°è‡ªå·±å—ä¼¤çš„å¿ƒçµï¼Œå´ä¹ŸæŠ‘éƒçš„æƒ…ç»ªè´¯ç©¿å§‹ç»ˆã€‚</p><p>å…¶å®ï¼Œè¯´åˆ°åº•ï¼Œæ˜¯æ²¡æœ‰å­¦ä¼šä¸è‡ªå·±å’Œè§£ã€‚è€Œã€Šå¤©é»‘ä»¥åã€‹è¿™æœ¬ä¹¦ï¼Œç²¾å‡†åœ°è¡¨è¾¾äº†äººä»¬çš„å›°æƒ‘ï¼Œè®©è¯»è€…äº†è§£åˆ°ï¼šåŸæ¥åšä¸ªå¼€å¿ƒçš„äººï¼Œä¹Ÿæ²¡é‚£ä¹ˆéš¾ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imageef274f2aa9608d63.png" alt="" /></p></div><h2 id="1ã€äººäººéƒ½æœ‰ä¸åŒçš„æˆ˜åœºã€‚">1ã€äººäººéƒ½æœ‰ä¸åŒçš„æˆ˜åœºã€‚</h2><p>ã€Šå¤©é»‘ä»¥åã€‹æ˜¯æ—¥æœ¬ä½œå®¶æ‘ä¸Šæ˜¥æ ‘è¿ˆå‘æ–°å°è¯´çš„æ ‡å¿—æ€§æ°ä½œï¼Œè®²è¿°äº†å†¬æ—¥ï¼Œä¸œäº¬ï¼Œæ·±å¤œ11ç‚¹åˆ°æ¸…æ™¨6ç‚¹çš„æ•…äº‹ã€‚</p><p>19å²çš„ç›ä¸½ï¼Œæ˜¯å¤–è¯­å¤§å­¦é‡Œå­¦ä¸­æ–‡çš„å­¦ç”Ÿï¼Œå¥¹æœ‰ç€ä¸ä¼—ä¸åŒä¹‹å¤„ï¼Œé‚£å°±æ˜¯â€œèº«ä¸ºæ—¥æœ¬äººï¼Œè®²ä¸­å›½è¯çš„æ¬¡æ•°å¤šäºè®²æ—¥æœ¬è¯ã€‚â€</p><p>åŒæ—¶ï¼Œå¥¹ä¹Ÿæ˜¯ä¸ªåŒé¢äººç‰©ï¼Œå¤–è¡¨é«˜å‚²ï¼Œå†…å¿ƒè‡ªå‘ï¼Œæœ‰ç€ä¸ä¸ºäººçŸ¥çš„çƒ¦æ¼ï¼Œå¯¹ç”Ÿæ´»å’Œå‘¨å›´çš„äº‹ç‰©æ¨¡æ£±ä¸¤å¯ã€‚</p><p>å¥¹ä¸åŒåœ¨å±‹æªä¸‹çš„å§å§çˆ±ä¸½ä»æ¥æ²¡æœ‰è¿‡æ¨è‡³å¿ƒè…¹åœ°è°ˆå¿ƒäº¤æ„ï¼Œä¹Ÿä»æ¥æ²¡æœ‰è¿‡ä¸€æ¬¡äº‰åµä¸çŸ›ç›¾ï¼Œå„è¿‡å„çš„çš„ç”Ÿæ´»ï¼Œå„è‡ªæ€æƒ³ã€‚</p><p>ä¹¦ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼š</p><blockquote><p>â€œäººäººéƒ½æœ‰ä¸åŒçš„æˆ˜åœºã€‚â€</p></blockquote><p>æˆ‘æƒ³ç›ä¸½å’Œçˆ±ä¸½å§å¦¹ä¿©äººä¾¿æ˜¯å¦‚æ­¤å„è‡ªé¢å¯¹ç€æˆ˜åœºç¡çƒŸã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image073c6c44e175599d.png" alt="" /></p><p>å§å§çˆ±ä¸½é•¿å¾—ç¾ä¸½åŠ¨äººï¼Œåˆä¸­ä¸Šç”µè§†èŠ‚ç›®ï¼Œå¤§å­¦è¯»è´µæ—å¤§å­¦ï¼Œåœ¨ä»–äººçœ¼é‡Œè¿™ä¾¿æ˜¯æ‰€è¯´çš„â€œåˆ«äººå®¶çš„å­©å­â€çš„æ ‡å‡†ã€‚</p><p>å¯æ˜¯åœ¨è¿™å…‰é²œäº®ä¸½çš„å¤–è¡¨ä¹‹ä¸‹ï¼Œå´æœ‰éš¾ä»¥è¨€è¯´çš„è‹¦æ¥šï¼šè¿‡æ•ç—‡ï¼Œè¯ç‰©ä¾èµ–ç—‡ï¼Œä»¥åŠä¸€äº›ä¸ä¾¿å¯¹äººæåŠçš„ä¸ªäººé—®é¢˜ã€‚</p><p>å„è‡ªçš„å†…å¿ƒæˆ˜äº‰ä¾¿æ˜¯å¦‚æ­¤ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„é»‘å¤œï¼Œè€Œåˆ«äººå´æ€»æ˜¯åªçœ‹è§å¥¹çš„å…‰èŠ’å››å°„çš„æ™´å¤©ã€‚è¯´ä¸å‡ºå£çš„ç§˜å¯†ï¼Œæ˜¯ä¸€åœºå‘é…µçš„æƒ…ç»ªï¼Œéšæ—¶ä¼šåœ¨é»‘å¤œé‡Œå´©æºƒç“¦è§£ã€‚</p><p>æ‰€ä»¥ï¼Œä¸äººæ´½è°ˆå’Œæ²Ÿé€šï¼Œæ¨å¿ƒç½®è…¹åœ°äº¤æµï¼Œæ‰æœ‰å¯èƒ½è·å¾—å†…å¿ƒçš„å®é™ã€‚</p><p>å¯å¤§å¤šæ•°çš„äººï¼ŒåŒ…æ‹¬ç›ä¸½å’Œçˆ±ä¸½ï¼Œéƒ½è‹¥æ— å…¶äº‹åœ°å°†å¿ƒäº‹æ©åŸ‹åœ¨å¿ƒåº•ï¼Œä»»ç”±æƒ…ç»ªæ³›æ»¥ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image6da25e190b0a7b6d.png" alt="" /></p><p>æœ€åï¼Œå§å§çˆ±ä¸½åœ¨è¿™åœºé»‘æš—ä¸­ï¼Œè¿›å…¥äº†é•¿è¾¾ä¸¤ä¸ªæœˆçš„æ— ä¼‘æ— æ­¢ã€æ— ç¼˜æ— æ•…åœ°â€œé•¿çœ â€ï¼Œå¥¹ç”¨é•¿çœ æ¥å¯¹æŠ—å¥¹çš„çƒ¦æ¼å¯¹æŠ—é‚£æ— å°½é»‘æš—ã€‚</p><p>é¢å¯¹å§å§æ— ä¼‘æ— æ­¢åœ°æ˜ç¡ï¼Œæ— æ³•å¿å—çš„ç›ä¸½ç¦»å¼€äº†å®¶ï¼Œå»é¤é¥®é¦†çœ‹ä¹¦æŠ½çƒŸï¼Œæ‰“å‘æ—¶é—´ï¼Œå¥¹ç”¨å½»å¤œä¸çœ æ¥æ’é£çƒ¦æ¼ï¼Œè¯•å›¾åœ¨è¿™ä¸€å¤œä¹‹æ—…ä¸­å¯»æ‰¾å¿ƒçµçš„å®‰æ…°ã€‚</p><p>ç›ä¸½åœ¨å’Œä¸ç†ã€èŸ‹èŸ€ç­‰äººä¸€èµ·æ•‘åŠ©ä¸­å›½å¥³å­©çš„è¿‡ç¨‹ä¸­ï¼Œæ¸æ¸åœ°å‘ä»–ä»¬è¯´å‡ºè‡ªå·±çš„å¿ƒäº‹ï¼Œæœ€ç»ˆè§£å¼€å¿ƒç»“ã€‚</p><p>åŸæ¥â€œæ¶â€åªæ˜¯å›°å¢ƒçš„ä¸€ç§å‡ºå£ï¼Œä»–ä»¬å¿ƒåº•å–„è‰¯å¹¶æ²¡æœ‰â€œæ¶â€ï¼Œåªæ˜¯å›°å¢ƒè®©â€œæ¶â€ç»™é€ƒå‡ºç‰¢ç¬¼è‚†è™é‚£äº›å¿ƒä¸­ç¡çƒŸæˆ˜åœºçš„äººä»¬ç½¢äº†ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image2a794954b44642fc.png" alt="" /></p><h2 id="2ã€æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å¼±ç‚¹">2ã€æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å¼±ç‚¹</h2><p>ç”Ÿæ´»ä¸­ï¼Œæœ‰å¤ªå¤šçš„äººï¼Œæˆ´ç€è™šä¼ªçš„é¢å…·ç”Ÿæ´»ï¼Œç”¨å¦å®šçš„è¯­æ°”æ‹’ç»ç€è‡ªå·±çš„æ‡¦å¼±ï¼Œä¼ªè£…è‡ªå·±å¿«ä¹å¹¸ç¦ï¼Œå´æŠŠæ‰€æœ‰çš„ç‹¼ç‹ˆéƒ½å‹æŠ‘åœ¨å¿ƒåº•ã€‚</p><p>è¿™ä¹ˆåšçš„ç»“æœï¼Œå¹¶ä¸èƒ½å¾—åˆ°æ•‘èµï¼Œåè€Œä¼šéƒéƒå¯¡æ¬¢ï¼Œæ›´æœ‰ç”šè€…ï¼Œè¿˜ä¼šæ‚£ä¸ŠæŠ‘éƒç—‡ã€‚</p><p>ç”Ÿæ´»å³ä½¿å†ä¸å®¹æ˜“ï¼Œä¹Ÿè¦åŸå¸‚çš„é¢å¯¹è‡ªå·±çš„å¿ƒï¼Œé¢å¯¹è‡ªå·±å†…å¿ƒé‚£ä»½å’†å“®æ€’å¼çš„å¦ä¸€é¢ï¼Œç„¶åæ‰¾åˆ°è§£å†³çš„åŠæ³•ã€‚</p><p>å”¯æœ‰å¦‚æ­¤ï¼Œæ‰èƒ½åœ¨é»‘å¤œé‡Œå¥‹åŠ›å‰è¡Œã€‚</p><p>åœ¨ä¹¦ä¸­ï¼Œä¸æ­¢çˆ±ä¸½ä¸ç›ä¸½å§å¦¹ä¿©ï¼Œç™¾å·è¡¨é¢ä¸Šè¿‡ç€æ³¢æ¾œä¸æƒŠçš„è§„å¾‹ç”Ÿæ´»ï¼Œå…¶å®ä»–åŠªåŠ›å‹æŠ‘è‡ªå·±çš„éœ€æ±‚ã€æ¬²æœ›ã€æƒ…ç»ªã€‚</p><p>åœ¨ä»–æŠŠé‚£ä¸ªå¥³å­©æ‰“å¾—éä½“é³ä¼¤å¹¶æ‹¿èµ°å¥¹çš„è¡£ç‰©æ—¶ï¼Œè¿™ä¸€é˜´æš—ä¸”ç–¯ç‹‚çš„è‡ªå·±è¿ä»–éƒ½ä¸è®¤è¯†äº†ï¼ŒåŸæ¥â€œé»‘æš—â€åˆ°æ¥ä¹‹æ—¶æ‰çœŸæ­£åœ°æ˜ç™½è‡ªå·±å†…å¿ƒçš„æ³¢æ¶›æ±¹æ¶Œã€‚</p><p>é‚£äº›ç§äººçš„æƒ…ç»ªæˆ–ç§˜å¯†å°±åƒæµ“éƒçš„é»‘å¤œï¼Œé€ä¸è¿›æ—¥å…‰ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image6968224526161673.png" alt="" /></p><p>æ˜¯å•Šï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„çƒ¦æ¼ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å¼±ç‚¹ã€‚</p><p>ä½†ç»†ç»†æ€æ¥ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥è¦æ­£ç¡®åœ°è®¤è¯†è‡ªå·±ï¼Œå¹¶ä¸åªæ˜¯å…‰æ˜çš„é‚£ä¸ªè‡ªå·±ï¼Œä¹Ÿåº”è¯¥æœ‰é»‘æš—ä¸‹çš„é‚£ä¸ªè‡ªå·±ã€‚</p><p>å½“æˆ‘ä»¬é¡¿æ‚Ÿäº†ä¸è‡ªå·±è¿ç”¨éæš´åŠ›æ²Ÿé€šäº¤æµå†…å¿ƒæ·±å¤„æ—¶ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå®³æ€•é»‘æš—çš„åˆ°æ¥ï¼Œä»è€Œå…·æœ‰è‡ªæˆ‘ç–—ä¼¤ï¼Œè‡ªæˆ‘è®¤çŸ¥çš„æ„å‘³ã€‚</p><p>è‹¥å› ä¸ºé€ƒé¿é»‘æš—ï¼Œè€Œä¸æ–­åœ°å˜æ¢è‡ªå·±çš„å·¥ä½œç”Ÿæ´»ç¯å¢ƒï¼Œå†…å¿ƒçš„ä¸å®‰ä¸å®³æ€•åœ¨é»‘å¤œæ¥ä¸´æ—¶å¼€å§‹å‘é…µï¼Œå¹³é™ä¹Ÿå°±æ¸è¡Œæ¸è¿œã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image280c55b663f4e829.png" alt="" /></p><h2 id="3ã€è¦å­¦ä¼šä¸è‡ªå·±å’Œè§£">3ã€è¦å­¦ä¼šä¸è‡ªå·±å’Œè§£</h2><p>åˆ˜è‹¥è‹±æ›¾è¯´è¿‡ï¼šâ€œäººè¿™ä¸€ç”Ÿç»ˆç©¶è¦å­¦ä¼šä¸è‡ªå·±å’Œè§£ã€‚â€</p><p>æˆ‘ä»¬èµ¢è¿‡äº†æ¼‚æ³Šï¼Œè·‘èµ¢çš„æ—¶é—´ï¼Œåˆ†è¾¨äº†é»‘ç™½ï¼Œä¹Ÿè¦å­¦ä¼šæ¥å—è¿™ä¸ªé»‘å¤œï¼Œè™½è¯´ç™½å¤©ä¹‹å…‰å²‚è¯´é»‘å¤œä¹‹æ·±ï¼Œä½†å½“å¤ªé˜³ç…§è€€æ—¶æ‰å«å…‰èŠ’ä¸‡ä¸ˆã€‚</p><p>æ¯ä¸ªäººï¼Œéƒ½ç‹¬è‡ªæ€€æœ‰å„ç§å„æ ·çš„çƒ¦æ¼ï¼Œæ— è¨€å‘»åŸï¼Œæ— æ³•é¡ºåˆ©å‰è¡Œéœ€è¦å¸®åŠ©ï¼Œéœ€è¦åƒç™½å¤©é‚£æ ·å…‰æ˜çš„ç…§è€€ã€‚</p><p>æ¯ä¸ªäººéƒ½å¹¶éæ— ç—…å‘»åŸï¼Œæ‘ä¸Šæ˜¥æ ‘çš„ç¬”æ³•æ¸…æ·¡è€Œåˆæµ“éƒï¼Œåœ¨ä»–çš„ç¬”ä¸‹ï¼Œæ¯ä¸€ä¸ªäººéƒ½ç”¨è‡ªå·±çš„ä¸€è¨€ä¸€è¡Œçš„çƒ¦æ¼ã€‚</p><p>æˆ–è®¸äººä¸äººä¹‹é—´çš„äº¤æµï¼Œå’Œè‡ªå·±ä¸å†…å¿ƒçš„äº¤æµï¼Œæ‰èƒ½ä»è¿™æ— å°½é»‘æš—ä¸­æ‰¾åˆ°ç¯ç«ï¼Œä¼šå‘ç°çˆ±ä¸æ¶å¹¶éå¯¹ç«‹ï¼›åªæ˜¯é»‘æš—è®©æ¶æœ‰äº†å‡ºå£ï¼Œä½†å¹¶ä¸å¦¨ç¢çˆ±çš„å­˜åœ¨ï¼Œäºæ˜¯è¡¨è¾¾æˆä¸ºäº†æ¸¡è¿‡é»‘æš—çš„èˆŸï¼Œå’Œè§£æˆä¸ºäº†æ¡¨ã€‚<p><p>åœ¨ä¹¦é‡Œï¼Œæ‘ä¸Šæ˜¥æ ‘ç«™åœ¨é«˜æ¡¥çš„è§’åº¦è¯´ï¼š</p><blockquote><p>â€œä¸€ä¸ªäººä¸€ç”Ÿä¸­åªè¦åšè¿‡ä¸€æ¬¡å­¤å„¿ï¼Œé‚£ä»–åˆ°æ­»éƒ½æ˜¯å­¤å„¿ã€‚â€</p></blockquote><p>äººç”Ÿå°±æ˜¯ä»ä»Šå¤©èµ°å‘æ˜å¤©ï¼Œæˆ‘ä»¬åªéœ€å¹³æ·¡åœ°æ´»ä¸‹å»ï¼Œæˆ‘ä»¬æ…¢æ…¢èµ°è·¯ï¼Œå¤šå¤šå–æ°´ã€‚</p><p>ä¹¦ä¸­çš„çˆ±ä¸½æœ€ç»ˆè¿˜æ˜¯æƒ³æ˜ç™½äº†ï¼Œå¥¹æŠ±ä½äº†èººåœ¨åºŠä¸Šé•¿çœ çš„å§å§ï¼Œå¥¹ä»¬ç›¸äº’ä¼ é€’èº«ä½“çš„æš–æ„ï¼Œå¥¹ä¹Ÿæ»¡æ€€ä¿¡å¿ƒåœ°ç­‰ç€å§å§çš„è‹é†’ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image55a75f07137432c3.png" alt="" /></p><p>åœ¨ä¹¦é‡Œï¼Œæœ‰è¿™ä¹ˆä¸€å¥è¯ï¼š</p><blockquote><p>â€œæ–°çš„ä¸€å¤©å·²ç»è¿«åœ¨çœ‰ç«ï¼Œè€Œæ—§çš„ä¸€å¤©å´æ‹–æ‹½ç€æ²‰é‡çš„è¡£è£¾æœ‰æœªç¦»å¼€ã€‚â€</p></blockquote><p>è¿™å¯¹åº”äº†ç°ä»£äººæ¯åˆ°æ™šä¸Šå°±æŠ‘éƒéš¾è¿‡çš„å¿ƒæ€ï¼Œæ˜¯å› ä¸ºæ—§çš„åŒ…è¢±é‡Œæƒ…ç»ªåœ¨æ³›æ»¥ï¼Œè¿‡å»çš„ä¼¤å®³å¦‚å½±éšå½¢ï¼Œåªèƒ½ä¼ªè£…åšå¼ºï¼Œç”¨åŠ›æŒ¤å‡ºç¬‘å®¹ï¼Œå…¶å®æ’•å¼€ä¼ªè£…ï¼Œè°éƒ½è¿‡å¾—ä¸å¿«ä¹ã€‚</p><p>æˆ–è®¸æ¯ä¸ªäººé‡åˆ°çš„çƒ¦æ¼å¹¶ä¸ä¸€æ ·ï¼Œä½†æˆ‘ä»¬éœ€è¦çš„æ˜¯ç›¸äº’å€¾è¿°ã€ç›¸äº’ç†è§£ã€ç›¸äº’å¸®åŠ©ï¼Œæ–°çš„ä¸€å¤©å°±è¦åˆ°æ¥ï¼Œæ— è®ºè¿‡å»çš„é»‘æš—å¤šä¹ˆä¸å ªï¼Œæˆ‘ä»¬ç»ˆå°†å†²ç ´é»‘æš—è¿æ¥å…‰æ˜ã€‚</p><p>äººç±»çš„åŒæ‰‹ä¸ºä½•ä¸ºåŒï¼Œå› ä¸ºä¸€åªæ‰‹æ¡ç°åœ¨å¦ä¸€åªæ‰‹æ¡æœªæ¥ï¼Œä»–ä»¬ç»ˆåœ¨é»æ˜åˆ°æ¥çš„é‚£ä¸€åˆ»å°†æ¸…æ™¨å´­æ–°çš„å…‰èŠ’ä»å®¹åœ°è†¨èƒ€å¼€ã€‚</p><p>æˆ‘ä»¬è‹¥è¿æ¥äº†é»‘æš—ï¼Œé‚£ä¾¿æ˜¯å…‰æ˜åˆ°æ¥å‰çš„é¢„å…†ã€‚</p>]]></content>
    
    
    <summary type="html">è§£å†³æˆé•¿çš„çƒ¦æ¼ï¼Œåªéœ€è¦åšå¯¹ä¸€ä»¶äº‹</summary>
    
    
    
    <category term="é˜…è¯»" scheme="https://www.hacp.top/categories/%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="ä¹¦ç±" scheme="https://www.hacp.top/tags/%E4%B9%A6%E7%B1%8D/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šäº‘è¾¹æœ‰ä¸ªå°å–éƒ¨ã€‹</title>
    <link href="https://www.hacp.top/posts/1.html"/>
    <id>https://www.hacp.top/posts/1.html</id>
    <published>2023-08-09T10:19:03.000Z</published>
    <updated>2023-08-09T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p><font size="4px"><b>å¯¼è¯» ğŸ“</b></font></p><p>å¼ å˜‰ä½³ä½œå“ã€Šäº‘è¾¹æœ‰ä¸ªå°å–éƒ¨ã€‹ã€‚äº‘è¾¹é•‡çš„åˆ˜åä¸‰ï¼Œä»å°ä¸å¼€å°å–éƒ¨çš„å¤–å©†ç‹èºèºç›¸ä¾ä¸ºå‘½ã€‚åˆ˜åä¸‰ï¼Œå„æ–¹é¢éƒ½å¾ˆå¹³å‡¡ï¼Œå¹¸è¿çš„æ˜¯ï¼Œåœ¨ä»–å¤±æ„çš„æ—¶å€™ï¼Œæ€»æœ‰åœ¨æ„ä»–çš„äººé™ªä¼´åœ¨èº«è¾¹ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image.png" alt="" /></p><p>æ€»æœ‰é‚£ä¹ˆä¸€äº›æ—¶åˆ»ï¼Œæˆ‘ä»¬çˆ±çš„äººä¼šä¸æˆ‘ä»¬ä¸è¾è€Œåˆ«ï¼Œçˆ±æˆ‘ä»¬çš„äººä¼šç¦»æˆ‘ä»¬è€Œå»ï¼Œäº’ç›¸é™ªä¼´çš„äººä¼šçªç„¶å¤±æ•£ã€‚</p><p>å†ç»ä¸–äº‹æ²§æ¡‘ï¼Œæ›¾ç»æ— æ•°æ¬¡æƒ³é€ƒç¦»çš„æ•…ä¹¡ï¼Œä¸ç®¡æœ€ç»ˆæ˜¯å¦é‡æ–°å›å»ï¼Œéƒ½ä¼šåœ¨äººç”Ÿä¸­ç•™ä¸‹ä¸å¯ç£¨ç­çš„å°è®°ã€‚</p><p>ã€Šäº‘è¾¹æœ‰ä¸ªå°å–éƒ¨ã€‹ï¼Œäº‘è¾¹é•‡çš„åˆ˜åä¸‰ï¼Œå„æ–¹é¢éƒ½å¾ˆå¹³å‡¡ï¼Œå¹¸è¿çš„æ˜¯ï¼Œåœ¨ä»–å¤±æ„çš„æ—¶å€™ï¼Œæ€»æœ‰åœ¨æ„ä»–çš„äººé™ªä¼´åœ¨èº«è¾¹ã€‚</p><p>åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œæ´»å¾—è½°è½°çƒˆçƒˆçš„äººç»ˆå½’æ˜¯æå°‘æ•°ï¼Œå¤§å¤šæ•°çš„äººï¼Œå¹³å‡¡å¦‚ä½ æˆ‘ï¼Œç®€ç®€å•å•çš„ç”Ÿæ´»ï¼Œä»å¹´å°‘æ—¶çš„å¥½å¥½å­¦ä¹ ï¼Œåˆ°åæ¥åŸ‹å¤´è‹¦è¯»è¿æˆ˜é«˜è€ƒï¼Œå†åˆ°åæ¥å‰Šå°–è„‘è¢‹èˆ¬åœ°æ‰¾å·¥ä½œï¼Œä¹‹ååˆå…¢å…¢ä¸šä¸šçš„æœä¹æ™šäº”ç”šè‡³å¼€å¯996çš„å·¥ä½œæ¨¡å¼ã€‚ä»æ ¡å›­æ—¶ä»£é‡åˆ°æ€¦ç„¶å¿ƒåŠ¨çš„äººï¼Œåˆ°åæ¥åœ¨æŒ£æ‰ã€çœ¼æ³ªå’Œç—›è‹¦ä¸­åˆ†å¼€ï¼Œæœ€åé‡åˆ°æºæ‰‹æ­¥å…¥å©šå§»çš„äººã€‚</p><p><b>æˆ‘ä»¬éƒ½å¾ˆå¹³å‡¡ï¼Œä½†å¹³å‡¡çš„ä½ æˆ‘ï¼Œèº«è¾¹ä¹Ÿä¼šæœ‰è¿™æ ·ä¸€ä¸ªäººï¼ŒTAä¹Ÿå¹³å‡¡ï¼Œä½†TAçŠ¹å¦‚æ˜äº®çš„å…‰ï¼Œæ¸©æš–ç€æˆ‘ä»¬å­¤ç‹¬çš„å¿ƒï¼Œä¹Ÿç…§äº®ç€æˆ‘ä»¬çš„äººç”Ÿã€‚å¹³å‡¡å¦‚ä½ æˆ‘ï¼Œä¹Ÿä¼šä¸ç»æ„é—´æˆä¸ºä¸€æŸå…‰ï¼Œæ¸©æš–ç€åˆ«äººï¼Œç…§äº®ç€åˆ«äººã€‚</b></p><p>çŠ¹å¦‚åˆ˜åä¸‰çš„å¤–å©†ç‹èºèºï¼ŒçŠ¹å¦‚åˆ˜åä¸‰ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image54f8458af0bb9e0a.png" alt="" /></p></div><h2 id="1ã€ç¬”è®°æœ¬çŸ¥é“ä¸€åˆ‡å¿ƒäº‹ã€‚">1ã€ç¬”è®°æœ¬çŸ¥é“ä¸€åˆ‡å¿ƒäº‹ã€‚</h2><p>åˆ˜åä¸‰ï¼Œåƒè®¸è®¸å¤šå¤šçš„å°é•‡é’å¹´ä¸€æ ·ï¼Œè®¡åˆ’å¥½å¥½å­¦ä¹ ï¼Œæ¸´æœ›ä¸Šæ¸…ååŒ—å¤§ï¼Œè¿œç¦»æ•…ä¹¡ï¼Œçœ‹çœ‹å¤§åŸå¸‚æ˜¯å¦çœŸçš„æ¯”é™¢å­é‡Œçš„æ¡ƒæ ‘è¿˜ç¾ï¼Œæƒ³å»å¤§åŸå¸‚å·¥ä½œç”Ÿæ´»ã€‚</p><p>å½“åŒé¾„äººéƒ½åœ¨å¨±ä¹ç©è€æ—¶ï¼Œåˆ˜åä¸‰è‡ªå¾‹åœ°æ²‰è¿·äºçŸ¥è¯†çš„ç‹å›½ã€‚</p><p>åˆ˜åä¸‰æœ‰ä¸ªç¬”è®°æœ¬ï¼Œè®°ä¸‹çš„éƒ½æ˜¯è‡ªå·±çš„è®¡åˆ’ã€‚</p><p>åˆ˜åä¸‰é¢„ä¹ å¤ä¹ è¡¥ä¹ ï¼ŒåŠªåŠ›å­¦ä¹ ï¼Œé«˜è€ƒåˆ†æ•°å¹¶æ²¡æœ‰å¦‚æ„¿ï¼Œåˆ˜åä¸‰æ˜ç™½äº†ï¼šå¾ˆå¤šäº‹æƒ…ï¼Œä¸æ˜¯ä»…é è®¡åˆ’ã€æ¯…åŠ›å°±èƒ½åšåˆ°ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image3034204124edaada.png" alt="" /></p><p>å¹´å°‘æ—¶ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªç¬”è®°æœ¬ï¼Œæˆ–æœ‰å½¢æˆ–æ— å½¢ï¼Œé‡Œé¢æ”¶è—ç€æ‰€æœ‰çš„å¿ƒäº‹ã€‚</p><p>èµ·åˆæ˜¯ä¸€é¡¹åˆä¸€é¡¹å¿…é¡»å®Œæˆçš„ä»»åŠ¡ï¼Œéšç€å®šä¸‹çš„ä»»åŠ¡è¶Šæ¥è¶Šéš¾ä»¥å®Œæˆï¼Œå°±å˜æˆäº†è‡ªå·±ä¸€ä¸ªåˆä¸€ä¸ªçš„æ„¿æœ›ï¼Œä¸æ˜¯æ‰€æœ‰çš„æ„¿æœ›éƒ½èƒ½å®ç°ï¼Œæˆ‘ä»¬æ¸æ¸æ¥å—äº†ç°å®ã€‚</p><p>æˆ‘ä»¥å‰ä¹Ÿè®¤ä¸ºï¼Œå†™ä¸‹çš„æ¯ä¸€é¡¹ç›®æ ‡éƒ½åº”è¯¥å®Œæˆï¼Œä¸è¾¾æ ‡çš„æ—¶å€™æ€»ä¼šæ²®ä¸§ã€è‡ªæˆ‘æ€€ç–‘ï¼Œåæ¥æ‰æ˜ç™½ï¼Œä¸èƒ½æ€»æ˜¯æ‰§ç€äºâ€œæ²¡æœ‰æ‰“é’©â€çš„äº‹é¡¹ï¼Œé‚£äº›â€œè¢«æ‰“é’©â€çš„äº‹é¡¹ï¼Œæ˜¯è‡ªå·±è¸è¸å®å®ä»˜å‡ºã€æ²¡æœ‰è™šåº¦æ—¶å…‰çš„è¯æ˜ï¼Œè½ç¬”å†™ä¸‹æ¯ä¸€ä¸ªç›®æ ‡çš„ç¬é—´éƒ½æ˜¯æå…¶éƒ‘é‡è®¤çœŸçš„ã€‚</p><p>ç¿»çœ‹ä¸€è·¯èµ°æ¥çš„è¯æ®ï¼Œé‚£äº›éƒ½æ˜¯è‡ªå·±ä¸€ä¸ªäººé»˜é»˜å¿å—çš„æ•‘èµã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image2ea225aeb42c7999.png" alt="" /></p><h2 id="2ã€æ²¡æœ‰æ”¾ä¸ä¸‹çš„äººã€‚">2ã€æ²¡æœ‰æ”¾ä¸ä¸‹çš„äººã€‚</h2><p>åˆ˜åä¸‰å¤§å­¦æ—¶å–œæ¬¢çš„å¥³ç”Ÿæ˜¯ç‰¡ä¸¹ã€‚åˆ˜åä¸‰æ˜ç™½çˆ±æƒ…å¿…é¡»ç»™äºˆï¼Œå¯ä»–èƒ½æ‹¿å¾—å‡ºæ‰‹çš„ï¼Œåªæœ‰å°šæœªåˆ°æ¥çš„æœªæ¥ã€‚</p><p>åˆ˜åä¸‰ä¸€ç›´è¢«è’™åœ¨é¼“é‡Œï¼Œå½“äº†ç‰¡ä¸¹ä¸¤å¹´æœ‰åæ— å®çš„ç”·æœ‹å‹ï¼Œç‰¡ä¸¹çœŸæ­£çš„ç”·å‹å¦æœ‰ä»–äººã€‚</p><p>å¤±å»çˆ±æƒ…ï¼Œåˆ˜åä¸‰å¶å°”è¿˜æ˜¯ä¼šæƒ³èµ·ç‰¡ä¸¹ã€‚åˆ˜åä¸‰æ˜ç™½çš„ï¼Œç‰¡ä¸¹ä¸çˆ±åˆ˜åä¸‰ã€‚</p><p>åˆ†å¼€åï¼Œåˆ˜åä¸‰å¾ˆå¤šæ¬¡æƒ³ç»™ç‰¡ä¸¹æ‰“ç”µè¯ï¼Œä½†éƒ½å¿ä½äº†ï¼Œæœ€åç»ˆäºæ‹¨é€šæ—¶æ‰çŸ¥æ˜¯ç©ºå·ã€‚</p><p>åˆ˜åä¸‰ææƒšæ—¶æƒ³ï¼Œä»–æ‹¼å°½å…¨åŠ›ï¼Œä¸è¿‡æ˜¯åœ¨é‡å¤ç­‰å¾…ï¼Œä»–æœ¬å¯ä»¥å‘ç°å¥¹å¹¶ä¸çˆ±ä»–çš„äº‹å®ï¼Œç­‰å¾…ä¸èƒ½ç§°ä½œåŠªåŠ›ã€‚</p><p>åˆ˜åä¸‰ç”±å§‹è‡³ç»ˆæ²¡æœ‰åŸ‹æ€¨è¿‡ç‰¡ä¸¹ã€‚æœ‰ä¸€å¤©ï¼Œåˆ˜åä¸‰çªç„¶å‘ç°ï¼Œè‡ªå·±å·²ç»ä¸çŸ¥ä¸Šæ¬¡æƒ³å¿µç‰¡ä¸¹æ˜¯ä»€ä¹ˆæ—¶å€™äº†ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image9930ee262d7aefc0.png" alt="" /></p><p>â€œæ‰¾ä¸€ä¸ªçˆ±ä½ çš„äººç»“å©šï¼Œå¹¸ç¦ç”Ÿæ´»â€æ˜¯å¤šå°‘äººçš„æ†§æ†¬ã€‚åœ¨ä¸€æ— æ‰€æœ‰çš„å¹´çºªï¼Œé‡ä¸Šäº†ä»¥ä¸ºå¯ä»¥æºæ‰‹ä¸€ç”Ÿçš„äººï¼Œè€Œé‚£ä¸ªä½ æ„¿æ„ä¸ºå…¶å€¾å°½å…¨åŠ›ã€ä»˜å‡ºæ‰€æœ‰çš„äººï¼Œæœ€ç»ˆè¿˜æ˜¯ä¸ä½ åˆ†å¼€äº†ã€‚</p><p>è¿‡æ¥äººä¼šå‘Šè¯‰ä½ ï¼šçˆ±æƒ…ç»ˆç©¶æ•Œä¸è¿‡ç°å®ã€‚å¯æˆ‘æ€»è®¤ä¸ºï¼Œ<b>åƒä¸‡ä¸ªåˆ†å¼€çš„ç†ç”±ï¼Œå½’æ ¹åˆ°åº•éƒ½æ˜¯å› ä¸ºä¸å¤Ÿçˆ±ï¼Œâ€œç°å®â€ä¸è¿‡æ˜¯â€œä¸å¤Ÿçˆ±â€çš„ä¸€ä¸ªè¡¨é¢ã€‚</b></p><p>ä½ è¯´ä½ è¦å»è¿½æ±‚æ¢¦æƒ³äº†ï¼Œæˆ–è®¸çŒ´å¹´é©¬æœˆéƒ½ä¸å¯èƒ½åŠŸæˆåå°±ï¼Œä½ è®©å¯¹æ–¹ä¸è¦ç­‰äº†ï¼Œä½ æ€•è€½è¯¯å¯¹æ–¹çš„å¤§å¥½å‰ç¨‹ï¼Œå¯æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¯¹æ–¹çš„æ¢¦æƒ³é‡Œé¢ï¼Œæ°æ°å°±åŒ…å«äº†ä½ ã€‚</p><p>ä½ è¯´ä½ ä¸å¤Ÿä¼˜ç§€ï¼Œç»™ä¸äº†å¯¹æ–¹æƒ³è¦çš„ç”Ÿæ´»ï¼Œå¯¹æ–¹å¦‚ä½ æ‰€æ„¿å’Œä½ åˆ†æ‰‹äº†ï¼Œä½ æƒ³æœç„¶åˆæ˜¯ä¸€ä¸ªç°å®çš„äººï¼Œå¯æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¯¹æ–¹æ—©å°±å‡†å¤‡å¥½å¹¶è‚©ä½œæˆ˜ï¼Œæ˜¯ä½ è‡ªæˆ‘æ”¾å¼ƒçš„æ€åº¦ï¼Œä»¤å¯¹æ–¹ä¸€æ¬¡åˆä¸€æ¬¡æ„Ÿåˆ°å¤±æœ›ã€‚</p><p>ä½ è¯´ä½ è¦æ±‚ä¸å¤šï¼Œç„¶è€Œä½ æ€»æ˜¯ä¸ºå¯¹æ–¹å¶å°”çš„å¿½ç•¥æ„Ÿåˆ°ä¸æ»¡æ„ï¼Œå¯æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¯¹æ–¹å·²ç»åœ¨è‡ªå·±çš„èƒ½åŠ›èŒƒå›´å†…ï¼Œå°½åŠ›åšåˆ°æœ€å¥½äº†ã€‚</p><p><b>å¹¸å¥½ï¼Œåˆ†æ‰‹æ—¶çš„ç—›å½»å¿ƒæ‰‰ï¼Œæœ€ç»ˆä¼šè¢«æ—¶é—´æ…¢æ…¢æ²»æ„ˆï¼Œæ²¡æœ‰æ”¾ä¸ä¸‹çš„äººã€‚ç¼“ç¼“è·³åŠ¨çš„å¿ƒï¼Œæ²¡æœ‰æ­»ï¼Œå´ä¸å†è½»æ˜“å¿ƒåŠ¨äº†ï¼Œä¸æ˜¯å› ä¸ºä¸å†ç›¸ä¿¡çˆ±æƒ…ï¼Œè€Œæ˜¯æ›´åŠ æ¸…æ¥šè‡ªå·±æƒ³è¦çš„æ˜¯ä»€ä¹ˆæ ·çš„çˆ±æƒ…ã€‚</b></p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image391c255f1a6d2e61.png" alt="" /></p><h2 id="3ã€ä½ å†æ™®é€šï¼Œä¹Ÿæœ‰äººçˆ±ä½ ã€‚">3ã€ä½ å†æ™®é€šï¼Œä¹Ÿæœ‰äººçˆ±ä½ ã€‚</h2><blockquote><p>èˆå‹æ™ºå“¥å¯¹åˆ˜åä¸‰çš„å°è±¡ï¼šâ€œæ™ºå“¥è§‰å¾—æ­¤äººè™½ç„¶æ— èŠï¼Œä½†è„¾æ°”ç”šå¥½ã€‚åé¢ä¸€é¡¹ä¼˜ç‚¹éšç€ç†Ÿæ‚‰å˜æˆäº†ç¼ºç‚¹ï¼Œç°åœ¨æƒ³æ¥ï¼Œå¦‚æœæƒ³è¦è¿™æ ·çš„æœ‹å‹ï¼Œåªè¦åˆ°å¤©æ¡¥å¾€ä¸‹æœ›ï¼Œè¡Œèµ°çš„å…¨æ˜¯åˆ˜åä¸‰ã€‚â€</p></blockquote><p>åˆ˜åä¸‰å¤§å­¦è¡¥è€ƒã€é‡ä¿®éƒ½å¤±è´¥ï¼Œå¯¼å¸ˆå¸®ä»–äº‰å–å­¦ä½è¯ï¼Œåƒè¾›ä¸‡è‹¦æ€»ç®—æ¯•ä¸šäº†ã€‚</p><p>åˆ˜åä¸‰æ‰¾åˆ°äº†ä¸€ä»½å–ä¿é™©çš„å·¥ä½œï¼Œè¯•ç”¨æœŸä¸€äº‹æ— æˆï¼Œä¸šç»©å•ç»å¸¸å€’æ•°ç¬¬ä¸€ã€‚</p><p>åˆ˜åä¸‰ä¸æƒ³è®©å•ä½é¢†å¯¼å’ŒåŒäº‹å†·å˜²çƒ­è®½ï¼Œä¿¡èª“æ—¦æ—¦ç«‹ä¸‹äº†å–å‡ºä¸€åƒé›¶ä¸€å¼ ä¿å•çš„ç›®æ ‡ã€‚</p><p>ç¨‹éœœï¼Œå°å­¦å››å¹´çº§æ—¶åœ¨äº‘è¾¹é•‡ç¬¬ä¸€æ¬¡å’Œåˆ˜åä¸‰ç›¸é‡ï¼Œä¸€ä¸ªå¾—ç—…éšæ—¶ä¼šæ­»å»çš„å¥³å­©ã€‚</p><p>åœ¨åˆ˜åä¸‰å¤±æ‹æ—¶é‡é€¢ï¼Œé¼“åŠ±åˆ˜åä¸‰ï¼Œä¸åˆ˜åä¸‰ç»“ä¼´æ‰“è½¦ä¸€ç™¾å…­åå…¬é‡Œå»æ‰¾ç‰¡ä¸¹ï¼›å¬åˆ°åˆ˜åä¸‰çš„ä¿å•ç›®æ ‡ï¼Œç¨‹éœœæ²¡æœ‰æ‰“å‡»ä»–è¿™æ˜¯ä¸€ä¸ªéš¾äºç™»å¤©çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å‡ºè°‹åˆ’ç­–ã€æ”¶é›†èµ„æ–™ã€æ•´ç†æƒ…æŠ¥ï¼Œå¸®åŠ©åˆ˜åä¸‰ä¸€æ­¥æ­¥å‘ä¸€åƒé›¶ä¸€å¼ ä¿å•é è¿‘<p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image968ef14f591da3d8.png" alt="" /></p><p>åœ¨ç¨‹éœœå¿ƒä¸­ï¼Œäº‘è¾¹é•‡æœ€å¥½çš„æ˜¯åˆ˜åä¸‰ï¼Œç«¥å¹´æ—¶ï¼Œæ€»æ˜¯ç»™â€œæ‰“åŠ«â€çš„å°ç¨‹éœœå¸¦ä¸œè¥¿ã€‚</p><p>å“ªæ€•åˆ˜åä¸‰â€œåˆæ‡’ï¼Œåˆå‚»ï¼Œè„¾æ°”æ€ªï¼Œè¯´è¯éš¾å¬ï¼Œå¿ƒè‚ è½¯ï¼Œè…¿çŸ­ï¼Œæ²¡é­„åŠ›ï¼Œä¹Ÿå°±ä½œæ–‡å†™å¾—å¥½ç‚¹ï¼ŒåœŸäº†å·´å½â€ï¼Œå¯â€œè¿™ä¹ˆå·®åŠ²ï¼Œä¸€æ— æ˜¯å¤„â€çš„åˆ˜åä¸‰ï¼Œç¨‹éœœå°±æ˜¯å–œæ¬¢ã€‚</p><blockquote><p>ç¨‹éœœæœ€åç•™ç»™åˆ˜åä¸‰å‡ è¡Œå­—ï¼šâ€œç”Ÿå‘½æ˜¯æœ‰å…‰çš„ã€‚åœ¨æˆ‘ç†„ç­ä»¥å‰ï¼Œèƒ½å¤Ÿç…§äº®ä½ ä¸€ç‚¹ï¼Œå°±æ˜¯æˆ‘æ‰€æœ‰èƒ½åšçš„äº†ã€‚æˆ‘çˆ±ä½ ï¼Œä½ è¦è®°å¾—æˆ‘ã€‚â€</p></blockquote><p>å¤©èµ‹å¼‚ç¦€çš„å¹»æƒ³ï¼Œæ¯ä¸ªäººéƒ½æœ‰è¿‡ï¼›ä¸€é¸£æƒŠäººã€ç¾¡ç…æ—äººçš„ç¾æ¢¦ï¼Œæ¯ä¸ªäººéƒ½æœ‰è¿‡ã€‚å¤§å®¶éƒ½æƒ³æˆä¸ºå¤©æ‰ï¼Œæˆä¸ºä¸¾ä¸–æ— åŒçš„å­˜åœ¨ã€‚</p><p>äº‹å®æ˜¯ï¼ŒåŸ‹è—åœ¨å¿ƒé‡Œçš„è‡ªå‘ï¼Œæ—¶ä¸æ—¶å°±ä¼šå‡ºç°ï¼šè¿™ä¹ˆæ™®é€šçš„æˆ‘ï¼ŒçœŸçš„æœ‰äººä¼šå‘è‡ªå†…å¿ƒçˆ±æˆ‘å—ï¼Ÿ</p><p>ä¸»è§’æ°¸è¿œåªæœ‰ä¸€ä¸ªï¼Œä½†ä»æ¥æ²¡æœ‰ä¸€ä¸ªå‰§æœ¬ï¼Œèƒ½å°‘å¾—äº†é…è§’ã€‚ä½ å†æ™®é€šï¼Œä¹Ÿæœ‰äººçˆ±ä½ ã€‚ä½ å†æ™®é€šï¼Œä¹Ÿå€¼å¾—è¢«çˆ±ã€‚å¦‚æœä½ æ„Ÿå—ä¸åˆ°è¢«çˆ±ï¼Œå¯èƒ½åªæ˜¯å› ä¸ºä½ æœªæ›¾å¯Ÿè§‰ï¼Œé‚£äº›éšè—çš„çˆ±ã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/imagee4003ca21dcffc5c.png" alt="" /></p><h2 id="4ã€æ°¸è¿œçš„å±±ï¼Œæ°¸è¿œçš„æµ·ã€‚">4ã€æ°¸è¿œçš„å±±ï¼Œæ°¸è¿œçš„æµ·ã€‚</h2><p>åˆ˜åä¸‰åŸæœ¬å¸Œæœ›å¤§å­¦æ¯•ä¸šåï¼Œè¯´æœå¤–å©†ç‹èºèºç›˜æ‰é“ºå­ï¼Œä»–åˆ°å¤§åŸå¸‚ä»˜ä¸ªé¦–ä»˜ï¼Œæ¯å¤©å¸¦ç‹èºèºåƒé¸¡è›‹çŒé¥¼ï¼Œè®©ç‹èºèºä½¿ç”¨ç”µåŠ¨éº»å°†æ¡Œã€‚</p><p>å¾—çŸ¥åˆ˜åä¸‰å¤±æ‹å¤±ä¸šæ‚²ä¼¤è‡³æï¼Œä¸ƒåå²çš„ç‹èºèºï¼Œè·‘åˆ°åˆ˜åä¸‰çš„åŸå¸‚ï¼ŒçŒé†‰åˆ˜åä¸‰ï¼Œä¸€æ¥ä¸€å»ä¸¤ç™¾å…¬é‡Œï¼Œå¼€ç€æ‹–æ‹‰æœºï¼Œå°†ä¸ƒå…«åæ–¤çš„è¡Œæå’Œä¸€ç™¾ä¸‰çš„åˆ˜åä¸‰ï¼Œæ‹–å›äº†äº‘è¾¹é•‡ã€‚</p><p>é¢ ç°¸ä¸€è·¯ï¼Œå–é†‰çš„åˆ˜åä¸‰ä¸€ç›´åï¼Œç‹èºèºæ—¶ä¸æ—¶ä¸‹è½¦æ›¿ä»–æ“¦ã€‚â€œè‰°éš¾ï¼Œè¾›è‹¦ã€‚â€ç‹èºèºçš„è‡ªæˆ‘æ„Ÿæ…¨ï¼Œä¸è¿‡æ˜¯å¿ƒç–¼è‡ªå·±çš„å¤–å­™ã€‚</p><p><img src="https://tuchuang.voooe.cn/image/z8eKehttps://tuchuang.voooe.cn/image/z8vag" alt="" /></p><p>é¢å¯¹é•‡é‡Œä¸‰å§‘å…­å©†çš„ç›˜é—®ï¼Œç‹èºèºçœ‰é£è‰²èˆï¼ŒæŠŠåˆ˜åä¸‰å¡‘é€ æˆå¤§åŸå¸‚ç²¾è‹±çš„å½¢è±¡ã€‚</p><p>åˆ˜åä¸‰æ‰§æ„è¦é‡å›åŸå¸‚ï¼Œç‹èºèºè¯´å‡ºäº†å¿ƒé‡Œè¯ï¼šâ€œä»å°åˆ°å¤§ï¼Œä½ éƒ½è¦å»åŸé‡Œï¼Œæˆ‘ä¹Ÿæ²¡æ‹¦ç€ï¼Œä½†ä½ æ€»å¾—è®©æˆ‘æ”¾å¿ƒå•Šâ€¦â€¦â€</p><p>ç‹èºèºå¨è‰ºäº†å¾—ï¼Œç»å¸¸åšè®¸å¤šå¥½åƒçš„ï¼šè±‡è±†ç‚’è‚‰ä¸ã€æœˆé¥¼ã€çº¢çƒ§é²«é±¼ã€è¹„é«ˆçƒ§é¢ç­‹ã€ä¸Šæ±¤è‹‹èœã€å®«ä¿è™¾çƒã€è‘±æ²¹è›å­ã€å†¬ç“œæ’éª¨æ±¤â€¦â€¦åˆ˜åä¸‰ä»¥å‰ä¸Šå­¦æ—¶ï¼Œåƒæ³¡é¢çš„æ—¶å€™ï¼Œå°±ä¼šæ”¾ä¸€ä¸ªç‹èºèºå‡†å¤‡çš„è›‹é¥ºã€‚</p><blockquote><p>åˆ˜åä¸‰è®¤ä¸ºè‡ªå·±æ´»å¾—å¾ˆæ²¡æ„ä¹‰ï¼Œæƒ³åˆ°çš„éƒ½å¾—ä¸åˆ°ï¼Œç‹èºèºä¹‰æ­£è¾ä¸¥ï¼šâ€œä½ æ€ä¹ˆèƒ½ä¹±æƒ³ï¼å››è‚¢å¥å…¨ï¼Œå—è¿‡æ•™è‚²ï¼Œæˆ‘ä»¬å®¶åˆä¸æ˜¯ç©·åˆ°åƒä¸ä¸Šé¥­ï¼Œæ€ä¹ˆèƒ½è¯´æ­»å­—ï¼Ÿå¹´è½»çš„æ—¶å€™å°±è¦èµ°å¾—è¿œè¿œçš„ï¼Œåƒå¥½å¤šè‹¦ï¼Œä½ æ€•ä»€ä¹ˆï¼å®¶é‡Œæœ‰äººï¼Œæˆ‘è€å¤ªå©†åœ¨ï¼Œä½ å°±æœ‰å®¶çš„ï¼Œé—¯å¾—å‡ºå»ï¼Œå›å¾—äº†å®¶ï¼Œæ‰æ˜¯ç¡¬é‚¦é‚¦çš„æ´»æ³•ï¼â€</p></blockquote><p>ç”Ÿè€ç—…æ­»ï¼Œå¤–å©†è¿˜æ˜¯ç¦»åˆ˜åä¸‰è€Œå»äº†ï¼Œæœ€åå¯¹åˆ˜åä¸‰è¯´çš„è¯éƒ½ç•™åœ¨å½•éŸ³ç¬”é‡Œã€‚</p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image75a480e8b61cfdac.png" alt="" /></p><p>åˆ˜åä¸‰çš„æˆé•¿ç¦»ä¸å¼€å¤–å©†çš„å…³æ€€ä¸ç–¼çˆ±ï¼Œå°½ç®¡åˆ˜åä¸‰è¿˜æ¥ä¸åŠç»™å¤–å©†å°½å­å¿ƒï¼Œå¤–å©†å°±å·²ç¦»å»ï¼Œå¯åˆ˜åä¸‰ä¹Ÿä¸€ç›´æ˜¯å¤–å©†æ´»ç€çš„å¸Œæœ›å•Šã€‚</p><p>å¦‚æœè¯´å¤–å©†æ˜¯åˆ˜åä¸‰æ°¸è¿œçš„é å±±ï¼Œé‚£ä¹ˆåˆ˜åä¸‰å°±æ˜¯å¤–å©†å¿ƒé‡Œæ°¸è¿œç‰µæŒ‚çš„æµ·ã€‚</p><p>åˆ˜åä¸‰å’Œå¤–å©†ï¼Œå½¼æ­¤éƒ½æ˜¯å½¼æ­¤çš„æ›™å…‰ã€‚</p><p><b>æˆé•¿å°±æ˜¯ä¸€ä¸ªé€æ¸å¤±å»ã€é€æ¸å‘Šåˆ«çš„è¿‡ç¨‹ï¼Œé‚£äº›æ›¾ç»ä»¥ä¸ºè¿‡ä¸å»çš„åå„¿ï¼Œæ—¥åé‡æ–°è¯´èµ·ï¼Œä¸è¿‡æ˜¯è½»ææ·¡å†™çš„ä¸¤ä¸‰å¥ã€‚</b></p><p><b>å¹³å‡¡å¦‚ä½ æˆ‘ï¼Œåœ¨ä¸çŸ¥ä¸è§‰çš„æŸä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬çš„å­˜åœ¨ï¼Œçªç„¶å°±ç…§äº®äº†å¦ä¸€ä¸ªäººçš„ç”Ÿæ´»ï¼Œå› ä¸ºæ‚²ä¼¤ä¸èƒ½åŸ‹æ²¡å¸Œæœ›ã€‚</b></p><p><img src="https://tuchuang.voooe.cn/images/2024/05/08/image54ab2177a076ac4f.png" alt="" /></p>]]></content>
    
    
    <summary type="html">å¹³å‡¡å¦‚ä½ æˆ‘ï¼Œä¹Ÿç»ˆä¼šç…§äº®åˆ«äººçš„äººç”Ÿ</summary>
    
    
    
    <category term="é˜…è¯»" scheme="https://www.hacp.top/categories/%E9%98%85%E8%AF%BB/"/>
    
    
    <category term="ä¹¦ç±" scheme="https://www.hacp.top/tags/%E4%B9%A6%E7%B1%8D/"/>
    
  </entry>
  
  <entry>
    <title>Web Share API</title>
    <link href="https://www.hacp.top/posts/52.html"/>
    <id>https://www.hacp.top/posts/52.html</id>
    <published>2023-07-20T10:19:03.000Z</published>
    <updated>2023-07-20T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Web Share API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="æ¦‚è¿°">æ¦‚è¿° <a href="about:blank#%E6%A6%82%E8%BF%B0">#</a></h2><p>ç½‘é¡µå†…å®¹å¦‚æœè¦åˆ†äº«åˆ°å…¶ä»–åº”ç”¨ï¼Œé€šå¸¸è¦è‡ªå·±å®ç°åˆ†äº«æ¥å£ï¼Œé€ä¸€ç»™å‡ºç›®æ ‡åº”ç”¨çš„è¿æ¥æ–¹å¼ã€‚è¿™æ ·å¾ˆéº»çƒ¦ï¼Œä¹Ÿå¯¹ç½‘é¡µæ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚Web Share API å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºçš„ï¼Œå…è®¸ç½‘é¡µè°ƒç”¨æ“ä½œç³»ç»Ÿçš„åˆ†äº«æ¥å£ï¼Œå®è´¨æ˜¯ Web App ä¸æœ¬æœºçš„åº”ç”¨ç¨‹åºäº¤æ¢ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚</p><p>è¿™ä¸ª API ä¸ä»…å¯ä»¥æ”¹å–„ç½‘é¡µæ€§èƒ½ï¼Œè€Œä¸”ä¸é™åˆ¶åˆ†äº«ç›®æ ‡çš„æ•°é‡å’Œç±»å‹ã€‚ç¤¾äº¤åª’ä½“åº”ç”¨ã€ç”µå­é‚®ä»¶ã€å³æ—¶æ¶ˆæ¯ã€ä»¥åŠæœ¬åœ°ç³»ç»Ÿå®‰è£…çš„ã€ä¸”æ¥å—åˆ†äº«çš„åº”ç”¨ï¼Œéƒ½ä¼šå‡ºç°åœ¨ç³»ç»Ÿçš„åˆ†äº«å¼¹çª—ï¼Œè¿™å¯¹æ‰‹æœºç½‘é¡µå°¤å…¶æœ‰ç”¨ã€‚å¦å¤–ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£åªéœ€è¦ä¸€ä¸ªåˆ†äº«æŒ‰é’®ï¼Œè€Œä¼ ç»Ÿçš„ç½‘é¡µåˆ†äº«æœ‰å¤šä¸ªåˆ†äº«ç›®æ ‡ï¼Œå°±æœ‰å¤šå°‘ä¸ªåˆ†äº«æŒ‰é’®ã€‚</p><p>ç›®å‰ï¼Œæ¡Œé¢çš„ Safari æµè§ˆå™¨ï¼Œæ‰‹æœºçš„å®‰å“ Chrome æµè§ˆå™¨å’Œ iOS Safari æµè§ˆå™¨ï¼Œæ”¯æŒè¿™ä¸ª APIã€‚</p><p>è¿™ä¸ª API è¦æ±‚ç½‘ç«™å¿…é¡»å¯ç”¨ HTTPS åè®®ï¼Œä½†æ˜¯æœ¬åœ° Localhost å¼€å‘å¯ä»¥ä½¿ç”¨ HTTP åè®®ã€‚å¦å¤–ï¼Œè¿™ä¸ª API ä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œåªèƒ½ç”¨æ¥å“åº”ç”¨æˆ·çš„æ“ä½œï¼ˆæ¯”å¦‚<code>click</code>äº‹ä»¶ï¼‰ã€‚</p><h2 id="æ¥å£ç»†èŠ‚">æ¥å£ç»†èŠ‚ <a href="about:blank#%E6%8E%A5%E5%8F%A3%E7%BB%86%E8%8A%82">#</a></h2><p>è¯¥æ¥å£éƒ¨ç½²åœ¨<code>navigator.share</code>ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ£€æŸ¥æœ¬æœºæ˜¯å¦æ”¯æŒè¯¥æ¥å£ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (navigator.share) &#123;</span><br><span class="line">  <span class="comment">// æ”¯æŒ</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ä¸æ”¯æŒ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>navigator.share</code>æ˜¯ä¸€ä¸ªå‡½æ•°æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">navigator.<span class="title function_ invoke__">share</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;WebShare API Demo&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://codepen.io/ayoisaiah/pen/YbNazJ&#x27;</span>,</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&#x27;æˆ‘æ­£åœ¨çœ‹ã€ŠWeb Share APIã€‹&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®å¯¹è±¡æœ‰ä¸‰ä¸ªå±æ€§ï¼Œéƒ½æ˜¯å¯é€‰çš„ï¼Œä½†è‡³å°‘å¿…é¡»æŒ‡å®šä¸€ä¸ªã€‚</p><ul><li><code>title</code>ï¼šåˆ†äº«æ–‡æ¡£çš„æ ‡é¢˜ã€‚</li><li><code>url</code>ï¼šåˆ†äº«çš„ URLã€‚</li><li><code>text</code>ï¼šåˆ†äº«çš„å†…å®¹ã€‚</li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>url</code>æ˜¯å½“å‰ç½‘é¡µçš„ç½‘å€ï¼Œ<code>title</code>æ˜¯å½“å‰ç½‘é¡µçš„æ ‡é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•è·å–ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> title = <span class="built_in">document</span>.title;</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&#x27;link[rel=canonical]&#x27;</span>) ?</span><br><span class="line">  <span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&#x27;link[rel=canonical]&#x27;</span>).href :</span><br><span class="line">  <span class="built_in">document</span>.location.href;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>navigator.share</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¹‹åï¼Œä¼šç«‹åˆ»å¼¹å‡ºç³»ç»Ÿçš„åˆ†äº«å¼¹çª—ï¼Œç”¨æˆ·æ“ä½œå®Œæ¯•ä¹‹åï¼ŒPromise å¯¹è±¡å°±ä¼šå˜ä¸º<code>resolved</code>çŠ¶æ€ã€‚</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">navigator.share(&#123;</span><br><span class="line">  <span class="name">title</span>: <span class="string">&#x27;WebShare API Demo&#x27;</span>,</span><br><span class="line">  <span class="name">url</span>: <span class="string">&#x27;https://codepen.io/ayoisaiah/pen/YbNazJ&#x27;</span></span><br><span class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  console.log(<span class="string">&#x27;Thanks for sharing!&#x27;</span>);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">(<span class="built_in">error</span>)</span> =&gt;</span> &#123;</span><br><span class="line">  console.<span class="built_in">error</span>(<span class="string">&#x27;Sharing error&#x27;</span>, <span class="built_in">error</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”±äºè¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨<code>await</code>å‘½ä»¤ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">shareButton.addEventListener(<span class="string">&#x27;click&#x27;</span>, async () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    await navigator.share(&#123; <span class="attr">title</span>: <span class="string">&#x27;Example Page&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Data was shared successfully&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;Share failed:&#x27;</span>, err.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åˆ†äº«æ–‡ä»¶">åˆ†äº«æ–‡ä»¶ <a href="about:blank#%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6">#</a></h2><p>è¿™ä¸ª API è¿˜å¯ä»¥åˆ†äº«æ–‡ä»¶ï¼Œå…ˆä½¿ç”¨<code>navigator.canShare()</code>æ–¹æ³•ï¼Œåˆ¤æ–­ä¸€ä¸‹ç›®æ ‡æ–‡ä»¶æ˜¯å¦å¯ä»¥åˆ†äº«ã€‚å› ä¸ºä¸æ˜¯æ‰€æœ‰æ–‡ä»¶éƒ½å…è®¸åˆ†äº«çš„ï¼Œç›®å‰å›¾åƒï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘å’Œæ–‡æœ¬æ–‡ä»¶å¯ä»¥åˆ†äº«2ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">if</span> (navigator.canShare &amp;&amp; navigator.<span class="built_in">canShare</span>(&#123; <span class="attribute">files</span>: filesArray &#125;)) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>navigator.canShare()</code>æ–¹æ³•çš„å‚æ•°å¯¹è±¡ï¼Œå°±æ˜¯<code>navigator.share()</code>æ–¹æ³•çš„å‚æ•°å¯¹è±¡ã€‚è¿™é‡Œçš„å…³é”®æ˜¯<code>files</code>å±æ€§ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ª<code>FileList</code>å®ä¾‹å¯¹è±¡ã€‚</p><p><code>navigator.canShare()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœä¸º<code>true</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>navigator.share()</code>æ–¹æ³•åˆ†äº«æ–‡ä»¶äº†ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (navigator.canShare &amp;&amp; navigator.canShare(&#123; <span class="attr">files</span>: filesArray &#125;)) &#123;</span><br><span class="line">  navigator.share(&#123;</span><br><span class="line">    <span class="attr">files</span>: filesArray,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Vacation Pictures&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;Photos from September 27 to October 14.&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Share was successful.&#x27;</span>))</span><br><span class="line">  .<span class="keyword">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Sharing failed&#x27;</span>, error));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li><a href="https://css-tricks.com/how-to-use-the-web-share-api/">How to Use the Web Share API</a>, Ayooluwa Isaiah</li><li><a href="https://wicg.github.io/web-share/">Web Share API - Level 1</a>, W3C</li><li><a href="https://developers.google.com/web/updates/2016/09/navigator-share">Introducing the Web Share API</a>, Paul Kinlan, Sam Thorogood</li><li><a href="https://web.dev/web-share/">Share like a native app with the Web Share API</a>, Joe Medley</li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/web-share-api">https://wangdoc.com/webapi/web-share-api</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Web Share API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>WebSocket</title>
    <link href="https://www.hacp.top/posts/51.html"/>
    <id>https://www.hacp.top/posts/51.html</id>
    <published>2023-07-19T10:19:03.000Z</published>
    <updated>2023-07-19T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>WebSocket</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>WebSocket æ˜¯ä¸€ç§ç½‘ç»œé€šä¿¡åè®®ï¼Œå¾ˆå¤šé«˜çº§åŠŸèƒ½éƒ½éœ€è¦å®ƒã€‚</p><p>åˆæ¬¡æ¥è§¦ WebSocket çš„äººï¼Œéƒ½ä¼šé—®åŒæ ·çš„é—®é¢˜ï¼šæˆ‘ä»¬å·²ç»æœ‰äº† HTTP åè®®ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦å¦ä¸€ä¸ªåè®®ï¼Ÿå®ƒèƒ½å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>ç­”æ¡ˆå¾ˆç®€å•ï¼Œå› ä¸º HTTP åè®®æœ‰ä¸€ä¸ªç¼ºé™·ï¼šé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³äº†è§£ä»Šå¤©çš„å¤©æ°”ï¼Œåªèƒ½æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›æŸ¥è¯¢ç»“æœã€‚HTTP åè®®åšä¸åˆ°æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ã€‚HTTP åè®®çš„è¿™ç§å•å‘è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œæ³¨å®šäº†å¦‚æœæœåŠ¡å™¨æœ‰è¿ç»­çš„çŠ¶æ€å˜åŒ–ï¼Œå®¢æˆ·ç«¯è¦è·çŸ¥å°±éå¸¸éº»çƒ¦ã€‚æˆ‘ä»¬åªèƒ½ä½¿ç”¨â€œè½®è¯¢â€ï¼šæ¯éš”ä¸€æ®µæ—¶å€™ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯¢é—®ï¼Œäº†è§£æœåŠ¡å™¨æœ‰æ²¡æœ‰æ–°çš„ä¿¡æ¯ã€‚æœ€å…¸å‹çš„åœºæ™¯å°±æ˜¯èŠå¤©å®¤ã€‚</p><p>è½®è¯¢çš„æ•ˆç‡ä½ï¼Œéå¸¸æµªè´¹èµ„æºï¼ˆå› ä¸ºå¿…é¡»ä¸åœè¿æ¥ï¼Œæˆ–è€… HTTP è¿æ¥å§‹ç»ˆæ‰“å¼€ï¼‰ã€‚å› æ­¤ï¼Œå·¥ç¨‹å¸ˆä»¬ä¸€ç›´åœ¨æ€è€ƒï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚WebSocket å°±æ˜¯è¿™æ ·å‘æ˜çš„ã€‚</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>WebSocket åè®®åœ¨2008å¹´è¯ç”Ÿï¼Œ2011å¹´æˆä¸ºå›½é™…æ ‡å‡†ã€‚æ‰€æœ‰æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒäº†ã€‚</p><p>å®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œæ˜¯çœŸæ­£çš„åŒå‘å¹³ç­‰å¯¹è¯ï¼Œå±äºæœåŠ¡å™¨æ¨é€æŠ€æœ¯çš„ä¸€ç§ã€‚WebSocket å…è®¸æœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯è¿›è¡Œå…¨åŒå·¥ï¼ˆfull-duplexï¼‰çš„é€šä¿¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒHTTP åè®®æœ‰ç‚¹åƒå‘ç”µå­é‚®ä»¶ï¼Œå‘å‡ºåå¿…é¡»ç­‰å¾…å¯¹æ–¹å›ä¿¡ï¼›WebSocket åˆ™æ˜¯åƒæ‰“ç”µè¯ï¼ŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘å¯¹æ–¹å‘é€æ•°æ®ï¼Œå®ƒä»¬ä¹‹é—´å­˜ç€ä¸€æ¡æŒç»­æ‰“å¼€çš„æ•°æ®é€šé“ã€‚</p><p>å…¶ä»–ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><p>ï¼ˆ1ï¼‰å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡å™¨ç«¯çš„å®ç°æ¯”è¾ƒå®¹æ˜“ã€‚</p><p>ï¼ˆ2ï¼‰ä¸ HTTP åè®®æœ‰ç€è‰¯å¥½çš„å…¼å®¹æ€§ã€‚é»˜è®¤ç«¯å£ä¹Ÿæ˜¯80å’Œ443ï¼Œå¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ï¼Œå› æ­¤æ¡æ‰‹æ—¶ä¸å®¹æ˜“å±è”½ï¼Œèƒ½é€šè¿‡å„ç§ HTTP ä»£ç†æœåŠ¡å™¨ã€‚</p><p>ï¼ˆ3ï¼‰æ•°æ®æ ¼å¼æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆã€‚</p><p>ï¼ˆ4ï¼‰å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚</p><p>ï¼ˆ5ï¼‰æ²¡æœ‰åŒæºé™åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ä»»æ„æœåŠ¡å™¨é€šä¿¡ï¼Œå®Œå…¨å¯ä»¥å–ä»£ Ajaxã€‚</p><p>ï¼ˆ6ï¼‰åè®®æ ‡è¯†ç¬¦æ˜¯<code>ws</code>ï¼ˆå¦‚æœåŠ å¯†ï¼Œåˆ™ä¸º<code>wss</code>ï¼Œå¯¹åº” HTTPS åè®®ï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€å°±æ˜¯ URLã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ws:<span class="regexp">//</span>example.com:<span class="number">80</span><span class="regexp">/some/</span>path</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="WebSocket-æ¡æ‰‹">WebSocket æ¡æ‰‹ <a href="about:blank#websocket-%E6%8F%A1%E6%89%8B">#</a></h2><p>æµè§ˆå™¨å‘å‡ºçš„ WebSocket æ¡æ‰‹è¯·æ±‚ç±»ä¼¼äºä¸‹é¢çš„æ ·å­ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>websocket</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>example.com</span><br><span class="line"><span class="attribute">Origin</span><span class="punctuation">: </span>null</span><br><span class="line"><span class="attribute">Sec-WebSocket-Key</span><span class="punctuation">: </span>sN9cRrP/n9NdMgdcy2VJFQ==</span><br><span class="line"><span class="attribute">Sec-WebSocket-Version</span><span class="punctuation">: </span>13</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ª HTTP å¤´æ˜¯<code>Upgrade</code>ã€‚HTTP1.1 åè®®è§„å®šï¼Œ<code>Upgrade</code>å­—æ®µè¡¨ç¤ºå°†é€šä¿¡åè®®ä»<code>HTTP/1.1</code>è½¬å‘è¯¥å­—æ®µæŒ‡å®šçš„åè®®ã€‚<code>Connection</code>å­—æ®µè¡¨ç¤ºæµè§ˆå™¨é€šçŸ¥æœåŠ¡å™¨ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œå°±å‡çº§åˆ° WebSocket åè®®ã€‚<code>Origin</code>å­—æ®µç”¨äºæä¾›è¯·æ±‚å‘å‡ºçš„åŸŸåï¼Œä¾›æœåŠ¡å™¨éªŒè¯æ˜¯å¦è®¸å¯çš„èŒƒå›´å†…ï¼ˆæœåŠ¡å™¨ä¹Ÿå¯ä»¥ä¸éªŒè¯ï¼‰ã€‚<code>Sec-WebSocket-Key</code>åˆ™æ˜¯ç”¨äºæ¡æ‰‹åè®®çš„å¯†é’¥ï¼Œæ˜¯ Base64 ç¼–ç çš„16å­—èŠ‚éšæœºå­—ç¬¦ä¸²ã€‚</p><p>æœåŠ¡å™¨çš„ WebSocket å›åº”å¦‚ä¸‹ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">101</span> Switching Protocols</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>websocket</span><br><span class="line"><span class="attribute">Sec-WebSocket-Accept</span><span class="punctuation">: </span>fFBooB7FAkLlXgRSz0BT3v4hq5s=</span><br><span class="line"><span class="attribute">Sec-WebSocket-Origin</span><span class="punctuation">: </span>null</span><br><span class="line"><span class="attribute">Sec-WebSocket-Location</span><span class="punctuation">: </span>ws://example.com/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒæœåŠ¡å™¨åŒæ ·ç”¨<code>Connection</code>å­—æ®µé€šçŸ¥æµè§ˆå™¨ï¼Œéœ€è¦æ”¹å˜åè®®ã€‚<code>Sec-WebSocket-Accept</code>å­—æ®µæ˜¯æœåŠ¡å™¨åœ¨æµè§ˆå™¨æä¾›çš„<code>Sec-WebSocket-Key</code>å­—ç¬¦ä¸²åé¢ï¼Œæ·»åŠ  <a href="http://tools.ietf.org/html/rfc6455">RFC6456</a> æ ‡å‡†è§„å®šçš„â€œ258EAFA5-E914-47DA-95CA-C5AB0DC85B11â€å­—ç¬¦ä¸²ï¼Œç„¶åå†å– SHA-1 çš„å“ˆå¸Œå€¼ã€‚æµè§ˆå™¨å°†å¯¹è¿™ä¸ªå€¼è¿›è¡ŒéªŒè¯ï¼Œä»¥è¯æ˜ç¡®å®æ˜¯ç›®æ ‡æœåŠ¡å™¨å›åº”äº† WebSocket è¯·æ±‚ã€‚<code>Sec-WebSocket-Location</code>å­—æ®µè¡¨ç¤ºè¿›è¡Œé€šä¿¡çš„ WebSocket ç½‘å€ã€‚</p><p>å®Œæˆæ¡æ‰‹ä»¥åï¼ŒWebSocket åè®®å°±åœ¨ TCP åè®®ä¹‹ä¸Šï¼Œå¼€å§‹ä¼ é€æ•°æ®ã€‚</p><h2 id="å®¢æˆ·ç«¯çš„ç®€å•ç¤ºä¾‹">å®¢æˆ·ç«¯çš„ç®€å•ç¤ºä¾‹ <a href="about:blank#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B">#</a></h2><p>WebSocket çš„ç”¨æ³•ç›¸å½“ç®€å•ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç½‘é¡µè„šæœ¬çš„ä¾‹å­ï¼ŒåŸºæœ¬ä¸Šä¸€çœ¼å°±èƒ½æ˜ç™½ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&#x27;wss://echo.websocket.org&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ws.onopen = <span class="keyword">function</span>(<span class="params">evt</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Connection open ...&#x27;</span>);</span><br><span class="line">  ws.send(<span class="string">&#x27;Hello WebSockets!&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.onmessage = <span class="keyword">function</span>(<span class="params">evt</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Received Message: &#x27;</span> + evt.data);</span><br><span class="line">  ws.close();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.onclose = <span class="keyword">function</span>(<span class="params">evt</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Connection closed.&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯-API">å®¢æˆ·ç«¯ API <a href="about:blank#%E5%AE%A2%E6%88%B7%E7%AB%AF-api">#</a></h2><p>æµè§ˆå™¨å¯¹ WebSocket åè®®çš„å¤„ç†ï¼Œæ— éå°±æ˜¯ä¸‰ä»¶äº‹ã€‚</p><ul><li>å»ºç«‹è¿æ¥å’Œæ–­å¼€è¿æ¥</li><li>å‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®</li><li>å¤„ç†é”™è¯¯</li></ul><h3 id="æ„é€ å‡½æ•°-WebSocket">æ„é€ å‡½æ•° WebSocket <a href="about:blank#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-websocket">#</a></h3><p><code>WebSocket</code>å¯¹è±¡ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºæ–°å»º<code>WebSocket</code>å®ä¾‹ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> WebSocket(<span class="string">&#x27;ws://localhost:8080&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢è¯­å¥ä¹‹åï¼Œå®¢æˆ·ç«¯å°±ä¼šä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥ã€‚</p><h3 id="webSocket-readyState">webSocket.readyState <a href="about:blank#websocketreadystate">#</a></h3><p><code>readyState</code>å±æ€§è¿”å›å®ä¾‹å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œå…±æœ‰å››ç§ã€‚</p><ul><li>CONNECTINGï¼šå€¼ä¸º0ï¼Œè¡¨ç¤ºæ­£åœ¨è¿æ¥ã€‚</li><li>OPENï¼šå€¼ä¸º1ï¼Œè¡¨ç¤ºè¿æ¥æˆåŠŸï¼Œå¯ä»¥é€šä¿¡äº†ã€‚</li><li>CLOSINGï¼šå€¼ä¸º2ï¼Œè¡¨ç¤ºè¿æ¥æ­£åœ¨å…³é—­ã€‚</li><li>CLOSEDï¼šå€¼ä¸º3ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»å…³é—­ï¼Œæˆ–è€…æ‰“å¼€è¿æ¥å¤±è´¥ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (ws.readyState) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">WebSocket</span>.<span class="type">CONNECTING</span>:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">WebSocket</span>.<span class="type">OPEN</span>:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">WebSocket</span>.<span class="type">CLOSING</span>:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="type">WebSocket</span>.<span class="type">CLOSED</span>:</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">// this never happens</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-onopen">webSocket.onopen <a href="about:blank#websocketonopen">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>onopen</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šè¿æ¥æˆåŠŸåçš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ws.onopen = <span class="keyword">function</span> <span class="params">()</span> &#123;</span><br><span class="line">  ws.send(<span class="string">&#x27;Hello Server!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦æŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>addEventListener</code>æ–¹æ³•ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ws.addEventListener(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span> <span class="params">(event)</span> &#123;</span><br><span class="line">  ws.send(<span class="string">&#x27;Hello Server!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-onclose">webSocket.onclose <a href="about:blank#websocketonclose">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>onclose</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šè¿æ¥å…³é—­åçš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ws<span class="variable">.onclose</span> = <span class="keyword">function</span>(<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> code = <span class="keyword">event</span><span class="variable">.code</span>;</span><br><span class="line">  <span class="keyword">var</span> reason = <span class="keyword">event</span><span class="variable">.reason</span>;</span><br><span class="line">  <span class="keyword">var</span> wasClean = <span class="keyword">event</span><span class="variable">.wasClean</span>;</span><br><span class="line">  <span class="comment">// handle close event</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws<span class="variable">.addEventListener</span>(<span class="string">&quot;close&quot;</span>, <span class="keyword">function</span>(<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> code = <span class="keyword">event</span><span class="variable">.code</span>;</span><br><span class="line">  <span class="keyword">var</span> reason = <span class="keyword">event</span><span class="variable">.reason</span>;</span><br><span class="line">  <span class="keyword">var</span> wasClean = <span class="keyword">event</span><span class="variable">.wasClean</span>;</span><br><span class="line">  <span class="comment">// handle close event</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-onmessage">webSocket.onmessage <a href="about:blank#websocketonmessage">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>onmessage</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šæ”¶åˆ°æœåŠ¡å™¨æ•°æ®åçš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ws<span class="variable">.onmessage</span> = <span class="keyword">function</span>(<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">event</span><span class="variable">.data</span>;</span><br><span class="line">  <span class="comment">// å¤„ç†æ•°æ®</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws<span class="variable">.addEventListener</span>(<span class="string">&quot;message&quot;</span>, <span class="keyword">function</span>(<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">event</span><span class="variable">.data</span>;</span><br><span class="line">  <span class="comment">// å¤„ç†æ•°æ®</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒæœåŠ¡å™¨æ•°æ®å¯èƒ½æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼ˆ<code>blob</code>å¯¹è±¡æˆ–<code>Arraybuffer</code>å¯¹è±¡ï¼‰ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ws.onmessage = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">typeOf</span> event.data === String) &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;Received data string&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(event.data instanceof ArrayBuffer)&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">buffer</span> = event.data;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&quot;Received arraybuffer&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é™¤äº†åŠ¨æ€åˆ¤æ–­æ”¶åˆ°çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>binaryType</code>å±æ€§ï¼Œæ˜¾å¼æŒ‡å®šæ”¶åˆ°çš„äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// æ”¶åˆ°çš„æ˜¯ blob æ•°æ®</span><br><span class="line">ws.binaryType <span class="operator">=</span> <span class="string">&quot;blob&quot;</span><span class="comment">;</span></span><br><span class="line">ws.onmessage <span class="operator">=</span> function(e) &#123;</span><br><span class="line">  console.log(e.data.size)<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">// æ”¶åˆ°çš„æ˜¯ ArrayBuffer æ•°æ®</span><br><span class="line">ws.binaryType <span class="operator">=</span> <span class="string">&quot;arraybuffer&quot;</span><span class="comment">;</span></span><br><span class="line">ws.onmessage <span class="operator">=</span> function(e) &#123;</span><br><span class="line">  console.log(e.data.byteLength)<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-send">webSocket.send() <a href="about:blank#websocketsend">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>send()</code>æ–¹æ³•ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚</p><p>å‘é€æ–‡æœ¬çš„ä¾‹å­ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ws.<span class="built_in">send</span>(<span class="string">&#x27;your message&#x27;</span>)<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘é€ Blob å¯¹è±¡çš„ä¾‹å­ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">file</span> = document</span><br><span class="line">  .querySelector(&#x27;<span class="keyword">input</span>[<span class="keyword">type</span>=<span class="string">&quot;file&quot;</span>]&#x27;)</span><br><span class="line">  .files[0];</span><br><span class="line">ws.send(<span class="keyword">file</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘é€ ArrayBuffer å¯¹è±¡çš„ä¾‹å­ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sending canvas ImageData as ArrayBuffer</span></span><br><span class="line"><span class="keyword">var</span> img = canvas_context.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">320</span>);</span><br><span class="line"><span class="keyword">var</span> binary = <span class="keyword">new</span> Uint8Array(img.data.<span class="built_in">length</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; img.data.<span class="built_in">length</span>; i++) &#123;</span><br><span class="line">  binary[i] = img.data[i];</span><br><span class="line">&#125;</span><br><span class="line">ws.send(binary.<span class="built_in">buffer</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-bufferedAmount">webSocket.bufferedAmount <a href="about:blank#websocketbufferedamount">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>bufferedAmount</code>å±æ€§ï¼Œè¡¨ç¤ºè¿˜æœ‰å¤šå°‘å­—èŠ‚çš„äºŒè¿›åˆ¶æ•°æ®æ²¡æœ‰å‘é€å‡ºå»ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ¤æ–­å‘é€æ˜¯å¦ç»“æŸã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">var</span> <span class="built_in">data</span> = <span class="literal">new</span> ArrayBuffer(<span class="number">10000000</span>);</span><br><span class="line">socket.send(<span class="built_in">data</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (socket.bufferedAmount === <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// å‘é€å®Œæ¯•</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// å‘é€è¿˜æ²¡ç»“æŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="webSocket-onerror">webSocket.onerror <a href="about:blank#websocketonerror">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>onerror</code>å±æ€§ï¼Œç”¨äºæŒ‡å®šæŠ¥é”™æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">socket</span>.<span class="property">onerror</span> <span class="operator">=</span> <span class="title function_">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">socket</span>.<span class="property">addEventListener</span>(<span class="string">&quot;error&quot;</span>, <span class="title function_">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="WebSocket-æœåŠ¡å™¨">WebSocket æœåŠ¡å™¨ <a href="about:blank#websocket-%E6%9C%8D%E5%8A%A1%E5%99%A8">#</a></h2><p>WebSocket åè®®éœ€è¦æœåŠ¡å™¨æ”¯æŒã€‚å„ç§æœåŠ¡å™¨çš„å®ç°ï¼Œå¯ä»¥æŸ¥çœ‹ç»´åŸºç™¾ç§‘çš„<a href="https://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations">åˆ—è¡¨</a>ã€‚</p><p>å¸¸ç”¨çš„ Node å®ç°æœ‰ä»¥ä¸‹ä¸‰ç§ã€‚</p><ul><li><a href="https://github.com/uWebSockets/uWebSockets">ÂµWebSockets</a></li><li><a href="http://socket.io/">Socket.IO</a></li><li><a href="https://github.com/theturtle32/WebSocket-Node">WebSocket-Node</a></li></ul><p>å…·ä½“çš„ç”¨æ³•è¯·æŸ¥çœ‹å®ƒä»¬çš„æ–‡æ¡£ï¼Œæœ¬æ•™ç¨‹ä¸è¯¦ç»†ä»‹ç»äº†ã€‚</p><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li>Ryan Stewart, <a href="http://www.adobe.com/devnet/html5/articles/real-time-data-exchange-in-html5-with-websockets.html">Real-time data exchange in HTML5 with WebSockets</a></li><li>Malte Ubl &amp; Eiji Kitamuraï¼Œ<a href="https://www.html5rocks.com/en/tutorials/websockets/basics/">Introducing WebSockets: Bringing Sockets to the Web</a></li><li>Jack Lawson, <a href="http://buildnewgames.com/websockets/">WebSockets: A Guide</a></li><li>Michael W., <a href="http://codular.com/node-web-sockets">Starting with Node and Web Sockets</a></li><li>Jesse Cravens, <a href="http://tech.pro/tutorial/1167/introduction-to-websockets">Introduction to WebSockets</a></li><li>Matt West, <a href="http://blog.teamtreehouse.com/an-introduction-to-websockets">An Introduction to WebSockets</a></li><li>Maciej SopyÅ‚o, <a href="http://net.tutsplus.com/tutorials/javascript-ajax/node-js-better-performance-with-socket-io-and-dot/">Node.js: Better Performance With Socket.IO and doT</a></li><li>Jos Dirksen, <a href="http://www.smartjava.org/content/capture-canvas-and-webgl-output-video-using-websockets">Capture Canvas and WebGL output as video using websockets</a></li><li>Fionn Kellehe, <a href="https://nodesource.com/blog/understanding-socketio">Understanding Socket.IO</a></li><li><a href="http://cjihrig.com/blog/how-to-use-websockets/">How to Use WebSockets</a></li><li><a href="https://www.tutorialspoint.com/websockets/websockets_send_receive_messages.htm">WebSockets - Send &amp; Receive Messages</a></li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/websocket">https://wangdoc.com/webapi/websocket</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">WebSocket</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>URLSearchParams å¯¹è±¡</title>
    <link href="https://www.hacp.top/posts/50.html"/>
    <id>https://www.hacp.top/posts/50.html</id>
    <published>2023-07-18T10:19:03.000Z</published>
    <updated>2023-07-18T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>URLSearchParams å¯¹è±¡</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>URLSearchParams å¯¹è±¡è¡¨ç¤º URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚<code>?foo=bar</code>ï¼‰ã€‚å®ƒæä¾›ä¸€ç³»åˆ—æ–¹æ³•ï¼Œç”¨æ¥æ“ä½œè¿™äº›é”®å€¼å¯¹ã€‚URL å®ä¾‹å¯¹è±¡çš„<code>searchParams</code>å±æ€§ï¼Œå°±æ˜¯æŒ‡å‘ä¸€ä¸ª URLSearchParams å®ä¾‹å¯¹è±¡ã€‚</p><p>URLSearchParams å®ä¾‹å¯¹è±¡å¯ä»¥ç”¨<code>for...of</code>è¿›è¡Œéå†ã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [<span class="built_in">key</span>, value] of mySearchParams) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³• <a href="about:blank#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95">#</a></h2><p>URLSearchParams å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œç”Ÿæˆä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå°†å…¶è½¬æˆå¯¹åº”çš„å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå®ƒæœ€å¤šåªèƒ½å»é™¤æŸ¥è¯¢å­—ç¬¦ä¸²çš„å¼€å¤´é—®å·<code>?</code>ï¼Œå¹¶ä¸èƒ½è§£æå®Œæ•´çš„ç½‘å€å­—ç¬¦ä¸²ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const paramsString <span class="operator">=</span> <span class="string">&quot;http://example.com/search?query=%40&quot;</span><span class="comment">;</span></span><br><span class="line">const params <span class="operator">=</span> new URLSearchParams(paramsString)<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼ŒURLSearchParams ä¼šè®¤ä¸ºé”®åæ˜¯<code>http://example.com/search?query</code>ï¼Œè€Œä¸æ˜¯<code>query</code>ã€‚</p><p>å®ƒä¹Ÿå¯ä»¥æ¥å—è¡¨ç¤ºé”®å€¼å¯¹çš„å¯¹è±¡æˆ–æ•°ç»„ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> params3 = <span class="keyword">new</span> URLSearchParams([</span><br><span class="line">  [<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;1&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;bar&quot;</span>, <span class="string">&quot;2&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‚æ•°ä¸ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> params1 = <span class="keyword">new</span> URLSearchParams(&#123; foo: <span class="string">&quot;1&quot;</span>, bar: <span class="string">&quot;2&quot;</span> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¡¨å•æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ URLSearchParams å®ä¾‹ä½œä¸ºè¡¨å•æ•°æ®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(&#123;foo: <span class="number">1</span>, bar: <span class="number">2</span>&#125;);</span><br><span class="line">fetch(<span class="string">&#x27;https://example.com/api&#x27;</span>, &#123;</span><br><span class="line">  method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  body: <span class="keyword">params</span></span><br><span class="line">&#125;).then(...)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œfetch å‘æœåŠ¡å™¨å‘é€å‘½ä»¤æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ URLSearchParams å®ä¾‹å¯¹è±¡ä½œä¸ºæ•°æ®ä½“ã€‚</p><p>å®ƒè¿˜å¯ä»¥æ¥å—å¦ä¸€ä¸ª URLSearchParams å®ä¾‹å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç­‰äºå¤åˆ¶äº†è¯¥å¯¹è±¡ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params1 = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> params2 = <span class="keyword">new</span> URLSearchParams(params1);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>params1</code>å’Œ<code>params2</code>æ˜¯ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„å®ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªï¼Œä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚</p><p>URLSearchParamsä¼šå¯¹æŸ¥è¯¢å­—ç¬¦ä¸²è‡ªåŠ¨ç¼–ç ã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const params = new URLSearchParams(&#123;<span class="string">&#x27;foo&#x27;</span>: <span class="string">&#x27;ä½ å¥½&#x27;</span>&#125;);</span><br><span class="line">params.toString() // <span class="string">&quot;foo=<span class="variable">%E</span>4%BD<span class="variable">%A</span>0<span class="variable">%E</span>5<span class="variable">%A</span>5<span class="variable">%BD</span>&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>foo</code>çš„å€¼æ˜¯æ±‰å­—ï¼ŒURLSearchParams å¯¹å…¶è‡ªåŠ¨è¿›è¡Œ URL ç¼–ç ã€‚</p><p>é”®åå¯ä»¥æ²¡æœ‰é”®å€¼ï¼Œè¿™æ—¶ URLSearchParams ä¼šè®¤ä¸ºé”®å€¼ç­‰äºç©ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const params1 <span class="operator">=</span> new URLSearchParams(<span class="string">&quot;foo&amp;bar=baz&quot;</span>)<span class="comment">;</span></span><br><span class="line">const params2 <span class="operator">=</span> new URLSearchParams(<span class="string">&quot;foo=&amp;bar=baz&quot;</span>)<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>foo</code>æ˜¯ä¸€ä¸ªç©ºé”®åï¼Œä¸ç®¡å®ƒåé¢æœ‰æ²¡æœ‰ç­‰å·ï¼ŒURLSearchParams éƒ½ä¼šè®¤ä¸ºå®ƒçš„å€¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="append">append() <a href="about:blank#append">#</a></h3><p><code>append()</code>ç”¨æ¥æ·»åŠ ä¸€ä¸ªæŸ¥è¯¢é”®å€¼å¯¹ã€‚å¦‚æœåŒåçš„é”®å€¼å¯¹å·²ç»å­˜åœ¨ï¼Œå®ƒä¾ç„¶ä¼šå°†æ–°çš„é”®å€¼å¯¹æ·»åŠ åˆ°æŸ¥è¯¢å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚</p><p>å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é”®åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é”®å€¼ï¼Œä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">params</span>.append(<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">params</span>.toString() <span class="comment">// &#x27;a=1&amp;b=2&amp;a=3&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œé”®å<code>a</code>å·²ç»å­˜åœ¨ï¼Œä½†æ˜¯<code>append()</code>ä¾ç„¶ä¼šå°†<code>a=3</code>æ·»åŠ åœ¨æŸ¥è¯¢å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚</p><h3 id="delete">delete() <a href="about:blank#delete">#</a></h3><p><code>delete()</code>åˆ é™¤ç»™å®šåå­—çš„é”®å€¼å¯¹ã€‚</p><h3 id="get">get() <a href="about:blank#get">#</a></h3><p><code>get()</code>è¿”å›æŒ‡å®šé”®åæ‰€å¯¹åº”çš„é”®å€¼ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªåŒåé”®å€¼å¯¹ï¼Œå®ƒåªè¿”å›ç¬¬ä¸€ä¸ªé”®å€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.<span class="keyword">get</span>(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸å­˜åœ¨çš„é”®åï¼Œå®ƒä¼šè¿”å›<code>null</code>ã€‚</p><p>æ³¨æ„ï¼Œ<code>get()</code>ä¼šå°†é”®å€¼é‡Œé¢çš„åŠ å·è½¬ä¸ºç©ºæ ¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(`c=a+b`);</span><br><span class="line"><span class="keyword">params</span>.<span class="keyword">get</span>(<span class="string">&#x27;c&#x27;</span>) <span class="comment">// &#x27;a b&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>get()</code>å°†<code>a+b</code>è½¬ä¸º<code>a b</code>ã€‚å¦‚æœå¸Œæœ›é¿å…è¿™ç§è¡Œä¸ºï¼Œå¯ä»¥å…ˆç”¨<code>encodeURIComponent()</code>å¯¹é”®å€¼è¿›è¡Œè½¬ä¹‰ã€‚</p><h3 id="getAll">getAll() <a href="about:blank#getall">#</a></h3><p><code>getAll()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æ˜¯æŒ‡å®šé”®åæ‰€å¯¹åº”çš„æ‰€æœ‰é”®å€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&amp;a=3&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.getAll(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// [ &#x27;1&#x27;, &#x27;3&#x27; ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="has">has() <a href="about:blank#has">#</a></h3><p><code>has()</code>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŒ‡å®šé”®åæ˜¯å¦å­˜åœ¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.has(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"><span class="keyword">params</span>.has(<span class="string">&#x27;c&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="set">set() <a href="about:blank#set">#</a></h3><p><code>set()</code>ç”¨æ¥è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚å¦‚æœç›¸åŒé”®åå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šæ›¿æ¢å½“å‰å€¼ï¼Œè¿™æ˜¯å®ƒä¸<code>append()</code>çš„ä¸åŒä¹‹å¤„ã€‚è¯¥æ–¹æ³•é€‚åˆç”¨æ¥ä¿®æ”¹æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.<span class="keyword">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">params</span>.toString() <span class="comment">// &#x27;a=3&amp;b=2&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>set()</code>ä¿®æ”¹äº†é”®<code>a</code>ã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªçš„åŒåé”®ï¼Œ<code>set()</code>ä¼šç§»é™¤ç°å­˜æ‰€æœ‰çš„é”®ï¼Œå†æ·»åŠ æ–°çš„é”®å€¼å¯¹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?foo=1&amp;foo=2&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.<span class="keyword">set</span>(<span class="string">&#x27;foo&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">params</span>.toString() <span class="comment">// &quot;foo=3&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸¤ä¸ª<code>foo</code>é”®ï¼Œ<code>set()</code>ä¼šå°†å®ƒä»¬éƒ½åˆ æ‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ–°çš„<code>foo</code>é”®ã€‚</p><h3 id="sort">sort() <a href="about:blank#sort">#</a></h3><p><code>sort()</code>æŒ‰ç…§é”®åï¼ˆä»¥ Unicode ç ç‚¹ä¸ºåºï¼‰å¯¹é”®å€¼å¯¹æ’åºã€‚å¦‚æœæœ‰åŒåé”®å€¼å¯¹ï¼Œå®ƒä»¬çš„é¡ºåºä¸å˜ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&#x27;?a=1&amp;b=2&amp;a=3&#x27;</span>);</span><br><span class="line"><span class="keyword">params</span>.sort();</span><br><span class="line"><span class="keyword">params</span>.toString() <span class="comment">// &#x27;a=1&amp;a=3&amp;b=2&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="entries">entries() <a href="about:blank#entries">#</a></h3><p><code>entries()</code>æ–¹æ³•è¿”å›ä¸€ä¸ª iterator å¯¹è±¡ï¼Œç”¨æ¥éå†é”®åå’Œé”®å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(<span class="string">&quot;key1=value1&amp;key2=value2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> params.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>, <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1, value1</span></span><br><span class="line"><span class="comment">// key2, value2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥å¯¹ URLSearchParams å®ä¾‹è¿›è¡Œ<code>for...of</code>éå†ï¼Œå…¶å®å†…éƒ¨è°ƒç”¨çš„å°±æ˜¯<code>entries</code>æ¥å£ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="selector-tag">var</span> <span class="selector-tag">p</span> of params) &#123;&#125;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">for</span> (<span class="selector-tag">var</span> <span class="selector-tag">p</span> of params<span class="selector-class">.entries</span>()) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="forEach">forEach() <a href="about:blank#foreach">#</a></h3><p><code>forEach()</code>ç”¨æ¥ä¾æ¬¡å¯¹æ¯ä¸ªé”®å€¼å¯¹æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p><p>å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°<code>callback</code>æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°<code>thisArg</code>æ˜¯å¯é€‰çš„ï¼Œç”¨æ¥è®¾ç½®<code>callback</code>é‡Œé¢çš„<code>this</code>å¯¹è±¡ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">forEach</span><span class="params">(callback)</span></span></span><br><span class="line"><span class="function"><span class="title">forEach</span><span class="params">(callback, thisArg)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>callback</code>å‡½æ•°å¯ä»¥æ¥æ”¶åˆ°ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ã€‚</p><ul><li>valueï¼šå½“å‰é”®å€¼ã€‚</li><li>keyï¼šå½“å‰é”®åã€‚</li><li>searchParamsï¼šå½“å‰çš„ URLSearchParams å®ä¾‹å¯¹è±¡ã€‚</li></ul><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const params = <span class="keyword">new</span> URLSearchParams(<span class="string">&quot;key1=value1&amp;key2=value2&quot;</span>);</span><br><span class="line"></span><br><span class="line">params.forEach(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(value, key);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// value1 key1</span></span><br><span class="line"><span class="comment">// value2 key2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="keys">keys() <a href="about:blank#keys">#</a></h3><p><code>keys()</code>è¿”å›ä¸€ä¸ª iterator å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰é”®åã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&quot;key1=value1&amp;key2=value2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key of <span class="keyword">params</span>.keys()) &#123;</span><br><span class="line">  console.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// key1</span></span><br><span class="line"><span class="comment">// key2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="values">values() <a href="about:blank#values">#</a></h3><p><code>values()</code>è¿”å›ä¸€ä¸ª iterator å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰é”®å€¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&quot;key1=value1&amp;key2=value2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">value</span> of <span class="keyword">params</span>.values()) &#123;</span><br><span class="line">  console.log(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// value1</span></span><br><span class="line"><span class="comment">// value2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥å°†æ‰€æœ‰é”®å€¼ï¼Œè½¬æˆä¸€ä¸ªæ•°ç»„ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Array</span>.<span class="keyword">from</span>(params.<span class="keyword">values</span>()) // [<span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="toString">toString() <a href="about:blank#tostring">#</a></h3><p><code>toString()</code>ç”¨æ¥å°† URLSearchParams å®ä¾‹å¯¹è±¡è½¬æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒè¿”å›çš„å­—ç¬¦ä¸²ä¸å¸¦é—®å·ï¼Œè¿™ä¸€ç‚¹ä¸<code>window.location.search</code>ä¸åŒã€‚</p><h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§ <a href="about:blank#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">#</a></h2><h3 id="size">size <a href="about:blank#size">#</a></h3><p><code>size</code>æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè¿”å›é”®å€¼å¯¹çš„æ€»æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">params</span> = <span class="keyword">new</span> URLSearchParams(<span class="string">&quot;c=4&amp;a=2&amp;b=3&amp;a=1&quot;</span>);</span><br><span class="line"><span class="keyword">params</span>.size; <span class="comment">// 4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œé”®å<code>a</code>åœ¨æŸ¥è¯¢å­—ç¬¦ä¸²é‡Œé¢æœ‰ä¸¤ä¸ªï¼Œ<code>size</code>ä¸ä¼šå°†å®ƒä»¬åˆå¹¶ã€‚</p><p>å¦‚æœæƒ³ç»Ÿè®¡ä¸é‡å¤çš„é”®åï¼Œå¯ä»¥å°†ä½¿ç”¨ Set ç»“æ„ã€‚</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[</span><span class="params">...</span><span class="literal">new</span> <span class="built_in">Set</span>(<span class="keyword">params</span>.keys())<span class="meta">]</span>.length // 3</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>size</code>å±æ€§å¯ä»¥ç”¨æ¥åˆ¤åˆ«ï¼ŒæŸä¸ªç½‘å€æ˜¯å¦æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">url</span> = <span class="keyword">new</span> URL(<span class="string">&quot;https://example.com?foo=1&amp;bar=2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">url</span>.searchParams.size) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;è¯¥ URL æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/urlsearchparams">https://wangdoc.com/webapi/urlsearchparams</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">URLSearchParams å¯¹è±¡</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>URL å¯¹è±¡</title>
    <link href="https://www.hacp.top/posts/49.html"/>
    <id>https://www.hacp.top/posts/49.html</id>
    <published>2023-07-17T10:19:03.000Z</published>
    <updated>2023-07-17T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>URL å¯¹è±¡</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>æµè§ˆå™¨å†…ç½®çš„ URL å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªç½‘å€ã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œå°±èƒ½ç”Ÿæˆå’Œæ“ä½œç½‘å€ã€‚</p><h2 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•° <a href="about:blank#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">#</a></h2><p>URL å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ä½¿ç”¨ï¼Œç”Ÿæˆä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><p>å®ƒæ¥å—ä¸€ä¸ªç½‘å€å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">url</span> = <span class="keyword">new</span> URL(<span class="string">&#x27;https://example.com&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç½‘å€å­—ç¬¦ä¸²æ— æ³•è§£æï¼Œå®ƒä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å®ƒè¦æ”¾åœ¨<code>try...catch</code>ä»£ç å—é‡Œé¢ã€‚</p><p>å¦‚æœè¿™ä¸ªå‚æ•°åªæ˜¯ä¸€ä¸ªç½‘ç«™è·¯å¾„ï¼Œæ¯”å¦‚<code>/foo/index.html</code>ï¼Œé‚£ä¹ˆéœ€è¦æä¾›åŸºå‡†ç½‘å€ï¼Œä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url1 = <span class="keyword">new</span> URL(<span class="string">&#x27;page2.html&#x27;</span>, <span class="string">&#x27;http://example.com/page1.html&#x27;</span>);</span><br><span class="line">url1.href <span class="comment">// &quot;http://example.com/page2.html&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url2 = <span class="keyword">new</span> URL(<span class="string">&#x27;..&#x27;</span>, <span class="string">&#x27;http://example.com/a/b.html&#x27;</span>)</span><br><span class="line">url2.href <span class="comment">// &quot;http://example.com/&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•å¾ˆæ–¹ä¾¿åŸºäºç°æœ‰ç½‘å€ï¼Œæ„é€ æ–°çš„ URLã€‚</p><p><code>URL()</code>çš„å‚æ•°ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ª URL å®ä¾‹ã€‚è¿™æ—¶ï¼Œ<code>URL()</code>ä¼šè‡ªåŠ¨è¯»å–è¯¥å®ä¾‹çš„hrefå±æ€§ï¼Œä½œä¸ºå®é™…å‚æ•°ã€‚</p><h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§ <a href="about:blank#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">#</a></h2><p>ä¸€æ—¦å¾—åˆ°äº† URL å®ä¾‹å¯¹è±¡ï¼Œå°±å¯ä»¥ä»å®ƒçš„å„ç§å±æ€§ï¼Œæ–¹ä¾¿åœ°è·å– URL çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p><ul><li>hrefï¼šå®Œæ•´çš„ç½‘å€</li><li>protocolï¼šè®¿é—®åè®®ï¼Œå¸¦ç»“å°¾å†’å·<code>:</code>ã€‚</li><li>searchï¼šæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä»¥é—®å·<code>?</code>å¼€å¤´ã€‚</li><li>hashï¼šå“ˆå¸Œå­—ç¬¦ä¸²ï¼Œä»¥<code>#</code>å¼€å¤´ã€‚</li><li>usernameï¼šéœ€è¦è®¤è¯çš„ç½‘å€çš„ç”¨æˆ·åã€‚</li><li>passwordï¼šéœ€è¦è®¤è¯çš„ç½‘å€çš„å¯†ç ã€‚</li><li>hostï¼šä¸»æœºåï¼Œä¸å¸¦åè®®ï¼Œä½†å¸¦æœ‰ç«¯å£ã€‚</li><li>hostnameï¼šä¸»æœºåï¼Œä¸å¸¦åè®®å’Œç«¯å£ã€‚</li><li>portï¼šç«¯å£ã€‚</li><li>originï¼šåŒ…æ‹¬åè®®ã€åŸŸåå’Œç«¯å£ã€‚</li><li>pathnameï¼šæœåŠ¡å™¨è·¯å¾„ï¼Œä»¥æ ¹è·¯å¾„<code>/</code>å¼€å¤´ï¼Œä¸å¸¦æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</li><li>searchParamsï¼šæŒ‡å‘ä¸€ä¸ª URLSearchParams å®ä¾‹ï¼Œæ–¹ä¾¿ç”¨æ¥æ„é€ å’Œæ“ä½œæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</li></ul><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">url</span> = <span class="keyword">new</span> URL(<span class="string">&#x27;http://user:pass@example.com:8080/resource/path?q=1#hash&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">url</span>.href <span class="comment">// http://user:pass@example.com:8080/resource/path?q=1#hash</span></span><br><span class="line"><span class="built_in">url</span>.protocol <span class="comment">// http:</span></span><br><span class="line"><span class="built_in">url</span>.username <span class="comment">// user</span></span><br><span class="line"><span class="built_in">url</span>.password <span class="comment">// pass</span></span><br><span class="line"><span class="built_in">url</span>.host <span class="comment">// example.com:8080</span></span><br><span class="line"><span class="built_in">url</span>.hostname <span class="comment">// example.com</span></span><br><span class="line"><span class="built_in">url</span>.port <span class="comment">// 8080</span></span><br><span class="line"><span class="built_in">url</span>.pathname <span class="comment">// /resource/path</span></span><br><span class="line"><span class="built_in">url</span>.search <span class="comment">// ?q=1</span></span><br><span class="line"><span class="built_in">url</span>.hash <span class="comment">// #hash</span></span><br><span class="line"><span class="built_in">url</span>.origin <span class="comment">// http://example.com:8080 </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™äº›å±æ€§é‡Œé¢ï¼Œåªæœ‰<code>origin</code>å±æ€§æ˜¯åªè¯»çš„ï¼Œå…¶ä»–å±æ€§éƒ½å¯å†™ï¼Œå¹¶ä¸”ä¼šç«‹å³ç”Ÿæ•ˆã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">url</span> = <span class="keyword">new</span> URL(<span class="string">&#x27;http://example.com/index.html#part1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">url</span>.pathname = <span class="string">&#x27;index2.html&#x27;</span>;</span><br><span class="line"><span class="built_in">url</span>.href <span class="comment">// &quot;http://example.com/index2.html#part1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">url</span>.hash = <span class="string">&#x27;#part2&#x27;</span>;</span><br><span class="line"><span class="built_in">url</span>.href <span class="comment">// &quot;http://example.com/index2.html#part2&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ”¹å˜ URL å®ä¾‹çš„<code>pathname</code>å±æ€§å’Œ<code>hash</code>å±æ€§ï¼Œéƒ½ä¼šå®æ—¶åæ˜ åœ¨ URL å®ä¾‹å½“ä¸­ã€‚</p><p>ä¸‹é¢æ˜¯<code>searchParams</code>å±æ€§çš„ç”¨æ³•ç¤ºä¾‹ï¼Œå®ƒçš„å…·ä½“å±æ€§å’Œæ–¹æ³•ä»‹ç»å‚è§ ã€ŠURLSearchParamsã€‹ä¸€ç« ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">url</span> = <span class="keyword">new</span> URL(<span class="string">&#x27;http://example.com/path?a=1&amp;b=2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">url</span>.searchParams.get(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">url</span>.searchParams.get(<span class="string">&#x27;b&#x27;</span>) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [k, v] <span class="keyword">of</span> <span class="built_in">url</span>.searchParams) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(k, v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a 1</span></span><br><span class="line"><span class="comment">// b 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³• <a href="about:blank#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">#</a></h2><h3 id="URL-createObjectURL">URL.createObjectURL() <a href="about:blank#urlcreateobjecturl">#</a></h3><p><code>URL.createObjectURL()</code>æ–¹æ³•ç”¨æ¥ä¸ºæ–‡ä»¶æ•°æ®ç”Ÿæˆä¸€ä¸ªä¸´æ—¶ç½‘å€ï¼ˆURL å­—ç¬¦ä¸²ï¼‰ï¼Œä¾›é‚£äº›éœ€è¦ç½‘å€ä½œä¸ºå‚æ•°çš„æ–¹æ³•ä½¿ç”¨ã€‚è¯¥æ–¹æ³•çš„å‚æ•°å¿…é¡»æ˜¯ Blob ç±»å‹ï¼ˆå³ä»£è¡¨æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HTML ä»£ç å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">// &lt;div id=&quot;display&quot;/&gt;</span></span><br><span class="line"><span class="comment">// &lt;input</span></span><br><span class="line"><span class="comment">//   type=&quot;file&quot;</span></span><br><span class="line"><span class="comment">//   id=&quot;fileElem&quot;</span></span><br><span class="line"><span class="comment">//   multiple</span></span><br><span class="line"><span class="comment">//   accept=&quot;image/*&quot;</span></span><br><span class="line"><span class="comment">//   onchange=&quot;handleFiles(this.files)&quot;</span></span><br><span class="line"><span class="comment">//  &gt;</span></span><br><span class="line"><span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;display&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleFiles</span>(<span class="params">files</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">    img.<span class="property">src</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(files[i]);</span><br><span class="line">    div.<span class="title function_">appendChild</span>(img);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>URL.createObjectURL()</code>æ–¹æ³•ç”¨æ¥ä¸ºä¸Šä¼ çš„æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªä¸´æ—¶ç½‘å€ï¼Œä½œä¸º<code>&lt;img&gt;</code>å…ƒç´ çš„å›¾ç‰‡æ¥æºã€‚</p><p>è¯¥æ–¹æ³•ç”Ÿæˆçš„ URL å°±åƒä¸‹é¢çš„æ ·å­ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">blob</span>:http://localhost/c745ef73-ece9-<span class="number">46</span>da-<span class="number">8</span>f66-ebes574789b1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæ¯æ¬¡ä½¿ç”¨<code>URL.createObjectURL()</code>æ–¹æ³•ï¼Œéƒ½ä¼šåœ¨å†…å­˜é‡Œé¢ç”Ÿæˆä¸€ä¸ª URL å®ä¾‹ã€‚å¦‚æœä¸å†éœ€è¦è¯¥æ–¹æ³•ç”Ÿæˆçš„ä¸´æ—¶ç½‘å€ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨<code>URL.revokeObjectURL()</code>æ–¹æ³•é‡Šæ”¾è¿™ä¸ªå®ä¾‹ã€‚</p><p>ä¸‹é¢æ˜¯ç”Ÿæˆ Worker è¿›ç¨‹çš„ä¸€ä¸ªç¤ºä¾‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&#x27;code&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;text/plain&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">postMessage</span>(<span class="string">&#x27;foo&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> code = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;code&#x27;</span>).<span class="property">textContent</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([code], &#123; <span class="attr">type</span>: <span class="string">&#x27;application/javascript&#x27;</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> worker = <span class="keyword">new</span> <span class="title class_">Worker</span>(url);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(url);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  worker.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;worker returned: &#x27;</span>, e.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="URL-revokeObjectURL">URL.revokeObjectURL() <a href="about:blank#urlrevokeobjecturl">#</a></h3><p><code>URL.revokeObjectURL()</code>æ–¹æ³•ç”¨æ¥é‡Šæ”¾<code>URL.createObjectURL()</code>ç”Ÿæˆçš„ä¸´æ—¶ç½‘å€ã€‚å®ƒçš„å‚æ•°å°±æ˜¯<code>URL.createObjectURL()</code>æ–¹æ³•è¿”å›çš„ URL å­—ç¬¦ä¸²ã€‚</p><p>ä¸‹é¢ä¸ºä¸Šä¸€å°èŠ‚çš„ç¤ºä¾‹åŠ ä¸Š<code>URL.revokeObjectURL()</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;display&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleFiles</span>(<span class="params">files</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">    img.<span class="property">src</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(files[i]);</span><br><span class="line">    div.<span class="title function_">appendChild</span>(img);</span><br><span class="line">    img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">revokeObjectURL</span>(<span class="variable language_">this</span>.<span class="property">src</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€æ—¦å›¾ç‰‡åŠ è½½æˆåŠŸä»¥åï¼Œä¸ºæœ¬åœ°æ–‡ä»¶ç”Ÿæˆçš„ä¸´æ—¶ç½‘å€å°±æ²¡ç”¨äº†ï¼Œäºæ˜¯å¯ä»¥åœ¨<code>img.onload</code>å›è°ƒå‡½æ•°é‡Œé¢ï¼Œé€šè¿‡<code>URL.revokeObjectURL()</code>æ–¹æ³•é‡Šæ”¾èµ„æºã€‚</p><h3 id="URL-canParse">URL.canParse() <a href="about:blank#urlcanparse">#</a></h3><p><code>URL()</code>æ„é€ å‡½æ•°è§£æéæ³•ç½‘å€æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¿…é¡»ç”¨<code>try...catch</code>ä»£ç å—å¤„ç†ï¼Œè¿™æ ·ç»ˆç©¶ä¸æ˜¯éå¸¸æ–¹ä¾¿ã€‚å› æ­¤ï¼ŒURL å¯¹è±¡åˆå¼•å…¥äº†<code>URL.canParse()</code>æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœ‰æ•ˆç½‘å€ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">URL</span>.canParse(url)</span><br><span class="line"><span class="built_in">URL</span>.canParse(url, base)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>URL.canParse()</code>å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚</p><ul><li><code>url</code>ï¼šå­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡ï¼ˆæ¯”å¦‚<code>&lt;a&gt;</code>å…ƒç´ çš„ DOM å¯¹è±¡ï¼‰ï¼Œè¡¨ç¤º URLã€‚</li><li><code>base</code>ï¼šå­—ç¬¦ä¸²æˆ–è€… URL å®ä¾‹å¯¹è±¡ï¼Œè¡¨ç¤º URL çš„åŸºå‡†ä½ç½®ã€‚å®ƒæ˜¯å¯é€‰å‚æ•°ï¼Œå½“ç¬¬ä¸€ä¸ªå‚æ•°<code>url</code>ä¸ºç›¸å¯¹ URL æ—¶ï¼Œä¼šä½¿ç”¨è¿™ä¸ªå‚æ•°ï¼Œè®¡ç®—å‡ºå®Œæ•´çš„ URLï¼Œå†è¿›è¡Œåˆ¤æ–­ã€‚</li></ul><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">URL</span>.canParse(<span class="string">&quot;https://developer.mozilla.org/&quot;</span>)<span class="comment"> // true</span></span><br><span class="line"><span class="built_in">URL</span>.canParse(<span class="string">&quot;/en-US/docs&quot;</span>)<span class="comment"> // false</span></span><br><span class="line"><span class="built_in">URL</span>.canParse(<span class="string">&quot;/en-US/docs&quot;</span>, <span class="string">&quot;https://developer.mozilla.org/&quot;</span>)<span class="comment"> // true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›¸å¯¹ URLï¼Œè¿™æ—¶å¿…é¡»è¦æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹æ˜¯ç¬¬äºŒä¸ªå‚æ•°ä¸º URL å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> baseUrl = <span class="keyword">new</span> URL(<span class="string">&quot;https://developer.mozilla.org/&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="built_in">url</span> = <span class="string">&quot;/en-US/docs&quot;</span>;</span><br><span class="line"></span><br><span class="line">URL.canParse(<span class="built_in">url</span>, baseUrl) <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•å†…éƒ¨ä½¿ç”¨<code>URL()</code>æ„é€ æ–¹æ³•ç›¸åŒçš„è§£æç®—æ³•ï¼Œå› æ­¤å¯ä»¥ç”¨<code>URL()</code>æ„é€ æ–¹æ³•ä»£æ›¿ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isUrlValid</span>(<span class="params"><span class="keyword">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title function_ invoke__">URL</span>(<span class="keyword">string</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œç»™å‡ºäº†<code>URL.canParse()</code>çš„æ›¿ä»£å®ç°<code>isUrlValid()</code>ã€‚</p><h3 id="URL-parse">URL.parse() <a href="about:blank#urlparse">#</a></h3><p><code>URL.parse()</code>æ˜¯ä¸€ä¸ªæ–°æ·»åŠ çš„æ–¹æ³•ï¼ŒChromium 126 å’Œ Firefox 126 å¼€å§‹æ”¯æŒã€‚</p><p>å®ƒçš„ä¸»è¦ç›®çš„å°±æ˜¯ï¼Œæ”¹å˜<code>URL()</code>æ„é€ å‡½æ•°è§£æéæ³•ç½‘å€æŠ›é”™çš„é—®é¢˜ã€‚è¿™ä¸ªæ–°æ–¹æ³•ä¸ä¼šæŠ›é”™ï¼Œå¦‚æœå‚æ•°æ˜¯æœ‰æ•ˆç½‘å€ï¼Œåˆ™è¿”å› URL å®ä¾‹å¯¹è±¡ï¼Œå¦åˆ™è¿”å›<code>null</code>ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const urlstring <span class="operator">=</span> <span class="string">&quot;this is not a URL&quot;</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">const not_a_url <span class="operator">=</span> URL.parse(urlstring)<span class="comment">; // null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>URL.parse()</code>çš„å‚æ•°ä¸æ˜¯æœ‰æ•ˆç½‘å€ï¼Œæ‰€ä»¥è¿”å›<code>null</code>ã€‚</p><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="toString">toString() <a href="about:blank#tostring">#</a></h3><p>URL å®ä¾‹å¯¹è±¡çš„<code>toString()</code>è¿”å›<code>URL.href</code>å±æ€§ï¼Œå³æ•´ä¸ªç½‘å€ã€‚</p><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/url">https://wangdoc.com/webapi/url</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">URL å¯¹è±¡</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>SVG å›¾åƒ</title>
    <link href="https://www.hacp.top/posts/48.html"/>
    <id>https://www.hacp.top/posts/48.html</id>
    <published>2023-07-16T10:19:03.000Z</published>
    <updated>2023-07-16T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>SVG å›¾åƒ</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="æ¦‚è¿°">æ¦‚è¿° <a href="about:blank#%E6%A6%82%E8%BF%B0">#</a></h2><p>SVG æ˜¯ä¸€ç§åŸºäº XML è¯­æ³•çš„å›¾åƒæ ¼å¼ï¼Œå…¨ç§°æ˜¯å¯ç¼©æ”¾çŸ¢é‡å›¾ï¼ˆScalable Vector Graphicsï¼‰ã€‚å…¶ä»–å›¾åƒæ ¼å¼éƒ½æ˜¯åŸºäºåƒç´ å¤„ç†çš„ï¼ŒSVG åˆ™æ˜¯å±äºå¯¹å›¾åƒçš„å½¢çŠ¶æè¿°ï¼Œæ‰€ä»¥å®ƒæœ¬è´¨ä¸Šæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œä½“ç§¯è¾ƒå°ï¼Œä¸”ä¸ç®¡æ”¾å¤§å¤šå°‘å€éƒ½ä¸ä¼šå¤±çœŸã€‚</p><p>SVG æ–‡ä»¶å¯ä»¥ç›´æ¥æ’å…¥ç½‘é¡µï¼Œæˆä¸º DOM çš„ä¸€éƒ¨åˆ†ï¼Œç„¶åç”¨ JavaScript å’Œ CSS è¿›è¡Œæ“ä½œã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;mysvg&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">viewBox</span>=<span class="string">&quot;0 0 800 600&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">preserveAspectRatio</span>=<span class="string">&quot;xMidYMid meet&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">circle</span> <span class="attr">id</span>=<span class="string">&quot;mycircle&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;400&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;300&quot;</span> <span class="attr">r</span>=<span class="string">&quot;50&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ SVG ä»£ç ç›´æ¥æ’å…¥ç½‘é¡µçš„ä¾‹å­ã€‚</p><p>SVG ä»£ç ä¹Ÿå¯ä»¥å†™åœ¨ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶ä¸­ï¼Œç„¶åç”¨<code>&lt;img&gt;</code>ã€<code>&lt;object&gt;</code>ã€<code>&lt;embed&gt;</code>ã€<code>&lt;iframe&gt;</code>ç­‰æ ‡ç­¾æ’å…¥ç½‘é¡µã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;circle.svg&quot;</span>&gt;</span><br><span class="line">&lt;object <span class="attribute">id</span>=<span class="string">&quot;object&quot;</span> <span class="attribute">data</span>=<span class="string">&quot;circle.svg&quot;</span> <span class="attribute">type</span>=<span class="string">&quot;image/svg+xml&quot;</span>&gt;&lt;/object&gt;</span><br><span class="line">&lt;embed <span class="attribute">id</span>=<span class="string">&quot;embed&quot;</span> <span class="attribute">src</span>=<span class="string">&quot;icon.svg&quot;</span> <span class="attribute">type</span>=<span class="string">&quot;image/svg+xml&quot;</span>&gt;</span><br><span class="line">&lt;iframe <span class="attribute">id</span>=<span class="string">&quot;iframe&quot;</span> <span class="attribute">src</span>=<span class="string">&quot;icon.svg&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>CSS ä¹Ÿå¯ä»¥ä½¿ç”¨ SVG æ–‡ä»¶ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">icon.svg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>SVG æ–‡ä»¶è¿˜å¯ä»¥è½¬ä¸º BASE64 ç¼–ç ï¼Œç„¶åä½œä¸º Data URI å†™å…¥ç½‘é¡µã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;data:image/svg+xml;base64,[data]&quot;</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¯­æ³•">è¯­æ³• <a href="about:blank#%E8%AF%AD%E6%B3%95">#</a></h2><h3 id="svg-æ ‡ç­¾"><code>&lt;svg&gt;</code>æ ‡ç­¾ <a href="about:blank#svg%E6%A0%87%E7%AD%BE">#</a></h3><p>SVG ä»£ç éƒ½æ”¾åœ¨é¡¶å±‚æ ‡ç­¾<code>&lt;svg&gt;</code>ä¹‹ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;100%&quot;</span> height<span class="operator">=</span><span class="string">&quot;100%&quot;</span>&gt;</span><br><span class="line">  &lt;circle id<span class="operator">=</span><span class="string">&quot;mycircle&quot;</span> cx<span class="operator">=</span><span class="string">&quot;50&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;50&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;svg&gt;</code>çš„<code>width</code>å±æ€§å’Œ<code>height</code>å±æ€§ï¼ŒæŒ‡å®šäº† SVG å›¾åƒåœ¨ HTML å…ƒç´ ä¸­æ‰€å æ®çš„å®½åº¦å’Œé«˜åº¦ã€‚é™¤äº†ç›¸å¯¹å•ä½ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ç»å¯¹å•ä½ï¼ˆå•ä½ï¼šåƒç´ ï¼‰ã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸¤ä¸ªå±æ€§ï¼ŒSVG å›¾åƒçš„å¤§å°é»˜è®¤ä¸º300åƒç´ ï¼ˆå®½ï¼‰x 150åƒç´ ï¼ˆé«˜ï¼‰ã€‚</p><p>å¦‚æœåªæƒ³å±•ç¤º SVG å›¾åƒçš„ä¸€éƒ¨åˆ†ï¼Œå°±è¦æŒ‡å®š<code>viewBox</code>å±æ€§ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;100&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span> viewBox<span class="operator">=</span><span class="string">&quot;50 50 50 50&quot;</span>&gt;</span><br><span class="line">  &lt;circle id<span class="operator">=</span><span class="string">&quot;mycircle&quot;</span> cx<span class="operator">=</span><span class="string">&quot;50&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;50&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;viewBox&gt;</code>å±æ€§çš„å€¼æœ‰å››ä¸ªæ•°å­—ï¼Œåˆ†åˆ«æ˜¯å·¦ä¸Šè§’çš„æ¨ªåæ ‡å’Œçºµåæ ‡ã€è§†å£çš„å®½åº¦å’Œé«˜åº¦ã€‚ä¸Šé¢ä»£ç ä¸­ï¼ŒSVG å›¾åƒæ˜¯100åƒç´ å®½ x 100åƒç´ é«˜ï¼Œ<code>viewBox</code>å±æ€§æŒ‡å®šè§†å£ä»<code>(50, 50)</code>è¿™ä¸ªç‚¹å¼€å§‹ã€‚æ‰€ä»¥ï¼Œå®é™…çœ‹åˆ°çš„æ˜¯å³ä¸‹è§’çš„å››åˆ†ä¹‹ä¸€åœ†ã€‚</p><p>æ³¨æ„ï¼Œè§†å£å¿…é¡»é€‚é…æ‰€åœ¨çš„ç©ºé—´ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œè§†å£çš„å¤§å°æ˜¯ 50 x 50ï¼Œç”±äº SVG å›¾åƒçš„å¤§å°æ˜¯ 100 x 100ï¼Œæ‰€ä»¥è§†å£ä¼šæ”¾å¤§å»é€‚é… SVG å›¾åƒçš„å¤§å°ï¼Œå³æ”¾å¤§äº†å››å€ã€‚</p><p>å¦‚æœä¸æŒ‡å®š<code>width</code>å±æ€§å’Œ<code>height</code>å±æ€§ï¼ŒåªæŒ‡å®š<code>viewBox</code>å±æ€§ï¼Œåˆ™ç›¸å½“äºåªç»™å®š SVG å›¾åƒçš„é•¿å®½æ¯”ã€‚è¿™æ—¶ï¼ŒSVG å›¾åƒçš„å¤§å°é»˜è®¤æ˜¯æ‰€åœ¨çš„ HTML å…ƒç´ çš„å¤§å°ã€‚</p><h3 id="circle-æ ‡ç­¾"><code>&lt;circle&gt;</code>æ ‡ç­¾ <a href="about:blank#circle%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;circle&gt;</code>æ ‡ç­¾ä»£è¡¨åœ†å½¢ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;circle cx<span class="operator">=</span><span class="string">&quot;30&quot;</span>  cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;25&quot;</span> /&gt;</span><br><span class="line">  &lt;circle cx<span class="operator">=</span><span class="string">&quot;90&quot;</span>  cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;25&quot;</span> class<span class="operator">=</span><span class="string">&quot;red&quot;</span> /&gt;</span><br><span class="line">  &lt;circle cx<span class="operator">=</span><span class="string">&quot;150&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;25&quot;</span> class<span class="operator">=</span><span class="string">&quot;fancy&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†ä¸‰ä¸ªåœ†ã€‚<code>&lt;circle&gt;</code>æ ‡ç­¾çš„<code>cx</code>ã€<code>cy</code>ã€<code>r</code>å±æ€§åˆ†åˆ«ä¸ºæ¨ªåæ ‡ã€çºµåæ ‡å’ŒåŠå¾„ï¼Œå•ä½ä¸ºåƒç´ ã€‚åæ ‡éƒ½æ˜¯ç›¸å¯¹äº<code>&lt;svg&gt;</code>ç”»å¸ƒçš„å·¦ä¸Šè§’åŸç‚¹ã€‚</p><p><code>class</code>å±æ€§ç”¨æ¥æŒ‡å®šå¯¹åº”çš„ CSS ç±»ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.red</span> &#123;</span><br><span class="line">  <span class="attribute">fill</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fancy</span> &#123;</span><br><span class="line">  <span class="attribute">fill</span>: none;</span><br><span class="line">  <span class="attribute">stroke</span>: black;</span><br><span class="line">  <span class="attribute">stroke-width</span>: <span class="number">3pt</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>SVG çš„ CSS å±æ€§ä¸ç½‘é¡µå…ƒç´ æœ‰æ‰€ä¸åŒã€‚</p><blockquote><ul><li>fillï¼šå¡«å……è‰²</li><li>strokeï¼šæè¾¹è‰²</li><li>stroke-widthï¼šè¾¹æ¡†å®½åº¦</li></ul></blockquote><h3 id="line-æ ‡ç­¾"><code>&lt;line&gt;</code>æ ‡ç­¾ <a href="about:blank#line%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;line&gt;</code>æ ‡ç­¾ç”¨æ¥ç»˜åˆ¶ç›´çº¿ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;line x1<span class="operator">=</span><span class="string">&quot;0&quot;</span> y1<span class="operator">=</span><span class="string">&quot;0&quot;</span> x2<span class="operator">=</span><span class="string">&quot;200&quot;</span> y2<span class="operator">=</span><span class="string">&quot;0&quot;</span> style<span class="operator">=</span><span class="string">&quot;stroke:rgb(0,0,0);stroke-width:5&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;line&gt;</code>æ ‡ç­¾çš„<code>x1</code>å±æ€§å’Œ<code>y1</code>å±æ€§ï¼Œè¡¨ç¤ºçº¿æ®µèµ·ç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼›<code>x2</code>å±æ€§å’Œ<code>y2</code>å±æ€§ï¼Œè¡¨ç¤ºçº¿æ®µç»ˆç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼›<code>style</code>å±æ€§è¡¨ç¤ºçº¿æ®µçš„æ ·å¼ã€‚</p><h3 id="polyline-æ ‡ç­¾"><code>&lt;polyline&gt;</code>æ ‡ç­¾ <a href="about:blank#polyline%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;polyline&gt;</code>æ ‡ç­¾ç”¨äºç»˜åˆ¶ä¸€æ ¹æŠ˜çº¿ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;polyline points<span class="operator">=</span><span class="string">&quot;3,3 30,28 3,53&quot;</span> fill<span class="operator">=</span><span class="string">&quot;none&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;black&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;polyline&gt;</code>çš„<code>points</code>å±æ€§æŒ‡å®šäº†æ¯ä¸ªç«¯ç‚¹çš„åæ ‡ï¼Œæ¨ªåæ ‡ä¸çºµåæ ‡ä¹‹é—´ä¸é€—å·åˆ†éš”ï¼Œç‚¹ä¸ç‚¹ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><h3 id="rect-æ ‡ç­¾"><code>&lt;rect&gt;</code>æ ‡ç­¾ <a href="about:blank#rect%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;rect&gt;</code>æ ‡ç­¾ç”¨äºç»˜åˆ¶çŸ©å½¢ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;rect x<span class="operator">=</span><span class="string">&quot;0&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span> width<span class="operator">=</span><span class="string">&quot;200&quot;</span> style<span class="operator">=</span><span class="string">&quot;stroke: #70d5dd; fill: #dd524b&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;rect&gt;</code>çš„<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§ï¼ŒæŒ‡å®šäº†çŸ©å½¢å·¦ä¸Šè§’ç«¯ç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼›<code>width</code>å±æ€§å’Œ<code>height</code>å±æ€§æŒ‡å®šäº†çŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ï¼ˆå•ä½åƒç´ ï¼‰ã€‚</p><h3 id="ellipse-æ ‡ç­¾"><code>&lt;ellipse&gt;</code>æ ‡ç­¾ <a href="about:blank#ellipse%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;ellipse&gt;</code>æ ‡ç­¾ç”¨äºç»˜åˆ¶æ¤­åœ†ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;ellipse cx<span class="operator">=</span><span class="string">&quot;60&quot;</span> cy<span class="operator">=</span><span class="string">&quot;60&quot;</span> ry<span class="operator">=</span><span class="string">&quot;40&quot;</span> rx<span class="operator">=</span><span class="string">&quot;20&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;black&quot;</span> stroke-width<span class="operator">=</span><span class="string">&quot;5&quot;</span> fill<span class="operator">=</span><span class="string">&quot;silver&quot;</span>/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;ellipse&gt;</code>çš„<code>cx</code>å±æ€§å’Œ<code>cy</code>å±æ€§ï¼ŒæŒ‡å®šäº†æ¤­åœ†ä¸­å¿ƒçš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼ˆå•ä½åƒç´ ï¼‰ï¼›<code>rx</code>å±æ€§å’Œ<code>ry</code>å±æ€§ï¼ŒæŒ‡å®šäº†æ¤­åœ†æ¨ªå‘è½´å’Œçºµå‘è½´çš„åŠå¾„ï¼ˆå•ä½åƒç´ ï¼‰ã€‚</p><h3 id="polygon-æ ‡ç­¾"><code>&lt;polygon&gt;</code>æ ‡ç­¾ <a href="about:blank#polygon%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;polygon&gt;</code>æ ‡ç­¾ç”¨äºç»˜åˆ¶å¤šè¾¹å½¢ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;polygon fill<span class="operator">=</span><span class="string">&quot;green&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;orange&quot;</span> stroke-width<span class="operator">=</span><span class="string">&quot;1&quot;</span> points<span class="operator">=</span><span class="string">&quot;0,0 100,0 100,100 0,100 0,0&quot;</span>/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;polygon&gt;</code>çš„<code>points</code>å±æ€§æŒ‡å®šäº†æ¯ä¸ªç«¯ç‚¹çš„åæ ‡ï¼Œæ¨ªåæ ‡ä¸çºµåæ ‡ä¹‹é—´ä¸é€—å·åˆ†éš”ï¼Œç‚¹ä¸ç‚¹ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><h3 id="path-æ ‡ç­¾"><code>&lt;path&gt;</code>æ ‡ç­¾ <a href="about:blank#path%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;path&gt;</code>æ ‡ç­¾ç”¨äºåˆ¶è·¯å¾„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">  M 18,3</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 46,3</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 46,40</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 61,40</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 32,68</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 3,40</span></span></span><br><span class="line"><span class="string"><span class="tag">  L 18,40</span></span></span><br><span class="line"><span class="string"><span class="tag">  Z</span></span></span><br><span class="line"><span class="string"><span class="tag">&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;path&gt;</code>çš„<code>d</code>å±æ€§è¡¨ç¤ºç»˜åˆ¶é¡ºåºï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—æ¯è¡¨ç¤ºä¸€ä¸ªç»˜åˆ¶åŠ¨ä½œï¼Œåé¢è·Ÿç€åæ ‡ã€‚</p><blockquote><ul><li>Mï¼šç§»åŠ¨åˆ°ï¼ˆmovetoï¼‰</li><li>Lï¼šç”»ç›´çº¿åˆ°ï¼ˆlinetoï¼‰</li><li>Zï¼šé—­åˆè·¯å¾„</li></ul></blockquote><h3 id="text-æ ‡ç­¾"><code>&lt;text&gt;</code>æ ‡ç­¾ <a href="about:blank#text%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;text&gt;</code>æ ‡ç­¾ç”¨äºç»˜åˆ¶æ–‡æœ¬ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;180&quot;</span>&gt;</span><br><span class="line">  &lt;text x<span class="operator">=</span><span class="string">&quot;50&quot;</span> y<span class="operator">=</span><span class="string">&quot;25&quot;</span>&gt;Hello World&lt;/text&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;text&gt;</code>çš„<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§ï¼Œè¡¨ç¤ºæ–‡æœ¬åŒºå—åŸºçº¿ï¼ˆbaselineï¼‰èµ·ç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡ã€‚æ–‡å­—çš„æ ·å¼å¯ä»¥ç”¨<code>class</code>æˆ–<code>style</code>å±æ€§æŒ‡å®šã€‚</p><h3 id="use-æ ‡ç­¾"><code>&lt;use&gt;</code>æ ‡ç­¾ <a href="about:blank#use%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;use&gt;</code>æ ‡ç­¾ç”¨äºå¤åˆ¶ä¸€ä¸ªå½¢çŠ¶ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg viewBox<span class="operator">=</span><span class="string">&quot;0 0 30 10&quot;</span> xmlns<span class="operator">=</span><span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br><span class="line">  &lt;circle id<span class="operator">=</span><span class="string">&quot;myCircle&quot;</span> cx<span class="operator">=</span><span class="string">&quot;5&quot;</span> cy<span class="operator">=</span><span class="string">&quot;5&quot;</span> r<span class="operator">=</span><span class="string">&quot;4&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;10&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;20&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;white&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>&lt;use&gt;</code>çš„<code>href</code>å±æ€§æŒ‡å®šæ‰€è¦å¤åˆ¶çš„èŠ‚ç‚¹ï¼Œ<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§æ˜¯<code>&lt;use&gt;</code>å·¦ä¸Šè§’çš„åæ ‡ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®š<code>width</code>å’Œ<code>height</code>åæ ‡ã€‚</p><h3 id="g-æ ‡ç­¾"><code>&lt;g&gt;</code>æ ‡ç­¾ <a href="about:blank#g%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;g&gt;</code>æ ‡ç­¾ç”¨äºå°†å¤šä¸ªå½¢çŠ¶ç»„æˆä¸€ä¸ªç»„ï¼ˆgroupï¼‰ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">  &lt;g id<span class="operator">=</span><span class="string">&quot;myCircle&quot;</span>&gt;</span><br><span class="line">    &lt;text x<span class="operator">=</span><span class="string">&quot;25&quot;</span> y<span class="operator">=</span><span class="string">&quot;20&quot;</span>&gt;åœ†å½¢&lt;/text&gt;</span><br><span class="line">    &lt;circle cx<span class="operator">=</span><span class="string">&quot;50&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">  &lt;/g&gt;</span><br><span class="line"></span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;100&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;200&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;white&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="defs-æ ‡ç­¾"><code>&lt;defs&gt;</code>æ ‡ç­¾ <a href="about:blank#defs%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;defs&gt;</code>æ ‡ç­¾ç”¨äºè‡ªå®šä¹‰å½¢çŠ¶ï¼Œå®ƒå†…éƒ¨çš„ä»£ç ä¸ä¼šæ˜¾ç¤ºï¼Œä»…ä¾›å¼•ç”¨ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;300&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">    &lt;g id<span class="operator">=</span><span class="string">&quot;myCircle&quot;</span>&gt;</span><br><span class="line">      &lt;text x<span class="operator">=</span><span class="string">&quot;25&quot;</span> y<span class="operator">=</span><span class="string">&quot;20&quot;</span>&gt;åœ†å½¢&lt;/text&gt;</span><br><span class="line">      &lt;circle cx<span class="operator">=</span><span class="string">&quot;50&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;20&quot;</span>/&gt;</span><br><span class="line">    &lt;/g&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line"></span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;0&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> /&gt;</span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;100&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">  &lt;use href<span class="operator">=</span><span class="string">&quot;#myCircle&quot;</span> x<span class="operator">=</span><span class="string">&quot;200&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> fill<span class="operator">=</span><span class="string">&quot;white&quot;</span> stroke<span class="operator">=</span><span class="string">&quot;blue&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="pattern-æ ‡ç­¾"><code>&lt;pattern&gt;</code>æ ‡ç­¾ <a href="about:blank#pattern%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;pattern&gt;</code>æ ‡ç­¾ç”¨äºè‡ªå®šä¹‰ä¸€ä¸ªå½¢çŠ¶ï¼Œè¯¥å½¢çŠ¶å¯ä»¥è¢«å¼•ç”¨æ¥å¹³é“ºä¸€ä¸ªåŒºåŸŸã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;500&quot;</span> height<span class="operator">=</span><span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  &lt;defs&gt;</span><br><span class="line">    &lt;pattern id<span class="operator">=</span><span class="string">&quot;dots&quot;</span> x<span class="operator">=</span><span class="string">&quot;0&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> width<span class="operator">=</span><span class="string">&quot;100&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span> patternUnits<span class="operator">=</span><span class="string">&quot;userSpaceOnUse&quot;</span>&gt;</span><br><span class="line">      &lt;circle fill<span class="operator">=</span><span class="string">&quot;#bee9e8&quot;</span> cx<span class="operator">=</span><span class="string">&quot;50&quot;</span> cy<span class="operator">=</span><span class="string">&quot;50&quot;</span> r<span class="operator">=</span><span class="string">&quot;35&quot;</span> /&gt;</span><br><span class="line">    &lt;/pattern&gt;</span><br><span class="line">  &lt;/defs&gt;</span><br><span class="line">  &lt;rect x<span class="operator">=</span><span class="string">&quot;0&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> width<span class="operator">=</span><span class="string">&quot;100%&quot;</span> height<span class="operator">=</span><span class="string">&quot;100%&quot;</span> fill<span class="operator">=</span><span class="string">&quot;url(#dots)&quot;</span> /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;pattern&gt;</code>æ ‡ç­¾å°†ä¸€ä¸ªåœ†å½¢å®šä¹‰ä¸º<code>dots</code>æ¨¡å¼ã€‚<code>patternUnits=&quot;userSpaceOnUse&quot;</code>è¡¨ç¤º<code>&lt;pattern&gt;</code>çš„å®½åº¦å’Œé•¿åº¦æ˜¯å®é™…çš„åƒç´ å€¼ã€‚ç„¶åï¼ŒæŒ‡å®šè¿™ä¸ªæ¨¡å¼å»å¡«å……ä¸‹é¢çš„çŸ©å½¢ã€‚</p><h3 id="image-æ ‡ç­¾"><code>&lt;image&gt;</code>æ ‡ç­¾ <a href="about:blank#image%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;image&gt;</code>æ ‡ç­¾ç”¨äºæ’å…¥å›¾ç‰‡æ–‡ä»¶ã€‚</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg viewBox=<span class="string">&quot;0 0 100 100&quot;</span> width=<span class="string">&quot;100&quot;</span> height=<span class="string">&quot;100&quot;</span>&gt;</span><br><span class="line">  &lt;image xlink:href=<span class="string">&quot;path/to/image.jpg&quot;</span></span><br><span class="line">    width=<span class="string">&quot;50%&quot;</span> height=<span class="string">&quot;50%&quot;</span>/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;image&gt;</code>çš„<code>xlink:href</code>å±æ€§è¡¨ç¤ºå›¾åƒçš„æ¥æºã€‚</p><h3 id="animate-æ ‡ç­¾"><code>&lt;animate&gt;</code>æ ‡ç­¾ <a href="about:blank#animate%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;animate&gt;</code>æ ‡ç­¾ç”¨äºäº§ç”ŸåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;500px&quot;</span> height<span class="operator">=</span><span class="string">&quot;500px&quot;</span>&gt;</span><br><span class="line">  &lt;rect x<span class="operator">=</span><span class="string">&quot;0&quot;</span> y<span class="operator">=</span><span class="string">&quot;0&quot;</span> width<span class="operator">=</span><span class="string">&quot;100&quot;</span> height<span class="operator">=</span><span class="string">&quot;100&quot;</span> fill<span class="operator">=</span><span class="string">&quot;#feac5e&quot;</span>&gt;</span><br><span class="line">    &lt;animate attributeName<span class="operator">=</span><span class="string">&quot;x&quot;</span> from<span class="operator">=</span><span class="string">&quot;0&quot;</span> to<span class="operator">=</span><span class="string">&quot;500&quot;</span> dur<span class="operator">=</span><span class="string">&quot;2s&quot;</span> repeatCount<span class="operator">=</span><span class="string">&quot;indefinite&quot;</span> /&gt;</span><br><span class="line">  &lt;/rect&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒçŸ©å½¢ä¼šä¸æ–­ç§»åŠ¨ï¼Œäº§ç”ŸåŠ¨ç”»æ•ˆæœã€‚</p><p><code>&lt;animate&gt;</code>çš„å±æ€§å«ä¹‰å¦‚ä¸‹ã€‚</p><blockquote><ul><li>attributeNameï¼šå‘ç”ŸåŠ¨ç”»æ•ˆæœçš„å±æ€§åã€‚</li><li>fromï¼šå•æ¬¡åŠ¨ç”»çš„åˆå§‹å€¼ã€‚</li><li>toï¼šå•æ¬¡åŠ¨ç”»çš„ç»“æŸå€¼ã€‚</li><li>durï¼šå•æ¬¡åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚</li><li>repeatCountï¼šåŠ¨ç”»çš„å¾ªç¯æ¨¡å¼ã€‚</li></ul></blockquote><p>å¯ä»¥åœ¨å¤šä¸ªå±æ€§ä¸Šé¢å®šä¹‰åŠ¨ç”»ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;animate attributeName<span class="operator">=</span><span class="string">&quot;x&quot;</span> from<span class="operator">=</span><span class="string">&quot;0&quot;</span> to<span class="operator">=</span><span class="string">&quot;500&quot;</span> dur<span class="operator">=</span><span class="string">&quot;2s&quot;</span> repeatCount<span class="operator">=</span><span class="string">&quot;indefinite&quot;</span> /&gt;</span><br><span class="line">&lt;animate attributeName<span class="operator">=</span><span class="string">&quot;width&quot;</span> to<span class="operator">=</span><span class="string">&quot;500&quot;</span> dur<span class="operator">=</span><span class="string">&quot;2s&quot;</span> repeatCount<span class="operator">=</span><span class="string">&quot;indefinite&quot;</span> /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="animateTransform-æ ‡ç­¾"><code>&lt;animateTransform&gt;</code>æ ‡ç­¾ <a href="about:blank#animatetransform%E6%A0%87%E7%AD%BE">#</a></h3><p><code>&lt;animate&gt;</code>æ ‡ç­¾å¯¹ CSS çš„<code>transform</code>å±æ€§ä¸èµ·ä½œç”¨ï¼Œå¦‚æœéœ€è¦å˜å½¢ï¼Œå°±è¦ä½¿ç”¨<code>&lt;animateTransform&gt;</code>æ ‡ç­¾ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg width<span class="operator">=</span><span class="string">&quot;500px&quot;</span> height<span class="operator">=</span><span class="string">&quot;500px&quot;</span>&gt;</span><br><span class="line">  &lt;rect x<span class="operator">=</span><span class="string">&quot;250&quot;</span> y<span class="operator">=</span><span class="string">&quot;250&quot;</span> width<span class="operator">=</span><span class="string">&quot;50&quot;</span> height<span class="operator">=</span><span class="string">&quot;50&quot;</span> fill<span class="operator">=</span><span class="string">&quot;#4bc0c8&quot;</span>&gt;</span><br><span class="line">    &lt;animateTransform attributeName<span class="operator">=</span><span class="string">&quot;transform&quot;</span> type<span class="operator">=</span><span class="string">&quot;rotate&quot;</span> begin<span class="operator">=</span><span class="string">&quot;0s&quot;</span> dur<span class="operator">=</span><span class="string">&quot;10s&quot;</span> from<span class="operator">=</span><span class="string">&quot;0 200 200&quot;</span> to<span class="operator">=</span><span class="string">&quot;360 400 400&quot;</span> repeatCount<span class="operator">=</span><span class="string">&quot;indefinite&quot;</span> /&gt;</span><br><span class="line">  &lt;/rect&gt;</span><br><span class="line">&lt;/svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;animateTransform&gt;</code>çš„æ•ˆæœä¸ºæ—‹è½¬ï¼ˆ<code>rotate</code>ï¼‰ï¼Œè¿™æ—¶<code>from</code>å’Œ<code>to</code>å±æ€§å€¼æœ‰ä¸‰ä¸ªæ•°å­—ï¼Œç¬¬ä¸€ä¸ªæ•°å­—æ˜¯è§’åº¦å€¼ï¼Œç¬¬äºŒä¸ªå€¼å’Œç¬¬ä¸‰ä¸ªå€¼æ˜¯æ—‹è½¬ä¸­å¿ƒçš„åæ ‡ã€‚<code>from=&quot;0 200 200&quot;</code>è¡¨ç¤ºå¼€å§‹æ—¶ï¼Œè§’åº¦ä¸º0ï¼Œå›´ç»•<code>(200, 200)</code>å¼€å§‹æ—‹è½¬ï¼›<code>to=&quot;360 400 400&quot;</code>è¡¨ç¤ºç»“æŸæ—¶ï¼Œè§’åº¦ä¸º360ï¼Œå›´ç»•<code>(400, 400)</code>æ—‹è½¬ã€‚</p><h2 id="JavaScript-æ“ä½œ">JavaScript æ“ä½œ <a href="about:blank#javascript-%E6%93%8D%E4%BD%9C">#</a></h2><h3 id="DOM-æ“ä½œ">DOM æ“ä½œ <a href="about:blank#dom-%E6%93%8D%E4%BD%9C">#</a></h3><p>å¦‚æœ SVG ä»£ç ç›´æ¥å†™åœ¨ HTML ç½‘é¡µä¹‹ä¸­ï¼Œå®ƒå°±æˆä¸ºç½‘é¡µ DOM çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç›´æ¥ç”¨ DOM æ“ä½œã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg</span><br><span class="line">  id<span class="operator">=</span><span class="string">&quot;mysvg&quot;</span></span><br><span class="line">  xmlns<span class="operator">=</span><span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span><br><span class="line">  viewBox<span class="operator">=</span><span class="string">&quot;0 0 800 600&quot;</span></span><br><span class="line">  preserveAspectRatio<span class="operator">=</span><span class="string">&quot;xMidYMid meet&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">  &lt;circle id<span class="operator">=</span><span class="string">&quot;mycircle&quot;</span> cx<span class="operator">=</span><span class="string">&quot;400&quot;</span> cy<span class="operator">=</span><span class="string">&quot;300&quot;</span> r<span class="operator">=</span><span class="string">&quot;50&quot;</span> /&gt;</span><br><span class="line">&lt;svg&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ’å…¥ç½‘é¡µä¹‹åï¼Œå°±å¯ä»¥ç”¨ CSS å®šåˆ¶æ ·å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">circle</span> &#123;</span><br><span class="line">  <span class="attribute">stroke-width</span>: <span class="number">5</span>;</span><br><span class="line">  <span class="attribute">stroke</span>: <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#ff0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">circle</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">stroke</span>: <span class="number">#090</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå¯ä»¥ç”¨ JavaScript ä»£ç æ“ä½œ SVGã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mycircle = document.getElementById(<span class="string">&#x27;mycircle&#x27;</span>);</span><br><span class="line"></span><br><span class="line">mycircle.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;circle clicked - enlarging&#x27;</span>);</span><br><span class="line">  mycircle.setAttribute(<span class="string">&#x27;r&#x27;</span>, <span class="number">60</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æŒ‡å®šï¼Œå¦‚æœç‚¹å‡»å›¾å½¢ï¼Œå°±æ”¹å†™<code>circle</code>å…ƒç´ çš„<code>r</code>å±æ€§ã€‚</p><h3 id="è·å–-SVG-DOM">è·å– SVG DOM <a href="about:blank#%E8%8E%B7%E5%8F%96-svg-dom">#</a></h3><p>ä½¿ç”¨<code>&lt;object&gt;</code>ã€<code>&lt;iframe&gt;</code>ã€<code>&lt;embed&gt;</code>æ ‡ç­¾æ’å…¥ SVG æ–‡ä»¶ï¼Œå¯ä»¥è·å– SVG DOMã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> svgObject = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;object&#x27;</span>).contentDocument;</span><br><span class="line"><span class="keyword">var</span> svgIframe = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;iframe&#x27;</span>).contentDocument;</span><br><span class="line"><span class="keyword">var</span> svgEmbed = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;embed&#x27;</span>).getSVGDocument();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨<code>&lt;img&gt;</code>æ ‡ç­¾æ’å…¥ SVG æ–‡ä»¶ï¼Œå°±æ— æ³•è·å– SVG DOMã€‚</p><h3 id="è¯»å–-SVG-æºç ">è¯»å– SVG æºç  <a href="about:blank#%E8%AF%BB%E5%8F%96-svg-%E6%BA%90%E7%A0%81">#</a></h3><p>ç”±äº SVG æ–‡ä»¶å°±æ˜¯ä¸€æ®µ XML æ–‡æœ¬ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¯»å– XML ä»£ç çš„æ–¹å¼ï¼Œè¯»å– SVG æºç ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;svg-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xml:space</span>=<span class="string">&quot;preserve&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;440&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- svg code --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>XMLSerializer</code>å®ä¾‹çš„<code>serializeToString()</code>æ–¹æ³•ï¼Œè·å– SVG å…ƒç´ çš„ä»£ç ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> svgString = <span class="keyword">new</span> XMLSerializer()</span><br><span class="line">  .serializeToString(<span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&#x27;svg&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SVG-å›¾åƒè½¬ä¸º-Canvas-å›¾åƒ">SVG å›¾åƒè½¬ä¸º Canvas å›¾åƒ <a href="about:blank#svg-%E5%9B%BE%E5%83%8F%E8%BD%AC%E4%B8%BA-canvas-%E5%9B%BE%E5%83%8F">#</a></h3><p>é¦–å…ˆï¼Œéœ€è¦æ–°å»ºä¸€ä¸ª<code>Image</code>å¯¹è±¡ï¼Œå°† SVG å›¾åƒæŒ‡å®šåˆ°è¯¥<code>Image</code>å¯¹è±¡çš„<code>src</code>å±æ€§ã€‚</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line"><span class="keyword">var</span> svg = <span class="keyword">new</span> Blob([svgString], &#123;type: <span class="string">&quot;image/svg+xml;charset=utf-8&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> DOMURL = <span class="symbol">self</span>.URL || <span class="symbol">self</span>.webkitURL || <span class="symbol">self</span>;</span><br><span class="line"><span class="keyword">var</span> url = DOMURL.createObjectURL(svg);</span><br><span class="line"></span><br><span class="line">img.src = url;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå½“å›¾åƒåŠ è½½å®Œæˆåï¼Œå†å°†å®ƒç»˜åˆ¶åˆ°<code>&lt;canvas&gt;</code>å…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">  ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹ï¼šæŠ˜çº¿å›¾">å®ä¾‹ï¼šæŠ˜çº¿å›¾ <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%8A%98%E7%BA%BF%E5%9B%BE">#</a></h2><p>ä¸‹é¢å°†ä¸€å¼ æ•°æ®è¡¨æ ¼ç”»æˆæŠ˜çº¿å›¾ã€‚</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Date |Amount</span><br><span class="line">-----|------</span><br><span class="line">2014<span class="string">-01</span><span class="string">-01</span> | $10</span><br><span class="line">2014<span class="string">-02</span><span class="string">-01</span> | $20</span><br><span class="line">2014<span class="string">-03</span><span class="string">-01</span> | $40</span><br><span class="line">2014<span class="string">-04</span><span class="string">-01</span> | $80</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å›¾å½¢ï¼Œå¯ä»¥ç”»æˆä¸€ä¸ªåæ ‡ç³»ï¼Œ<code>Date</code>ä½œä¸ºæ¨ªè½´ï¼Œ<code>Amount</code>ä½œä¸ºçºµè½´ï¼Œå››è¡Œæ•°æ®ç”»æˆä¸€ä¸ªæ•°æ®ç‚¹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;350&quot;</span> <span class="attr">height</span>=<span class="string">&quot;160&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span> <span class="attr">class</span>=<span class="string">&quot;layer&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(60,10)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">r</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;105&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">r</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;90&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;90&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">r</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;180&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;60&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">r</span>=<span class="string">&quot;2&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;270&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;0,105 90,90 180,60 270,0&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;red&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span> <span class="attr">class</span>=<span class="string">&quot;y axis&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;120&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stroke:black;stroke-width:1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;-40&quot;</span> <span class="attr">y</span>=<span class="string">&quot;115&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;5&quot;</span>&gt;</span>$10<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;-40&quot;</span> <span class="attr">y</span>=<span class="string">&quot;5&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;5&quot;</span>&gt;</span>$80<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span> <span class="attr">class</span>=<span class="string">&quot;x axis&quot;</span> <span class="attr">transform</span>=<span class="string">&quot;translate(0, 120)&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;270&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stroke:black;stroke-width:1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;-10&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20&quot;</span>&gt;</span>Jan.<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;255&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20&quot;</span>&gt;</span>Apr.<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li>Jon McPartland, <a href="http://bigbitecreative.com/introduction-svg-animation/">An introduction to SVG animation</a></li><li>Alexander Goedde, <a href="http://tavendo.com/blog/post/super-vector-graphics/">SVG - Super Vector Graphics</a></li><li>Joseph Wegner, <a href="http://flippinawesome.org/2014/02/03/learning-svg/">Learning SVG</a></li><li>biovisualize, <a href="http://bl.ocks.org/biovisualize/8187844">Direct svg to canvas to png conversion</a></li><li>Tyler Sticka, <a href="https://cloudfour.com/thinks/cropping-image-thumbnails-with-svg/">Cropping Image Thumbnails with SVG</a></li><li>Adi Purdila, <a href="https://webdesign.tutsplus.com/tutorials/how-to-create-a-loader-icon-with-svg-animations--cms-31542">How to Create a Loader Icon With SVG Animations</a></li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/svg">https://wangdoc.com/webapi/svg</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">SVG å›¾åƒ</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Server-Sent Events</title>
    <link href="https://www.hacp.top/posts/47.html"/>
    <id>https://www.hacp.top/posts/47.html</id>
    <published>2023-07-15T10:19:03.000Z</published>
    <updated>2023-07-15T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Server-Sent Events</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œæœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆã€‚é™¤äº†â€œè½®è¯¢â€ å’Œ WebSocketï¼ŒHTML 5 è¿˜æä¾›äº† Server-Sent Eventsï¼ˆä»¥ä¸‹ç®€ç§° SSEï¼‰ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒHTTP åè®®åªèƒ½å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸èƒ½ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ã€‚ä½†æ˜¯æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å£°æ˜ï¼Œæ¥ä¸‹æ¥è¦å‘é€çš„æ˜¯æµä¿¡æ¯ï¼ˆstreamingï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€çš„ä¸æ˜¯ä¸€æ¬¡æ€§çš„æ•°æ®åŒ…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œä¼šè¿ç»­ä¸æ–­åœ°å‘é€è¿‡æ¥ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå…³é—­è¿æ¥ï¼Œä¼šä¸€ç›´ç­‰ç€æœåŠ¡å™¨å‘è¿‡æ¥çš„æ–°çš„æ•°æ®æµã€‚æœ¬è´¨ä¸Šï¼Œè¿™ç§é€šä¿¡å°±æ˜¯ä»¥æµä¿¡æ¯çš„æ–¹å¼ï¼Œå®Œæˆä¸€æ¬¡ç”¨æ—¶å¾ˆé•¿çš„ä¸‹è½½ã€‚</p><p>SSE å°±æ˜¯åˆ©ç”¨è¿™ç§æœºåˆ¶ï¼Œä½¿ç”¨æµä¿¡æ¯å‘æµè§ˆå™¨æ¨é€ä¿¡æ¯ã€‚å®ƒåŸºäº HTTP åè®®ï¼Œç›®å‰é™¤äº† IE/Edgeï¼Œå…¶ä»–æµè§ˆå™¨éƒ½æ”¯æŒã€‚</p><h2 id="ä¸-WebSocket-çš„æ¯”è¾ƒ">ä¸ WebSocket çš„æ¯”è¾ƒ <a href="about:blank#%E4%B8%8E-websocket-%E7%9A%84%E6%AF%94%E8%BE%83">#</a></h2><p>SSE ä¸ WebSocket ä½œç”¨ç›¸ä¼¼ï¼Œéƒ½æ˜¯å»ºç«‹æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ¸ é“ï¼Œç„¶åæœåŠ¡å™¨å‘æµè§ˆå™¨æ¨é€ä¿¡æ¯ã€‚</p><p>æ€»ä½“æ¥è¯´ï¼ŒWebSocket æ›´å¼ºå¤§å’Œçµæ´»ã€‚å› ä¸ºå®ƒæ˜¯å…¨åŒå·¥é€šé“ï¼Œå¯ä»¥åŒå‘é€šä¿¡ï¼›SSE æ˜¯å•å‘é€šé“ï¼Œåªèƒ½æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€ï¼Œå› ä¸º streaming æœ¬è´¨ä¸Šå°±æ˜¯ä¸‹è½½ã€‚å¦‚æœæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œå°±å˜æˆäº†å¦ä¸€æ¬¡ HTTP è¯·æ±‚ã€‚</p><p>ä½†æ˜¯ï¼ŒSSE ä¹Ÿæœ‰è‡ªå·±çš„ä¼˜ç‚¹ã€‚</p><ul><li>SSE ä½¿ç”¨ HTTP åè®®ï¼Œç°æœ‰çš„æœåŠ¡å™¨è½¯ä»¶éƒ½æ”¯æŒã€‚WebSocket æ˜¯ä¸€ä¸ªç‹¬ç«‹åè®®ã€‚</li><li>SSE å±äºè½»é‡çº§ï¼Œä½¿ç”¨ç®€å•ï¼›WebSocket åè®®ç›¸å¯¹å¤æ‚ã€‚</li><li>SSE é»˜è®¤æ”¯æŒæ–­çº¿é‡è¿ï¼ŒWebSocket éœ€è¦è‡ªå·±å®ç°æ–­çº¿é‡è¿ã€‚</li><li>SSE ä¸€èˆ¬åªç”¨æ¥ä¼ é€æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶æ•°æ®éœ€è¦ç¼–ç åä¼ é€ï¼ŒWebSocket é»˜è®¤æ”¯æŒä¼ é€äºŒè¿›åˆ¶æ•°æ®ã€‚</li><li>SSE æ”¯æŒè‡ªå®šä¹‰å‘é€çš„æ¶ˆæ¯ç±»å‹ã€‚</li></ul><p>å› æ­¤ï¼Œä¸¤è€…å„æœ‰ç‰¹ç‚¹ï¼Œé€‚åˆä¸åŒçš„åœºåˆã€‚</p><h2 id="å®¢æˆ·ç«¯-API">å®¢æˆ·ç«¯ API <a href="about:blank#%E5%AE%A2%E6%88%B7%E7%AB%AF-api">#</a></h2><h3 id="EventSource-å¯¹è±¡">EventSource å¯¹è±¡ <a href="about:blank#eventsource-%E5%AF%B9%E8%B1%A1">#</a></h3><p>SSE çš„å®¢æˆ·ç«¯ API éƒ¨ç½²åœ¨<code>EventSource</code>å¯¹è±¡ä¸Šã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ SSEã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;EventSource&#x27;</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ SSE æ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆç”Ÿæˆä¸€ä¸ª<code>EventSource</code>å®ä¾‹ï¼Œå‘æœåŠ¡å™¨å‘èµ·è¿æ¥ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(<span class="built_in">url</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>url</code>å¯ä»¥ä¸å½“å‰ç½‘å€åŒåŸŸï¼Œä¹Ÿå¯ä»¥è·¨åŸŸã€‚è·¨åŸŸæ—¶ï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ï¼Œæ‰“å¼€<code>withCredentials</code>å±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦ä¸€èµ·å‘é€ Cookieã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(<span class="built_in">url</span>, &#123; <span class="attribute">withCredentials</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="readyState-å±æ€§">readyState å±æ€§ <a href="about:blank#readystate-%E5%B1%9E%E6%80%A7">#</a></h3><p><code>EventSource</code>å®ä¾‹çš„<code>readyState</code>å±æ€§ï¼Œè¡¨æ˜è¿æ¥çš„å½“å‰çŠ¶æ€ã€‚è¯¥å±æ€§åªè¯»ï¼Œå¯ä»¥å–ä»¥ä¸‹å€¼ã€‚</p><ul><li>0ï¼šç›¸å½“äºå¸¸é‡<code>EventSource.CONNECTING</code>ï¼Œè¡¨ç¤ºè¿æ¥è¿˜æœªå»ºç«‹ï¼Œæˆ–è€…æ–­çº¿æ­£åœ¨é‡è¿ã€‚</li><li>1ï¼šç›¸å½“äºå¸¸é‡<code>EventSource.OPEN</code>ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»å»ºç«‹ï¼Œå¯ä»¥æ¥å—æ•°æ®ã€‚</li><li>2ï¼šç›¸å½“äºå¸¸é‡<code>EventSource.CLOSED</code>ï¼Œè¡¨ç¤ºè¿æ¥å·²æ–­ï¼Œä¸”ä¸ä¼šé‡è¿ã€‚</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(url);</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(source.readyState);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="url-å±æ€§">url å±æ€§ <a href="about:blank#url-%E5%B1%9E%E6%80%A7">#</a></h3><p><code>EventSource</code>å®ä¾‹çš„<code>url</code>å±æ€§è¿”å›è¿æ¥çš„ç½‘å€ï¼Œè¯¥å±æ€§åªè¯»ã€‚</p><h3 id="withCredentials-å±æ€§">withCredentials å±æ€§ <a href="about:blank#withcredentials-%E5%B1%9E%E6%80%A7">#</a></h3><p><code>EventSource</code>å®ä¾‹çš„<code>withCredentials</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹æ˜¯å¦å¼€å¯ CORS çš„<code>withCredentials</code>ã€‚è¯¥å±æ€§åªè¯»ï¼Œé»˜è®¤æ˜¯<code>false</code>ã€‚</p><h3 id="onopen-å±æ€§">onopen å±æ€§ <a href="about:blank#onopen-%E5%B1%9E%E6%80%A7">#</a></h3><p>è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œå°±ä¼šè§¦å‘<code>open</code>äº‹ä»¶ï¼Œå¯ä»¥åœ¨<code>onopen</code>å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">source.onopen = <span class="keyword">function</span> <span class="params">(event)</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">source.addEventListener(<span class="string">&#x27;open&#x27;</span>, <span class="keyword">function</span> <span class="params">(event)</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="onmessage-å±æ€§">onmessage å±æ€§ <a href="about:blank#onmessage-%E5%B1%9E%E6%80%A7">#</a></h3><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„æ•°æ®ï¼Œå°±ä¼šè§¦å‘<code>message</code>äº‹ä»¶ï¼Œå¯ä»¥åœ¨<code>onmessage</code>å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">source.onmessage = function (<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">event</span>.data;</span><br><span class="line">  <span class="keyword">var</span> origin = <span class="keyword">event</span>.origin;</span><br><span class="line">  <span class="keyword">var</span> lastEventId = <span class="keyword">event</span>.lastEventId;</span><br><span class="line">  <span class="comment">// handle message</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">source.addEventListener(<span class="string">&#x27;message&#x27;</span>, function (<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">event</span>.data;</span><br><span class="line">  <span class="keyword">var</span> origin = <span class="keyword">event</span>.origin;</span><br><span class="line">  <span class="keyword">var</span> lastEventId = <span class="keyword">event</span>.lastEventId;</span><br><span class="line">  <span class="comment">// handle message</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°å¯¹è±¡<code>event</code>æœ‰å¦‚ä¸‹å±æ€§ã€‚</p><ul><li><code>data</code>ï¼šæœåŠ¡å™¨ç«¯ä¼ å›çš„æ•°æ®ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰ã€‚</li><li><code>origin</code>ï¼š æœåŠ¡å™¨ URL çš„åŸŸåéƒ¨åˆ†ï¼Œå³åè®®ã€åŸŸåå’Œç«¯å£ï¼Œè¡¨ç¤ºæ¶ˆæ¯çš„æ¥æºã€‚</li><li><code>lastEventId</code>ï¼šæ•°æ®çš„ç¼–å·ï¼Œç”±æœåŠ¡å™¨ç«¯å‘é€ã€‚å¦‚æœæ²¡æœ‰ç¼–å·ï¼Œè¿™ä¸ªå±æ€§ä¸ºç©ºã€‚</li></ul><h3 id="onerror-å±æ€§">onerror å±æ€§ <a href="about:blank#onerror-%E5%B1%9E%E6%80%A7">#</a></h3><p>å¦‚æœå‘ç”Ÿé€šä¿¡é”™è¯¯ï¼ˆæ¯”å¦‚è¿æ¥ä¸­æ–­ï¼‰ï¼Œå°±ä¼šè§¦å‘<code>error</code>äº‹ä»¶ï¼Œå¯ä»¥åœ¨<code>onerror</code>å±æ€§å®šä¹‰å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">source.onerror = <span class="keyword">function</span> <span class="params">(event)</span> &#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">source.addEventListener(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span> <span class="params">(event)</span> &#123;</span><br><span class="line">  <span class="comment">// handle error event</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰äº‹ä»¶">è‡ªå®šä¹‰äº‹ä»¶ <a href="about:blank#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6">#</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å‘æ¥çš„æ•°æ®ï¼Œæ€»æ˜¯è§¦å‘æµè§ˆå™¨<code>EventSource</code>å®ä¾‹çš„<code>message</code>äº‹ä»¶ã€‚å¼€å‘è€…è¿˜å¯ä»¥è‡ªå®šä¹‰ SSE äº‹ä»¶ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€å›æ¥çš„æ•°æ®ä¸ä¼šè§¦å‘<code>message</code>äº‹ä»¶ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">source.addEventListener(<span class="string">&#x27;foo&#x27;</span>, function (<span class="keyword">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = <span class="keyword">event</span>.data;</span><br><span class="line">  <span class="keyword">var</span> origin = <span class="keyword">event</span>.origin;</span><br><span class="line">  <span class="keyword">var</span> lastEventId = <span class="keyword">event</span>.lastEventId;</span><br><span class="line">  <span class="comment">// handle message</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæµè§ˆå™¨å¯¹ SSE çš„<code>foo</code>äº‹ä»¶è¿›è¡Œç›‘å¬ã€‚å¦‚ä½•å®ç°æœåŠ¡å™¨å‘é€<code>foo</code>äº‹ä»¶ï¼Œè¯·çœ‹ä¸‹æ–‡ã€‚</p><h3 id="close-æ–¹æ³•">close() æ–¹æ³• <a href="about:blank#close-%E6%96%B9%E6%B3%95">#</a></h3><p><code>close</code>æ–¹æ³•ç”¨äºå…³é—­ SSE è¿æ¥ã€‚</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span>.<span class="keyword">close</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡å™¨å®ç°">æœåŠ¡å™¨å®ç° <a href="about:blank#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0">#</a></h2><h3 id="æ•°æ®æ ¼å¼">æ•°æ®æ ¼å¼ <a href="about:blank#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F">#</a></h3><p>æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€çš„ SSE æ•°æ®ï¼Œå¿…é¡»æ˜¯ UTF-8 ç¼–ç çš„æ–‡æœ¬ï¼Œå…·æœ‰å¦‚ä¸‹çš„ HTTP å¤´ä¿¡æ¯ã€‚</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">Content-Type:</span> text<span class="symbol">/event-stream</span></span><br><span class="line"><span class="params">Cache-Control:</span> no-cache</span><br><span class="line"><span class="params">Connection:</span> keep-alive</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰è¡Œä¹‹ä¸­ï¼Œç¬¬ä¸€è¡Œçš„<code>Content-Type</code>å¿…é¡»æŒ‡å®š MIME ç±»å‹ä¸º<code>event-steam</code>ã€‚</p><p>æ¯ä¸€æ¬¡å‘é€çš„ä¿¡æ¯ï¼Œç”±è‹¥å¹²ä¸ª<code>message</code>ç»„æˆï¼Œæ¯ä¸ª<code>message</code>ä¹‹é—´ç”¨<code>\n\n</code>åˆ†éš”ã€‚æ¯ä¸ª<code>message</code>å†…éƒ¨ç”±è‹¥å¹²è¡Œç»„æˆï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯å¦‚ä¸‹æ ¼å¼ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">field</span>]: <span class="link">value\n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>field</code>å¯ä»¥å–å››ä¸ªå€¼ã€‚</p><ul><li>data</li><li>event</li><li>id</li><li>retry</li></ul><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥æœ‰å†’å·å¼€å¤´çš„è¡Œï¼Œè¡¨ç¤ºæ³¨é‡Šã€‚é€šå¸¸ï¼ŒæœåŠ¡å™¨æ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šå‘æµè§ˆå™¨å‘é€ä¸€ä¸ªæ³¨é‡Šï¼Œä¿æŒè¿æ¥ä¸ä¸­æ–­ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">: This <span class="keyword">is</span> a <span class="keyword">comment</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">: this is a test stream<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">data: some text<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">data: another message<span class="symbol">\n</span></span><br><span class="line">data: with two lines <span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="data-å­—æ®µ">data å­—æ®µ <a href="about:blank#data-%E5%AD%97%E6%AE%B5">#</a></h3><p>æ•°æ®å†…å®¹ç”¨<code>data</code>å­—æ®µè¡¨ç¤ºã€‚</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span>:  message\n\n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œï¼Œæœ€åä¸€è¡Œç”¨<code>\n\n</code>ç»“å°¾ï¼Œå‰é¢è¡Œéƒ½ç”¨<code>\n</code>ç»“å°¾ã€‚</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data: <span class="keyword">begin</span> <span class="keyword">message</span>\n</span><br><span class="line">data: <span class="keyword">continue</span> <span class="keyword">message</span>\n\n</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ JSON æ•°æ®çš„ä¾‹å­ã€‚</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">data:</span> &#123;\n</span><br><span class="line"><span class="symbol">data:</span> <span class="string">&quot;foo&quot;</span>: <span class="string">&quot;bar&quot;</span>,\n</span><br><span class="line"><span class="symbol">data:</span> <span class="string">&quot;baz&quot;</span>, <span class="number">555</span>\n</span><br><span class="line"><span class="symbol">data:</span> &#125;\n\n</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="id-å­—æ®µ">id å­—æ®µ <a href="about:blank#id-%E5%AD%97%E6%AE%B5">#</a></h3><p>æ•°æ®æ ‡è¯†ç¬¦ç”¨<code>id</code>å­—æ®µè¡¨ç¤ºï¼Œç›¸å½“äºæ¯ä¸€æ¡æ•°æ®çš„ç¼–å·ã€‚</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id: msg1<span class="symbol">\n</span></span><br><span class="line">data: message<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨ç”¨<code>lastEventId</code>å±æ€§è¯»å–è¿™ä¸ªå€¼ã€‚ä¸€æ—¦è¿æ¥æ–­çº¿ï¼Œæµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ª HTTP å¤´ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„<code>Last-Event-ID</code>å¤´ä¿¡æ¯ï¼Œå°†è¿™ä¸ªå€¼å‘é€å›æ¥ï¼Œç”¨æ¥å¸®åŠ©æœåŠ¡å™¨ç«¯é‡å»ºè¿æ¥ã€‚å› æ­¤ï¼Œè¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥è¢«è§†ä¸ºä¸€ç§åŒæ­¥æœºåˆ¶ã€‚</p><h3 id="event-å­—æ®µ">event å­—æ®µ <a href="about:blank#event-%E5%AD%97%E6%AE%B5">#</a></h3><p><code>event</code>å­—æ®µè¡¨ç¤ºè‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹ï¼Œé»˜è®¤æ˜¯<code>message</code>äº‹ä»¶ã€‚æµè§ˆå™¨å¯ä»¥ç”¨<code>addEventListener()</code>ç›‘å¬è¯¥äº‹ä»¶ã€‚</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">event: foo<span class="symbol">\n</span></span><br><span class="line">data: a foo event<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">data: an unnamed event<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">event: bar<span class="symbol">\n</span></span><br><span class="line">data: a bar event<span class="symbol">\n</span><span class="symbol">\n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›é€ äº†ä¸‰æ¡ä¿¡æ¯ã€‚ç¬¬ä¸€æ¡çš„åå­—æ˜¯<code>foo</code>ï¼Œè§¦å‘æµè§ˆå™¨çš„<code>foo</code>äº‹ä»¶ï¼›ç¬¬äºŒæ¡æœªå–åï¼Œè¡¨ç¤ºé»˜è®¤ç±»å‹ï¼Œè§¦å‘æµè§ˆå™¨çš„<code>message</code>äº‹ä»¶ï¼›ç¬¬ä¸‰æ¡æ˜¯<code>bar</code>ï¼Œè§¦å‘æµè§ˆå™¨çš„<code>bar</code>äº‹ä»¶ã€‚</p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">event:</span> userconnect</span><br><span class="line"><span class="symbol">data:</span> &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="string">&quot;time&quot;</span>: <span class="string">&quot;02:33:48&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">event:</span> usermessage</span><br><span class="line"><span class="symbol">data:</span> &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="string">&quot;time&quot;</span>: <span class="string">&quot;02:34:11&quot;</span>, <span class="string">&quot;text&quot;</span>: <span class="string">&quot;Hi everyone.&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">event:</span> userdisconnect</span><br><span class="line"><span class="symbol">data:</span> &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="string">&quot;time&quot;</span>: <span class="string">&quot;02:34:23&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="symbol">event:</span> usermessage</span><br><span class="line"><span class="symbol">data:</span> &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;sean&quot;</span>, <span class="string">&quot;time&quot;</span>: <span class="string">&quot;02:34:36&quot;</span>, <span class="string">&quot;text&quot;</span>: <span class="string">&quot;Bye, bobby.&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="retry-å­—æ®µ">retry å­—æ®µ <a href="about:blank#retry-%E5%AD%97%E6%AE%B5">#</a></h3><p>æœåŠ¡å™¨å¯ä»¥ç”¨<code>retry</code>å­—æ®µï¼ŒæŒ‡å®šæµè§ˆå™¨é‡æ–°å‘èµ·è¿æ¥çš„æ—¶é—´é—´éš”ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">retry</span>: <span class="number">10000</span>\n</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´æµè§ˆå™¨é‡æ–°å‘èµ·è¿æ¥ï¼šä¸€ç§æ˜¯æ—¶é—´é—´éš”åˆ°æœŸï¼ŒäºŒæ˜¯ç”±äºç½‘ç»œé”™è¯¯ç­‰åŸå› ï¼Œå¯¼è‡´è¿æ¥å‡ºé”™ã€‚</p><h2 id="Node-æœåŠ¡å™¨å®ä¾‹">Node æœåŠ¡å™¨å®ä¾‹ <a href="about:blank#node-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E4%BE%8B">#</a></h2><p>SSE è¦æ±‚æœåŠ¡å™¨ä¸æµè§ˆå™¨ä¿æŒè¿æ¥ã€‚å¯¹äºä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶æ¥è¯´ï¼Œæ‰€æ¶ˆè€—çš„èµ„æºæ˜¯ä¸ä¸€æ ·çš„ã€‚Apache æœåŠ¡å™¨ï¼Œæ¯ä¸ªè¿æ¥å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœè¦ç»´æŒå¤§é‡è¿æ¥ï¼ŒåŠ¿å¿…è¦æ¶ˆè€—å¤§é‡èµ„æºã€‚Node åˆ™æ˜¯æ‰€æœ‰è¿æ¥éƒ½ä½¿ç”¨åŒä¸€ä¸ªçº¿ç¨‹ï¼Œå› æ­¤æ¶ˆè€—çš„èµ„æºä¼šå°å¾—å¤šï¼Œä½†æ˜¯è¿™è¦æ±‚æ¯ä¸ªè¿æ¥ä¸èƒ½åŒ…å«å¾ˆè€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç£ç›˜çš„ IO è¯»å†™ã€‚</p><p>ä¸‹é¢æ˜¯ Node çš„ SSE æœåŠ¡å™¨<a href="http://cjihrig.com/blog/server-sent-events-in-node-js/">å®ä¾‹</a>ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&quot;http&quot;);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="keyword">function</span> (req, res) &#123;</span><br><span class="line">  var fileName = &quot;.&quot; + req.url;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fileName === &quot;./stream&quot;) &#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">      &quot;Content-Type&quot;:&quot;text/event-stream&quot;,</span><br><span class="line">      &quot;Cache-Control&quot;:&quot;no-cache&quot;,</span><br><span class="line">      &quot;Connection&quot;:&quot;keep-alive&quot;,</span><br><span class="line">      &quot;Access-Control-Allow-Origin&quot;: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    res.<span class="keyword">write</span>(&quot;retry: 10000\n&quot;);</span><br><span class="line">    res.<span class="keyword">write</span>(&quot;event: connecttime\n&quot;);</span><br><span class="line">    res.<span class="keyword">write</span>(&quot;data: &quot; + (<span class="built_in">new</span> <span class="type">Date</span>()) + &quot;\n\n&quot;);</span><br><span class="line">    res.<span class="keyword">write</span>(&quot;data: &quot; + (<span class="built_in">new</span> <span class="type">Date</span>()) + &quot;\n\n&quot;);</span><br><span class="line"></span><br><span class="line">    <span class="type">interval</span> = setInterval(<span class="keyword">function</span> () &#123;</span><br><span class="line">      res.<span class="keyword">write</span>(&quot;data: &quot; + (<span class="built_in">new</span> <span class="type">Date</span>()) + &quot;\n\n&quot;);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    req.<span class="keyword">connection</span>.addListener(&quot;close&quot;, <span class="keyword">function</span> () &#123;</span><br><span class="line">      clearInterval(<span class="type">interval</span>);</span><br><span class="line">    &#125;, <span class="keyword">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="keyword">listen</span>(<span class="number">8844</span>, &quot;127.0.0.1&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li>Colin Ihrig, <a href="http://jspro.com/apis/implementing-push-technology-using-server-sent-events/">Implementing Push Technology Using Server-Sent Events</a></li><li>Colin Ihrigï¼Œ<a href="http://cjihrig.com/blog/the-server-side-of-server-sent-events/">The Server Side of Server-Sent Events</a></li><li>Eric Bidelman, <a href="http://www.html5rocks.com/en/tutorials/eventsource/basics/">Stream Updates with Server-Sent Events</a></li><li>MDNï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Server-sent_events/Using_server-sent_events">Using server-sent events</a></li><li><a href="http://Segment.io">Segment.io</a>, <a href="https://segment.io/blog/2014-04-03-server-sent-events-the-simplest-realtime-browser-spec/">Server-Sent Events: The simplest realtime browser spec</a></li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/server-sent-events">https://wangdoc.com/webapi/server-sent-events</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Server-Sent Events</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Response API</title>
    <link href="https://www.hacp.top/posts/46.html"/>
    <id>https://www.hacp.top/posts/46.html</id>
    <published>2023-07-14T10:19:03.000Z</published>
    <updated>2023-07-14T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Response API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>Response()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ„é€ æœåŠ¡å™¨å“åº”ã€‚</p><p><code>fetch()</code>æ–¹æ³•è¿”å›çš„å°±æ˜¯ä¸€ä¸ª Response å¯¹è±¡ã€‚</p><h2 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³• <a href="about:blank#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95">#</a></h2><p><code>Response()</code>ä½œä¸ºæ„é€ æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¿”å› Response å®ä¾‹ã€‚</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰</span></span><br><span class="line"><span class="keyword">new</span> Response([<span class="keyword">body</span>:Object, [init : Object]]): Response</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="keyword">new</span> Response()</span><br><span class="line"><span class="keyword">new</span> Response(<span class="keyword">body</span>)</span><br><span class="line"><span class="keyword">new</span> Response(<span class="keyword">body</span>, options)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ƒå¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯å¯é€‰çš„ã€‚</p><p>ç¬¬ä¸€ä¸ªå‚æ•°<code>body</code>ä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä½“ï¼Œå¿…é¡»æ˜¯ä¸‹é¢ç±»å‹ä¹‹ä¸€ï¼šArrayBufferã€ArrayBufferViewã€Blobã€FormDataã€ReadableStreamã€Stringã€URLSearchParamsã€‚</p><p>ç¬¬äºŒä¸ªå‚æ•°<code>init</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¤´ï¼Œç±»å‹æè¿°å¦‚ä¸‹ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  status: <span class="built_in">Number</span></span><br><span class="line">  statusText: <span class="built_in">String</span></span><br><span class="line">  headers: <span class="built_in">Object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">const myBlob</span> = new Blob();</span><br><span class="line"><span class="attribute">const myOptions</span> = &#123; status: 200, statusText: <span class="string">&quot;OK&quot;</span> &#125;;</span><br><span class="line"><span class="attribute">const myResponse</span> = new Response(myBlob, myOptions);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœè¿”å› JSON æ•°æ®ï¼Œå¿…é¡»å°†å…¶è½¬æˆå­—ç¬¦ä¸²è¿”å›ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  <span class="attr">hello</span>: <span class="string">&quot;world&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data, <span class="literal">null</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">new</span> <span class="title class_">Response</span>(json, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ„é€ ä¸€ä¸ªè¿”å› JSON æ•°æ®çš„ Response å¯¹è±¡ï¼Œå°±å¿…é¡»ç”¨<code>JSON.stringify()</code>æ–¹æ³•ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°è½¬ä¸ºå­—ç¬¦ä¸²ã€‚</p><h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§ <a href="about:blank#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">#</a></h2><h3 id="bodyï¼ŒbodyUsed">bodyï¼ŒbodyUsed <a href="about:blank#bodybodyused">#</a></h3><p><code>body</code>å±æ€§ä»£è¡¨æ•°æ®ä½“ï¼Œæ˜¯ä¸€ä¸ªåªè¯»çš„ ReadableStream å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/fireworks.ogv&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reader = res.<span class="property">body</span>.<span class="title function_">getReader</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result;</span><br><span class="line"><span class="keyword">while</span> (!(result = <span class="keyword">await</span> reader.<span class="title function_">read</span>()).<span class="property">done</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;chunk size:&#x27;</span>, result.<span class="property">value</span>.<span class="property">byteLength</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå…ˆå»ºç«‹ä¸€ä¸ª body çš„è¯»å–å™¨ï¼Œç„¶åæ¯æ¬¡è¯»å–ä¸€æ®µæ•°æ®ï¼Œè¾“å‡ºè¿™æ®µæ•°æ®çš„å­—æ®µé•¿åº¦ã€‚</p><p>æ³¨æ„ï¼Œ<code>body</code>æ˜¯ä¸€ä¸ª Stream å¯¹è±¡ï¼Œåªèƒ½è¯»å–ä¸€æ¬¡ã€‚å–å‡ºæ‰€æœ‰æ•°æ®ä»¥åï¼Œç¬¬äºŒæ¬¡å°±è¯»ä¸åˆ°äº†ã€‚</p><p><code>bodyUsed</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»çš„å¸ƒå°”å€¼ï¼Œè¡¨ç¤º<code>body</code>å±æ€§æ˜¯å¦å·²ç»è¯»å–ã€‚</p><h3 id="headers">headers <a href="about:blank#headers">#</a></h3><p><code>headers</code>å±æ€§ä»£è¡¨æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¤´ï¼Œæ˜¯ä¸€ä¸ªåªè¯»çš„ Headers å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/flowers.jpg&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...res.<span class="property">headers</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå‘å‡ºè¯·æ±‚åï¼Œå±•å¼€æ‰“å°<code>res.headers</code>å±æ€§ï¼Œå³æœåŠ¡å™¨å›åº”çš„æ‰€æœ‰æ¶ˆæ¯å¤´ã€‚</p><h3 id="ok">ok <a href="about:blank#ok">#</a></h3><p><code>ok</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç æ˜¯å¦æˆåŠŸï¼ˆ200åˆ°299ï¼‰ï¼Œè¯¥å±æ€§åªè¯»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/200&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1.<span class="property">ok</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/404&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2.<span class="property">ok</span>); <span class="comment">// false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="redirected">redirected <a href="about:blank#redirected">#</a></h3><p><code>redirected</code>æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç æ˜¯å¦è·³è½¬ç±»å‹ï¼ˆ301ï¼Œ302ç­‰ï¼‰ï¼Œè¯¥å±æ€§åªè¯»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/200&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1.<span class="property">redirected</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/301&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2.<span class="property">redirected</span>); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="statusï¼ŒstatusText">statusï¼ŒstatusText <a href="about:blank#statusstatustext">#</a></h3><p><code>status</code>å±æ€§æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä»£è¡¨æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç ï¼Œè¯¥å±æ€§åªè¯»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/200&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res1.<span class="property">status</span>); <span class="comment">// 200</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://httpbin.org/status/404&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res2.<span class="property">status</span>); <span class="comment">// 404</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>statusText</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ç çš„æ–‡å­—æè¿°ã€‚æ¯”å¦‚ï¼ŒçŠ¶æ€ç 200çš„<code>statusText</code>ä¸€èˆ¬æ˜¯<code>OK</code>ï¼Œä¹Ÿå¯èƒ½ä¸ºç©ºã€‚</p><h3 id="type">type <a href="about:blank#type">#</a></h3><p><code>type</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å›åº”çš„ç±»å‹ï¼Œå®ƒçš„å€¼æœ‰ä¸‹é¢å‡ ç§ï¼šbasicã€corsã€defaultã€errorã€opaqueã€opaqueredirectã€‚</p><h3 id="url">url <a href="about:blank#url">#</a></h3><p><code>url</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨æœåŠ¡å™¨è·¯å¾„ï¼Œè¯¥å±æ€§åªè¯»ã€‚å¦‚æœè¯·æ±‚æ˜¯é‡å®šå‘çš„ï¼Œè¯¥å±æ€§å°±æ˜¯é‡å®šå‘åçš„ URLã€‚</p><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="æ•°æ®è¯»å–">æ•°æ®è¯»å– <a href="about:blank#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96">#</a></h3><p>ä»¥ä¸‹æ–¹æ³•å¯ä»¥è·å–æœåŠ¡å™¨å“åº”çš„æ¶ˆæ¯ä½“ï¼Œæ ¹æ®è¿”å›æ•°æ®çš„ä¸åŒç±»å‹ï¼Œè°ƒç”¨ç›¸åº”æ–¹æ³•ã€‚</p><ul><li>.json()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªè§£æåçš„ JSON å¯¹è±¡ã€‚</li><li>.text()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li><li>.blob()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶ Blob å¯¹è±¡ï¼Œä»£è¡¨æŸä¸ªæ–‡ä»¶æ•´ä½“çš„åŸå§‹æ•°æ®ã€‚</li><li>.arrayBuffer()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª ArrayBuffer å¯¹è±¡ï¼Œä»£è¡¨ä¸€æ®µå›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</li><li>.formData()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª FormData å¯¹è±¡ï¼Œé‡Œé¢æ˜¯é”®å€¼å¯¹å½¢å¼çš„è¡¨å•æäº¤æ•°æ®ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä»æœåŠ¡å™¨è·å– JSON æ•°æ®çš„ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨<code>.json()</code>æ–¹æ³•ï¼Œå…¶ä»–å‡ ä¸ªæ–¹æ³•çš„ç”¨æ³•éƒ½å¤§åŒå°å¼‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getRedditPosts</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://www.reddit.com/r/all/top.json?limit=10&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="keyword">const</span> posts = data.<span class="property">data</span>.<span class="property">children</span>.<span class="title function_">map</span>(<span class="function"><span class="params">child</span> =&gt;</span> child.<span class="property">data</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(posts.<span class="title function_">map</span>(<span class="function"><span class="params">post</span> =&gt;</span> post.<span class="property">title</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä»æœåŠ¡å™¨è·å–äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¾‹å­ï¼Œä½¿ç”¨<code>.blob()</code>æ–¹æ³•ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">displayImageAsync</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="title">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">&#x27;https://www.example.com/image.jpg&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">await</span> response.blob();</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">url</span> = URL.createObjectURL(blob);</span><br><span class="line">    <span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">    img.src = <span class="built_in">url</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(img);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä»æœåŠ¡å™¨è·å–éŸ³é¢‘æ–‡ä»¶ï¼Œç›´æ¥è§£å‹æ’­æ”¾çš„ä¾‹å­ï¼Œä½¿ç”¨<code>.arrayBuffer()</code>æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">playAudioAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://www.example.com/audio.mp3&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> arrayBuffer = <span class="keyword">await</span> response.<span class="title function_">arrayBuffer</span>();</span><br><span class="line">    <span class="keyword">const</span> audioBuffer = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">AudioContext</span>().<span class="title function_">decodeAudioData</span>(arrayBuffer);</span><br><span class="line">    <span class="keyword">const</span> source = <span class="keyword">new</span> <span class="title class_">AudioBufferSourceNode</span>(<span class="keyword">new</span> <span class="title class_">AudioContext</span>(), &#123; <span class="attr">buffer</span>: audioBuffer &#125;);</span><br><span class="line">    source.<span class="title function_">connect</span>(<span class="keyword">new</span> <span class="title class_">AudioContext</span>().<span class="property">destination</span>);</span><br><span class="line">    source.<span class="title function_">start</span>(<span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="clone">clone() <a href="about:blank#clone">#</a></h3><p><code>clone()</code>æ–¹æ³•ç”¨æ¥å¤åˆ¶ Response å¯¹è±¡ã€‚</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res1 = <span class="function">await <span class="title">fetch</span><span class="params">(<span class="string">&#x27;/flowers.jpg&#x27;</span>)</span></span>;</span><br><span class="line"><span class="keyword">const</span> res2 = res1.clone();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¤åˆ¶ä»¥åï¼Œè¯»å–ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ï¼Œä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p><h2 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³• <a href="about:blank#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">#</a></h2><h3 id="Response-json">Response.json() <a href="about:blank#responsejson">#</a></h3><p><code>Response.json()</code>è¿”å›ä¸€ä¸ª Response å®ä¾‹ï¼Œè¯¥å®ä¾‹å¯¹è±¡çš„æ•°æ®ä½“å°±æ˜¯ä½œä¸ºå‚æ•°çš„ JSON æ•°æ®ï¼Œæ•°æ®å¤´çš„<code>Content-Type</code>å­—æ®µè‡ªåŠ¨è®¾ä¸º<code>application/json</code>ã€‚</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Response</span>.json(<span class="class"><span class="keyword">data</span>)</span></span><br><span class="line"><span class="type">Response</span>.json(<span class="class"><span class="keyword">data</span>, options)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Response.json()</code>åŸºæœ¬ä¸Šå°±æ˜¯<code>Response()</code>æ„é€ å‡½æ•°çš„å˜ä½“ã€‚</p><p>ä¸‹é¢æ˜¯ç¤ºä¾‹ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">jsonResponse1</span> = Response.<span class="title function_ invoke__">json</span>(&#123; <span class="attr">my</span>: <span class="string">&quot;data&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">jsonResponse2</span> = Response.<span class="title function_ invoke__">json</span>(</span><br><span class="line">  &#123; <span class="attr">some</span>: <span class="string">&quot;data&quot;</span>, <span class="attr">more</span>: <span class="string">&quot;information&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">status</span>: <span class="number">307</span>, <span class="attr">statusText</span>: <span class="string">&quot;Temporary Redirect&quot;</span> &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Response-error">Response.error() <a href="about:blank#responseerror">#</a></h3><p><code>Response.error()</code>ç”¨æ¥æ„é€ ä¸€ä¸ªè¡¨ç¤ºæŠ¥é”™çš„æœåŠ¡å™¨å›åº”ï¼Œä¸»è¦ç”¨åœ¨ Service workerï¼Œè¡¨ç¤ºæ‹’ç»å‘é€ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">self.addEventListener(<span class="string">&#x27;fetch&#x27;</span>, (<span class="keyword">event</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> URL(<span class="keyword">event</span>.request.url);</span><br><span class="line">  <span class="keyword">if</span> (url.pathname === <span class="string">&#x27;/flowers.jpg&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">event</span>.respondWith(Response.error());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Response-redirect">Response.redirect() <a href="about:blank#responseredirect">#</a></h3><p><code>Response.redirect()</code>ç”¨æ¥æ„é€ ä¸€ä¸ªè¡¨ç¤ºè·³è½¬çš„æœåŠ¡å™¨å›åº”ï¼Œä¸»è¦ç”¨åœ¨ Service workerï¼Œè¡¨ç¤ºè·³è½¬åˆ°å…¶ä»–ç½‘å€ã€‚</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Response.redirect(<span class="built_in">url</span>)</span><br><span class="line">Response.redirect(<span class="built_in">url</span>, status)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>url</code>æ˜¯æ‰€è¦è·³è½¬çš„ç›®æ ‡ç½‘å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯çŠ¶æ€ç ï¼Œä¸€èˆ¬æ˜¯301æˆ–302ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Response</span>.redirect(<span class="string">&quot;https://www.example.com&quot;</span>, <span class="number">302</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/response">https://wangdoc.com/webapi/response</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Response API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Request API</title>
    <link href="https://www.hacp.top/posts/45.html"/>
    <id>https://www.hacp.top/posts/45.html</id>
    <published>2023-07-13T10:19:03.000Z</published>
    <updated>2023-07-13T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Request API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>æµè§ˆå™¨åŸç”Ÿæä¾› Request() æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ„é€ å‘ç»™æœåŠ¡å™¨çš„ HTTP è¯·æ±‚ã€‚å®ƒç”Ÿæˆçš„ Response å®ä¾‹ï¼Œå¯ä»¥ä½œä¸º<code>fetch()</code>çš„å‚æ•°ã€‚</p><p>æ³¨æ„ï¼Œæ„é€ ä¸€ä¸ª Request å¯¹è±¡ï¼Œåªæ˜¯æ„é€ å‡ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæœ¬èº«å¹¶ä¸ä¼šå‘å‡º HTTP è¯·æ±‚ï¼Œåªæœ‰å°†å®ƒä¼ å…¥<code>fetch()</code>æ–¹æ³•æ‰ä¼šçœŸçš„å‘å‡ºè¯·æ±‚ã€‚</p><h2 id="æ„é€ æ–¹æ³•">æ„é€ æ–¹æ³• <a href="about:blank#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95">#</a></h2><p>Request ä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼Œè¿”å›ä¸€ä¸ª Request å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Request(url: <span class="built_in">String</span>, [init: <span class="built_in">Object</span>]): Request</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„ URL å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é…ç½®å¯¹è±¡ï¼Œç”¨æ¥æ„é€  HTTP è¯·æ±‚ï¼Œè¯¥å¯¹è±¡çš„ç±»å‹æè¿°å¦‚ä¸‹ã€‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="symbol">  body:</span> Object</span><br><span class="line"><span class="symbol">  cache:</span> String</span><br><span class="line"><span class="symbol">  credentials:</span> String</span><br><span class="line"><span class="symbol">  headers:</span> Object</span><br><span class="line"><span class="symbol">  integrity:</span> String</span><br><span class="line"><span class="symbol">  keepalive:</span> Boolean</span><br><span class="line"><span class="symbol">  method:</span> String</span><br><span class="line"><span class="symbol">  mode:</span> String</span><br><span class="line"><span class="symbol">  redirect:</span>String</span><br><span class="line"><span class="symbol">  referrer:</span>String</span><br><span class="line"><span class="symbol">  referrerPolicy:</span> String</span><br><span class="line"><span class="symbol">  requestMode:</span> String</span><br><span class="line"><span class="symbol">  requestCredentials:</span> String</span><br><span class="line"><span class="symbol">  signal:</span> AbortSignal</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå‚æ•°é…ç½®å¯¹è±¡çš„å„ä¸ªå±æ€§çš„å«ä¹‰å¦‚ä¸‹ã€‚</p><ul><li><code>body</code>ï¼šHTTP è¯·æ±‚çš„æ•°æ®ä½“ï¼Œå¿…é¡»æ˜¯ Blobã€BufferSourceã€FormDataã€Stringã€URLSearchParams ç±»å‹ä¹‹ä¸€ã€‚</li><li><code>cache</code>ï¼šè¯·æ±‚çš„ç¼“å­˜æ¨¡å¼ã€‚</li><li><code>credentials</code>ï¼šè¯·æ±‚æ‰€ç”¨çš„å‡­è¯ï¼Œå¯ä»¥è®¾ä¸º omitã€same-originiã€includeã€‚Chrome 47 ä¹‹å‰ï¼Œé»˜è®¤å€¼ä¸º same-originï¼›Chrome 47 ä¹‹åï¼Œé»˜è®¤å€¼ä¸º includeã€‚</li><li><code>headers</code>ï¼šä¸€ä¸ªä»£è¡¨ HTTP è¯·æ±‚æ•°æ®å¤´çš„å¯¹è±¡ï¼Œç±»å‹ä¸º Headers å¯¹è±¡å®ä¾‹ã€‚</li><li><code>integrity</code>ï¼šè¯·æ±‚çš„èµ„æºçš„èµ„æºå®Œæ•´åº¦éªŒè¯å€¼ï¼Œæ¯”å¦‚<code>sha256-BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE=</code>ã€‚</li><li><code>method</code>ï¼šHTTP æ–¹æ³•ï¼Œä¸€èˆ¬ä¸º<code>GET</code>ã€<code>POST</code>ã€<code>DELETE</code>ï¼Œé»˜è®¤æ˜¯<code>GET</code>ã€‚</li><li><code>mode</code>ï¼šè¯·æ±‚æ¨¡å¼ï¼Œæ¯”å¦‚ corsã€no-corsã€navigateï¼Œé»˜è®¤ä¸º corsã€‚</li><li><code>redirect</code>ï¼šè¯·æ±‚æ‰€ç”¨çš„æ¨¡å¼ï¼Œå¯ä»¥è®¾ä¸º errorã€followã€manualï¼Œé»˜è®¤ä¸º followã€‚</li><li><code>referrer</code>ï¼šè¯·æ±‚çš„æ¥æºï¼Œé»˜è®¤ä¸º about:clientã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸¤ä¸ªç¤ºä¾‹ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ä¸€</span></span><br><span class="line"><span class="keyword">const</span> request = <span class="keyword">new</span> Request(<span class="string">&#x27;flowers.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹äºŒ</span></span><br><span class="line"><span class="keyword">const</span> myInit = &#123;</span><br><span class="line">  method: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;image/jpeg&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  mode: <span class="string">&quot;cors&quot;</span>,</span><br><span class="line">  cache: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = <span class="keyword">new</span> Request(<span class="string">&#x27;flowers.jpg&#x27;</span>, myInit);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Request()</code>è¿˜æœ‰å¦ä¸€ç§è¯­æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦ä¸€ä¸ª Request å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°è¿˜æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚å®ƒè¿”å›ä¸€ä¸ªæ–°çš„ Request å¯¹è±¡ï¼Œç›¸å½“äºå¯¹ç¬¬ä¸€ä¸ªå‚æ•° Request å¯¹è±¡è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Request</span>(<span class="built_in">request</span>: <span class="built_in">Request</span>, [init: Object]): <span class="built_in">Request</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§ <a href="about:blank#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">#</a></h2><p>Request å®ä¾‹å¯¹è±¡çš„å±æ€§ï¼Œå¤§éƒ¨åˆ†å°±æ˜¯å®ƒçš„æ„é€ å‡½æ•°ç¬¬äºŒä¸ªå‚æ•°é…ç½®å¯¹è±¡çš„å±æ€§ã€‚</p><p>ï¼ˆ1ï¼‰<code>body</code></p><p><code>body</code>å±æ€§è¿”å› HTTP è¯·æ±‚çš„æ•°æ®ä½“ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ª ReadableStream å¯¹è±¡æˆ– nullï¼ˆ<code>GET</code>æˆ–<code>HEAD</code>è¯·æ±‚æ—¶æ²¡æœ‰æ•°æ®ä½“ï¼‰ã€‚</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const request = new Request(<span class="string">&#x27;/myEndpoint&#x27;</span>, &#123;</span><br><span class="line">  <span class="function"><span class="keyword">method</span>: &quot;<span class="title">POST</span>&quot;,</span></span><br><span class="line"><span class="function">  <span class="title">body</span>: &quot;<span class="title">Hello</span> <span class="title">world</span>&quot;,</span></span><br><span class="line"><span class="function">&#125;)</span>;</span><br><span class="line"></span><br><span class="line">request.body; <span class="regexp">//</span> ReadableStream å¯¹è±¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒFirefox ä¸æ”¯æŒè¯¥å±æ€§ã€‚</p><p>ï¼ˆ2ï¼‰<code>bodyused</code></p><p><code>bodyUsed</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º<code>body</code>æ˜¯å¦å·²ç»è¢«è¯»å–äº†ã€‚</p><p>ï¼ˆ3ï¼‰<code>cache</code></p><p><code>cache</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚çš„ç¼“å­˜æ¨¡å¼ï¼Œå¯èƒ½çš„å€¼æœ‰ defaultã€force-cacheã€no-cacheã€no-storeã€only-if-cachedã€reloadã€‚</p><p>ï¼ˆ4ï¼‰<code>credentials</code></p><p><code>credentials</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦æºå¸¦å…¶ä»–åŸŸçš„ cookieã€‚å¯èƒ½çš„å€¼æœ‰ omitï¼ˆä¸æºå¸¦ï¼‰ã€ includeï¼ˆæºå¸¦ï¼‰ã€same-originï¼ˆåªæºå¸¦åŒæº cookieï¼‰ã€‚</p><p>ï¼ˆ5ï¼‰<code>destination</code></p><p><code>destination</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚å†…å®¹çš„ç±»å‹ï¼Œå¯èƒ½çš„å€¼æœ‰ â€˜â€™ã€â€˜audioâ€™ã€â€˜audioworkletâ€™ã€â€˜documentâ€™ã€â€˜embedâ€™ã€â€˜fontâ€™ã€â€˜frameâ€™ã€â€˜iframeâ€™ã€â€˜imageâ€™ã€â€˜manifestâ€™ã€â€˜objectâ€™ã€â€˜paintworkletâ€™ã€ â€˜reportâ€™ã€â€˜scriptâ€™ã€â€˜sharedworkerâ€™ã€â€˜styleâ€™ã€â€˜trackâ€™ã€â€˜videoâ€™ã€â€˜workerâ€™ã€â€˜xsltâ€™ ç­‰ã€‚</p><p>ï¼ˆ6ï¼‰<code>headers</code></p><p><code>headers</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»çš„ Headers å®ä¾‹å¯¹è±¡ï¼Œè¡¨ç¤ºè¯·æ±‚çš„æ•°æ®å¤´ã€‚</p><p>ï¼ˆ7ï¼‰<code>integrity</code></p><p><code>integrity</code>å±æ€§è¡¨ç¤ºæ‰€è¯·æ±‚èµ„æºçš„å®Œæ•´åº¦çš„éªŒè¯å€¼ã€‚</p><p>ï¼ˆ8ï¼‰<code>method</code></p><p><code>method</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚çš„æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚</p><p>ï¼ˆ9ï¼‰<code>mode</code></p><p><code>mode</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œç”¨æ¥éªŒè¯æ˜¯å¦å¯ä»¥æœ‰æ•ˆåœ°å‘å‡ºè·¨åŸŸè¯·æ±‚ï¼Œå¯èƒ½çš„å€¼æœ‰ same-originã€no-corsã€corsã€‚</p><p>ï¼ˆ10ï¼‰<code>redirect</code></p><p><code>redirect</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºé‡å®šå‘æ—¶çš„å¤„ç†æ¨¡å¼ï¼Œå¯èƒ½çš„å€¼æœ‰ followã€errorã€manualã€‚</p><p>ï¼ˆ11ï¼‰<code>referrer</code></p><p><code>referrer</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚çš„å¼•è URLã€‚</p><p>ï¼ˆ12ï¼‰<code>referrerPolicy</code></p><p><code>referrerPolicy</code>å±æ€§æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼Œå†³å®šäº†<code>referrer</code>å±æ€§æ˜¯å¦è¦åŒ…å«åœ¨è¯·æ±‚é‡Œé¢çš„å¤„ç†æ”¿ç­–ã€‚</p><p>ï¼ˆ13ï¼‰<code>signal</code></p><p><code>signal</code>æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼ŒåŒ…å«ä¸å½“å‰è¯·æ±‚ç›¸å¯¹åº”çš„ä¸­æ–­ä¿¡å· AbortSignal å¯¹è±¡ã€‚</p><p>ï¼ˆ14ï¼‰<code>url</code></p><p><code>url</code>æ˜¯ä¸€ä¸ªåªè¯»å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†å½“å‰è¯·æ±‚çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myRequest = <span class="keyword">new</span> Request(<span class="string">&#x27;flowers.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> myURL = myRequest.url;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="å–å‡ºæ•°æ®ä½“çš„æ–¹æ³•">å–å‡ºæ•°æ®ä½“çš„æ–¹æ³• <a href="about:blank#%E5%8F%96%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BD%93%E7%9A%84%E6%96%B9%E6%B3%95">#</a></h3><ul><li>arrayBuffer()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† Request çš„æ•°æ®ä½“ä½œä¸º ArrayBuffer å¯¹è±¡è¿”å›ã€‚</li><li>blob()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† Request çš„æ•°æ®ä½“ä½œä¸º Blob å¯¹è±¡è¿”å›ã€‚</li><li>json()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† Request çš„æ•°æ®ä½“ä½œä¸º JSON å¯¹è±¡è¿”å›ã€‚</li><li>text()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† Request çš„æ•°æ®ä½“ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚</li><li>formData()ï¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† Request çš„æ•°æ®ä½“ä½œä¸ºè¡¨å•æ•°æ® FormData å¯¹è±¡è¿”å›ã€‚</li></ul><p>ä¸‹é¢æ˜¯<code>json()</code>æ–¹æ³•çš„ä¸€ä¸ªç¤ºä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">hello</span>: <span class="string">&quot;world&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = <span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">&quot;/myEndpoint&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">request.<span class="title function_">json</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç† JSON æ•°æ®</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>.formData()</code>æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ˜¯ä¸€ä¸ª FormData è¡¨å•å¯¹è±¡ï¼Œé‡Œé¢æ˜¯ç”¨é”®å€¼å¯¹è¡¨ç¤ºçš„å„ç§è¡¨å•å…ƒç´ ã€‚è¯¥æ–¹æ³•å¾ˆå°‘ä½¿ç”¨ï¼Œå› ä¸ºéœ€è¦æ‹¦æˆªå‘ç»™æœåŠ¡å™¨çš„è¯·æ±‚çš„åœºæ™¯ä¸å¤šï¼Œä¸€èˆ¬ç”¨åœ¨ Service Worker æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œä»¥ä¿®æ”¹è¡¨å•æ•°æ®ï¼Œç„¶åå†å‘é€åˆ°æœåŠ¡å™¨ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">self.addEventListener(<span class="string">&#x27;fetch&#x27;</span>, <span class="keyword">event</span> =&gt; &#123;</span><br><span class="line">  <span class="comment">// æ‹¦æˆªè¡¨å•æäº¤è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="keyword">event</span>.request.method === <span class="string">&#x27;POST&#x27;</span> &amp;&amp;</span><br><span class="line">    <span class="keyword">event</span>.request.headers.<span class="keyword">get</span>(<span class="string">&#x27;Content-Type&#x27;</span>) === <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">event</span>.respondWith(handleFormSubmission(<span class="keyword">event</span>.request));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">async</span> function <span class="title">handleFormSubmission</span>(<span class="params">request</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> formData = <span class="keyword">await</span> request.formData();</span><br><span class="line">  formData.append(<span class="string">&#x27;extra-field&#x27;</span>, <span class="string">&#x27;extra-value&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newRequest = <span class="keyword">new</span> Request(request.url, &#123;</span><br><span class="line">    method: request.method,</span><br><span class="line">    headers: request.headers,</span><br><span class="line">    body: <span class="keyword">new</span> URLSearchParams(formData)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fetch(newRequest);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼ŒService Worker æ‹¦æˆªè¡¨å•è¯·æ±‚ä»¥åï¼Œæ·»åŠ äº†ä¸€ä¸ªè¡¨å•æˆå‘˜ï¼Œå†è°ƒç”¨<code>fetch()</code>å‘æœåŠ¡å™¨å‘å‡ºä¿®æ”¹åçš„è¯·æ±‚ã€‚</p><h3 id="clone">clone() <a href="about:blank#clone">#</a></h3><p><code>clone()</code>ç”¨æ¥å¤åˆ¶ HTTP è¯·æ±‚å¯¹è±¡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">myRequest</span> = <span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">&#x27;flowers.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">newRequest</span> = myRequest.<span class="keyword">clone</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/request">https://wangdoc.com/webapi/request</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Request API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Page Visibility API</title>
    <link href="https://www.hacp.top/posts/44.html"/>
    <id>https://www.hacp.top/posts/44.html</id>
    <published>2023-07-12T10:19:03.000Z</published>
    <updated>2023-07-12T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Page Visibility API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>æœ‰æ—¶å€™ï¼Œå¼€å‘è€…éœ€è¦çŸ¥é“ï¼Œç”¨æˆ·æ­£åœ¨ç¦»å¼€é¡µé¢ã€‚å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç›‘å¬ä¸‹é¢ä¸‰ä¸ªäº‹ä»¶ã€‚</p><blockquote><ul><li><code>pagehide</code></li><li><code>beforeunload</code></li><li><code>unload</code></li></ul></blockquote><p>ä½†æ˜¯ï¼Œè¿™äº›äº‹ä»¶åœ¨æ‰‹æœºä¸Šå¯èƒ½ä¸ä¼šè§¦å‘ï¼Œé¡µé¢å°±ç›´æ¥å…³é—­äº†ã€‚å› ä¸ºæ‰‹æœºç³»ç»Ÿå¯ä»¥å°†ä¸€ä¸ªè¿›ç¨‹ç›´æ¥è½¬å…¥åå°ï¼Œç„¶åæ€æ­»ã€‚</p><blockquote><ul><li>ç”¨æˆ·ç‚¹å‡»äº†ä¸€æ¡ç³»ç»Ÿé€šçŸ¥ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚</li><li>ç”¨æˆ·è¿›å…¥ä»»åŠ¡åˆ‡æ¢çª—å£ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appã€‚</li><li>ç”¨æˆ·ç‚¹å‡»äº† Home æŒ‰é’®ï¼Œåˆ‡æ¢å›ä¸»å±å¹•ã€‚</li><li>æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€ä¸ª Appï¼ˆæ¯”å¦‚ï¼Œæ”¶åˆ°ä¸€ä¸ªç”µè¯ï¼‰ã€‚</li></ul></blockquote><p>ä¸Šé¢è¿™äº›æƒ…å†µï¼Œéƒ½ä¼šå¯¼è‡´æ‰‹æœºå°†æµè§ˆå™¨è¿›ç¨‹åˆ‡æ¢åˆ°åå°ï¼Œç„¶åä¸ºäº†èŠ‚çœèµ„æºï¼Œå¯èƒ½å°±ä¼šæ€æ­»æµè§ˆå™¨è¿›ç¨‹ã€‚</p><p>ä»¥å‰ï¼Œé¡µé¢è¢«ç³»ç»Ÿåˆ‡æ¢ï¼Œä»¥åŠç³»ç»Ÿæ¸…é™¤æµè§ˆå™¨è¿›ç¨‹ï¼Œæ˜¯æ— æ³•ç›‘å¬åˆ°çš„ã€‚å¼€å‘è€…æƒ³è¦æŒ‡å®šï¼Œä»»ä½•ä¸€ç§é¡µé¢å¸è½½æƒ…å†µä¸‹éƒ½ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œä¹Ÿæ˜¯æ— æ³•åšåˆ°çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¯ç”Ÿäº† Page Visibility APIã€‚ä¸ç®¡æ‰‹æœºæˆ–æ¡Œé¢ç”µè„‘ï¼Œæ‰€æœ‰æƒ…å†µä¸‹ï¼Œè¿™ä¸ª API éƒ½ä¼šç›‘å¬åˆ°é¡µé¢çš„å¯è§æ€§å‘ç”Ÿå˜åŒ–ã€‚</p><p>è¿™ä¸ªæ–°çš„ API çš„æ„ä¹‰åœ¨äºï¼Œé€šè¿‡ç›‘å¬ç½‘é¡µçš„å¯è§æ€§ï¼Œå¯ä»¥é¢„åˆ¤ç½‘é¡µçš„å¸è½½ï¼Œè¿˜å¯ä»¥ç”¨æ¥èŠ‚çœèµ„æºï¼Œå‡ç¼“ç”µèƒ½çš„æ¶ˆè€—ã€‚æ¯”å¦‚ï¼Œä¸€æ—¦ç”¨æˆ·ä¸çœ‹ç½‘é¡µï¼Œä¸‹é¢è¿™äº›ç½‘é¡µè¡Œä¸ºéƒ½æ˜¯å¯ä»¥æš‚åœçš„ã€‚</p><blockquote><ul><li>å¯¹æœåŠ¡å™¨çš„è½®è¯¢</li><li>ç½‘é¡µåŠ¨ç”»</li><li>æ­£åœ¨æ’­æ”¾çš„éŸ³é¢‘æˆ–è§†é¢‘</li></ul></blockquote><h2 id="document-visibilityState">document.visibilityState <a href="about:blank#documentvisibilitystate">#</a></h2><p>è¿™ä¸ª API ä¸»è¦åœ¨<code>document</code>å¯¹è±¡ä¸Šï¼Œæ–°å¢äº†ä¸€ä¸ª<code>document.visibilityState</code>å±æ€§ã€‚è¯¥å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºé¡µé¢å½“å‰çš„å¯è§æ€§çŠ¶æ€ï¼Œå…±æœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ã€‚</p><blockquote><ul><li><code>hidden</code>ï¼šé¡µé¢å½»åº•ä¸å¯è§ã€‚</li><li><code>visible</code>ï¼šé¡µé¢è‡³å°‘ä¸€éƒ¨åˆ†å¯è§ã€‚</li><li><code>prerender</code>ï¼šé¡µé¢å³å°†æˆ–æ­£åœ¨æ¸²æŸ“ï¼Œå¤„äºä¸å¯è§çŠ¶æ€ã€‚</li></ul></blockquote><p>å…¶ä¸­ï¼Œ<code>hidden</code>çŠ¶æ€å’Œ<code>visible</code>çŠ¶æ€æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å¿…é¡»æ”¯æŒçš„ã€‚<code>prerender</code>çŠ¶æ€åªåœ¨æ”¯æŒâ€œé¢„æ¸²æŸ“â€çš„æµè§ˆå™¨ä¸Šæ‰ä¼šå‡ºç°ï¼Œæ¯”å¦‚ Chrome æµè§ˆå™¨å°±æœ‰é¢„æ¸²æŸ“åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸å¯è§çš„çŠ¶æ€ä¸‹ï¼Œé¢„å…ˆæŠŠé¡µé¢æ¸²æŸ“å‡ºæ¥ï¼Œç­‰åˆ°ç”¨æˆ·è¦æµè§ˆçš„æ—¶å€™ï¼Œç›´æ¥å±•ç¤ºæ¸²æŸ“å¥½çš„ç½‘é¡µã€‚</p><p>åªè¦é¡µé¢å¯è§ï¼Œå“ªæ€•åªéœ²å‡ºä¸€ä¸ªè§’ï¼Œ<code>document.visibilityState</code>å±æ€§å°±è¿”å›<code>visible</code>ã€‚åªæœ‰ä»¥ä¸‹å››ç§æƒ…å†µï¼Œæ‰ä¼šè¿”å›<code>hidden</code>ã€‚</p><blockquote><ul><li>æµè§ˆå™¨æœ€å°åŒ–ã€‚</li><li>æµè§ˆå™¨æ²¡æœ‰æœ€å°åŒ–ï¼Œä½†æ˜¯å½“å‰é¡µé¢åˆ‡æ¢æˆäº†èƒŒæ™¯é¡µã€‚</li><li>æµè§ˆå™¨å°†è¦å¸è½½ï¼ˆunloadï¼‰é¡µé¢ã€‚</li><li>æ“ä½œç³»ç»Ÿè§¦å‘é”å±å±å¹•ã€‚</li></ul></blockquote><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢å››ç§åœºæ™¯æ¶µç›–äº†é¡µé¢å¯èƒ½è¢«å¸è½½çš„æ‰€æœ‰æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé¡µé¢å¸è½½ä¹‹å‰ï¼Œ<code>document.visibilityState</code>å±æ€§ä¸€å®šä¼šå˜æˆ<code>hidden</code>ã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡è¿™ä¸ª API çš„ä¸»è¦ç›®çš„ã€‚</p><p>å¦å¤–ï¼Œæ—©æœŸç‰ˆæœ¬çš„ APIï¼Œè¿™ä¸ªå±æ€§è¿˜æœ‰ç¬¬å››ä¸ªå€¼<code>unloaded</code>ï¼Œè¡¨ç¤ºé¡µé¢å³å°†å¸è½½ï¼Œç°åœ¨å·²ç»è¢«åºŸå¼ƒäº†ã€‚</p><p>æ³¨æ„ï¼Œ<code>document.visibilityState</code>å±æ€§åªé’ˆå¯¹é¡¶å±‚çª—å£ï¼Œå†…åµŒçš„<code>&lt;iframe&gt;</code>é¡µé¢çš„<code>document.visibilityState</code>å±æ€§ç”±é¡¶å±‚çª—å£å†³å®šã€‚ä½¿ç”¨ CSS å±æ€§éšè—<code>&lt;iframe&gt;</code>é¡µé¢ï¼ˆæ¯”å¦‚<code>display: none;</code>ï¼‰ï¼Œå¹¶ä¸ä¼šå½±å“å†…åµŒé¡µé¢çš„å¯è§æ€§ã€‚</p><h2 id="document-hidden">document.hidden <a href="about:blank#documenthidden">#</a></h2><p>ç”±äºå†å²åŸå› ï¼Œè¿™ä¸ª API è¿˜å®šä¹‰äº†<code>document.hidden</code>å±æ€§ã€‚è¯¥å±æ€§åªè¯»ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰é¡µé¢æ˜¯å¦å¯è§ã€‚</p><p>å½“<code>document.visibilityState</code>å±æ€§è¿”å›<code>visible</code>æ—¶ï¼Œ<code>document.hidden</code>å±æ€§è¿”å›<code>false</code>ï¼›å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½è¿”å›<code>true</code>ã€‚</p><p>è¯¥å±æ€§åªæ˜¯å‡ºäºå†å²åŸå› è€Œä¿ç•™çš„ï¼Œåªè¦æœ‰å¯èƒ½ï¼Œéƒ½åº”è¯¥ä½¿ç”¨<code>document.visibilityState</code>å±æ€§ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è¿™ä¸ªå±æ€§ã€‚</p><h2 id="visibilitychange-äº‹ä»¶">visibilitychange äº‹ä»¶ <a href="about:blank#visibilitychange-%E4%BA%8B%E4%BB%B6">#</a></h2><p>åªè¦<code>document.visibilityState</code>å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘<code>visibilitychange</code>äº‹ä»¶ã€‚å› æ­¤ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼ˆé€šè¿‡<code>document.addEventListener()</code>æ–¹æ³•æˆ–<code>document.onvisibilitychange</code>å±æ€§ï¼‰ï¼Œè·Ÿè¸ªé¡µé¢å¯è§æ€§çš„å˜åŒ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç”¨æˆ·ç¦»å¼€äº†å½“å‰é¡µé¢</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">visibilityState</span> === <span class="string">&#x27;hidden&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;é¡µé¢ä¸å¯è§&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”¨æˆ·æ‰“å¼€æˆ–å›åˆ°é¡µé¢</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">visibilityState</span> === <span class="string">&#x27;visible&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;é¡µé¢å¯è§&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ˜¯ Page Visibility API çš„æœ€åŸºæœ¬ç”¨æ³•ï¼Œå¯ä»¥ç›‘å¬å¯è§æ€§å˜åŒ–ã€‚</p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œä¸€æ—¦é¡µé¢ä¸å¯è§ï¼Œå°±æš‚åœè§†é¢‘æ’­æ”¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vidElem = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;video-demo&#x27;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, startStopVideo);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startStopVideo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">visibilityState</span> === <span class="string">&#x27;hidden&#x27;</span>) &#123;</span><br><span class="line">    vidElem.<span class="title function_">pause</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">visibilityState</span> === <span class="string">&#x27;visible&#x27;</span>) &#123;</span><br><span class="line">    vidElem.<span class="title function_">play</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é¡µé¢å¸è½½">é¡µé¢å¸è½½ <a href="about:blank#%E9%A1%B5%E9%9D%A2%E5%8D%B8%E8%BD%BD">#</a></h2><p>ä¸‹é¢ä¸“é—¨è®¨è®ºä¸€ä¸‹ï¼Œå¦‚ä½•æ­£ç¡®ç›‘å¬é¡µé¢å¸è½½ã€‚</p><p>é¡µé¢å¸è½½å¯ä»¥åˆ†æˆä¸‰ç§æƒ…å†µã€‚</p><blockquote><ul><li>é¡µé¢å¯è§æ—¶ï¼Œç”¨æˆ·å…³é—­ Tab é¡µæˆ–æµè§ˆå™¨çª—å£ã€‚</li><li>é¡µé¢å¯è§æ—¶ï¼Œç”¨æˆ·åœ¨å½“å‰çª—å£å‰å¾€å¦ä¸€ä¸ªé¡µé¢ã€‚</li><li>é¡µé¢ä¸å¯è§æ—¶ï¼Œç”¨æˆ·æˆ–ç³»ç»Ÿå…³é—­æµè§ˆå™¨çª—å£ã€‚</li></ul></blockquote><p>è¿™ä¸‰ç§æƒ…å†µï¼Œéƒ½ä¼šè§¦å‘<code>visibilitychange</code>äº‹ä»¶ã€‚å‰ä¸¤ç§æƒ…å†µï¼Œè¯¥äº‹ä»¶åœ¨ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶è§¦å‘ï¼›æœ€åä¸€ç§æƒ…å†µï¼Œè¯¥äº‹ä»¶åœ¨é¡µé¢ä»å¯è§çŠ¶æ€å˜ä¸ºä¸å¯è§çŠ¶æ€æ—¶è§¦å‘ã€‚</p><p>ç”±æ­¤å¯è§ï¼Œ<code>visibilitychange</code>äº‹ä»¶æ¯”<code>pagehide</code>ã€<code>beforeunload</code>ã€<code>unload</code>äº‹ä»¶æ›´å¯é ï¼Œæ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šè§¦å‘ï¼ˆä»<code>visible</code>å˜ä¸º<code>hidden</code>ï¼‰ã€‚å› æ­¤ï¼Œå¯ä»¥åªç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œè¿è¡Œé¡µé¢å¸è½½æ—¶éœ€è¦è¿è¡Œçš„ä»£ç ï¼Œä¸ç”¨ç›‘å¬åé¢é‚£ä¸‰ä¸ªäº‹ä»¶ã€‚</p><p>ç”šè‡³å¯ä»¥è¿™æ ·è¯´ï¼Œ<code>unload</code>äº‹ä»¶åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸å¿…ç›‘å¬ï¼Œ<code>beforeunload</code>äº‹ä»¶åªæœ‰ä¸€ç§é€‚ç”¨åœºæ™¯ï¼Œå°±æ˜¯ç”¨æˆ·ä¿®æ”¹äº†è¡¨å•ï¼Œæ²¡æœ‰æäº¤å°±ç¦»å¼€å½“å‰é¡µé¢ã€‚å¦ä¸€æ–¹é¢ï¼ŒæŒ‡å®šäº†è¿™ä¸¤ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œæµè§ˆå™¨å°±ä¸ä¼šç¼“å­˜å½“å‰é¡µé¢ã€‚</p><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li><a href="https://w3c.github.io/page-visibility/">Page Visibility Level 2</a>, W3C</li><li><a href="http://davidwalsh.name/page-visibility">Page Visibility API</a>, David Walsh</li><li><a href="http://www.html5rocks.com/en/tutorials/pagevisibility/intro/">Using the pageVisbility API</a>, Joe Marini</li><li><a href="http://blogs.msdn.com/b/ie/archive/2011/07/08/using-pc-hardware-more-efficiently-in-html5-new-web-performance-apis-part-2.aspx">Using PC Hardware more efficiently in HTML5: New Web Performance APIs, Part 2</a>, Jatinder Mann</li><li><a href="https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/">Donâ€™t lose user and app state, use Page Visibility</a>, Ilya Grigorik</li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/page-visibility">https://wangdoc.com/webapi/page-visibility</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Page Visibility API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Page Lifecycle API</title>
    <link href="https://www.hacp.top/posts/43.html"/>
    <id>https://www.hacp.top/posts/43.html</id>
    <published>2023-07-11T10:19:03.000Z</published>
    <updated>2023-07-11T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Page Lifecycle API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>Androidã€iOS å’Œæœ€æ–°çš„ Windows ç³»ç»Ÿå¯ä»¥éšæ—¶è‡ªä¸»åœ°åœæ­¢åå°è¿›ç¨‹ï¼ŒåŠæ—¶é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘é¡µå¯èƒ½éšæ—¶è¢«ç³»ç»Ÿä¸¢å¼ƒæ‰ã€‚ä»¥å‰çš„æµè§ˆå™¨ API å®Œå…¨æ²¡æœ‰è€ƒè™‘åˆ°è¿™ç§æƒ…å†µï¼Œå¯¼è‡´å¼€å‘è€…æ ¹æœ¬æ²¡æœ‰åŠæ³•ç›‘å¬åˆ°ç³»ç»Ÿä¸¢å¼ƒé¡µé¢ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒW3C æ–°åˆ¶å®šäº†ä¸€ä¸ª Page Lifecycle APIï¼Œç»Ÿä¸€äº†ç½‘é¡µä»è¯ç”Ÿåˆ°å¸è½½çš„è¡Œä¸ºæ¨¡å¼ï¼Œå¹¶ä¸”å®šä¹‰äº†æ–°çš„äº‹ä»¶ï¼Œå…è®¸å¼€å‘è€…å“åº”ç½‘é¡µçŠ¶æ€çš„å„ç§è½¬æ¢ã€‚</p><p>æœ‰äº†è¿™ä¸ª APIï¼Œå¼€å‘è€…å°±å¯ä»¥é¢„æµ‹ç½‘é¡µä¸‹ä¸€æ­¥çš„çŠ¶æ€ï¼Œä»è€Œè¿›è¡Œå„ç§é’ˆå¯¹æ€§çš„å¤„ç†ã€‚Chrome 68 æ”¯æŒè¿™ä¸ª APIï¼Œå¯¹äºè€å¼æµè§ˆå™¨å¯ä»¥ä½¿ç”¨è°·æ­Œå¼€å‘çš„å…¼å®¹åº“ <a href="https://github.com/GoogleChromeLabs/page-lifecycle">PageLifecycle.js</a>ã€‚</p><h2 id="ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ">ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ <a href="about:blank#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%98%B6%E6%AE%B5">#</a></h2><p>ç½‘é¡µçš„ç”Ÿå‘½å‘¨æœŸåˆ†æˆå…­ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªæ—¶åˆ»åªå¯èƒ½å¤„äºå…¶ä¸­ä¸€ä¸ªé˜¶æ®µã€‚</p><p><img src="https://www.wangbase.com/blogimg/asset/201811/bg2018110401.png" alt=""></p><p><strong>ï¼ˆ1ï¼‰Active é˜¶æ®µ</strong></p><p>åœ¨ Active é˜¶æ®µï¼Œç½‘é¡µå¤„äºå¯è§çŠ¶æ€ï¼Œä¸”æ‹¥æœ‰è¾“å…¥ç„¦ç‚¹ã€‚</p><p><strong>ï¼ˆ2ï¼‰Passive é˜¶æ®µ</strong></p><p>åœ¨ Passive é˜¶æ®µï¼Œç½‘é¡µå¯è§ï¼Œä½†æ²¡æœ‰è¾“å…¥ç„¦ç‚¹ï¼Œæ— æ³•æ¥å—è¾“å…¥ã€‚UI æ›´æ–°ï¼ˆæ¯”å¦‚åŠ¨ç”»ï¼‰ä»ç„¶åœ¨æ‰§è¡Œã€‚è¯¥é˜¶æ®µåªå¯èƒ½å‘ç”Ÿåœ¨æ¡Œé¢åŒæ—¶æœ‰å¤šä¸ªçª—å£çš„æƒ…å†µã€‚</p><p><strong>ï¼ˆ3ï¼‰Hidden é˜¶æ®µ</strong></p><p>åœ¨ Hidden é˜¶æ®µï¼Œç”¨æˆ·çš„æ¡Œé¢è¢«å…¶ä»–çª—å£å æ®ï¼Œç½‘é¡µä¸å¯è§ï¼Œä½†å°šæœªå†»ç»“ã€‚UI æ›´æ–°ä¸å†æ‰§è¡Œã€‚</p><p><strong>ï¼ˆ4ï¼‰Terminated é˜¶æ®µ</strong></p><p>åœ¨ Terminated é˜¶æ®µï¼Œç”±äºç”¨æˆ·ä¸»åŠ¨å…³é—­çª—å£ï¼Œæˆ–è€…åœ¨åŒä¸€ä¸ªçª—å£å‰å¾€å…¶ä»–é¡µé¢ï¼Œå¯¼è‡´å½“å‰é¡µé¢å¼€å§‹è¢«æµè§ˆå™¨å¸è½½å¹¶ä»å†…å­˜ä¸­æ¸…é™¤ã€‚æ³¨æ„ï¼Œè¿™ä¸ªé˜¶æ®µæ€»æ˜¯åœ¨ Hidden é˜¶æ®µä¹‹åå‘ç”Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ä¸»åŠ¨ç¦»å¼€å½“å‰é¡µé¢ï¼Œæ€»æ˜¯å…ˆè¿›å…¥ Hidden é˜¶æ®µï¼Œå†è¿›å…¥ Terminated é˜¶æ®µã€‚</p><p>è¿™ä¸ªé˜¶æ®µä¼šå¯¼è‡´ç½‘é¡µå¸è½½ï¼Œä»»ä½•æ–°ä»»åŠ¡éƒ½ä¸ä¼šåœ¨è¿™ä¸ªé˜¶æ®µå¯åŠ¨ï¼Œå¹¶ä¸”å¦‚æœè¿è¡Œæ—¶é—´å¤ªé•¿ï¼Œæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡å¯èƒ½ä¼šè¢«ç»ˆæ­¢ã€‚</p><p><strong>ï¼ˆ5ï¼‰Frozen é˜¶æ®µ</strong></p><p>å¦‚æœç½‘é¡µå¤„äº Hidden é˜¶æ®µçš„æ—¶é—´è¿‡ä¹…ï¼Œç”¨æˆ·åˆä¸å…³é—­ç½‘é¡µï¼Œæµè§ˆå™¨å°±æœ‰å¯èƒ½å†»ç»“ç½‘é¡µï¼Œä½¿å…¶è¿›å…¥ Frozen é˜¶æ®µã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰å¯èƒ½ï¼Œå¤„äºå¯è§çŠ¶æ€çš„é¡µé¢é•¿æ—¶é—´æ²¡æœ‰æ“ä½œï¼Œä¹Ÿä¼šè¿›å…¥ Frozen é˜¶æ®µã€‚</p><p>è¿™ä¸ªé˜¶æ®µçš„ç‰¹å¾æ˜¯ï¼Œç½‘é¡µä¸ä¼šå†è¢«åˆ†é… CPU è®¡ç®—èµ„æºã€‚å®šæ—¶å™¨ã€å›è°ƒå‡½æ•°ã€ç½‘ç»œè¯·æ±‚ã€DOM æ“ä½œéƒ½ä¸ä¼šæ‰§è¡Œï¼Œä¸è¿‡æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ä¼šæ‰§è¡Œå®Œã€‚æµè§ˆå™¨å¯èƒ½ä¼šå…è®¸ Frozen é˜¶æ®µçš„é¡µé¢ï¼Œå‘¨æœŸæ€§å¤è‹ä¸€å°æ®µæ—¶é—´ï¼ŒçŸ­æš‚å˜å› Hidden çŠ¶æ€ï¼Œå…è®¸ä¸€å°éƒ¨åˆ†ä»»åŠ¡æ‰§è¡Œã€‚</p><p><strong>ï¼ˆ6ï¼‰Discarded é˜¶æ®µ</strong></p><p>å¦‚æœç½‘é¡µé•¿æ—¶é—´å¤„äº Frozen é˜¶æ®µï¼Œç”¨æˆ·åˆä¸å”¤é†’é¡µé¢ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ Discarded é˜¶æ®µï¼Œå³æµè§ˆå™¨è‡ªåŠ¨å¸è½½ç½‘é¡µï¼Œæ¸…é™¤è¯¥ç½‘é¡µçš„å†…å­˜å ç”¨ã€‚ä¸è¿‡ï¼ŒPassive é˜¶æ®µçš„ç½‘é¡µå¦‚æœé•¿æ—¶é—´æ²¡æœ‰äº’åŠ¨ï¼Œä¹Ÿå¯èƒ½ç›´æ¥è¿›å…¥ Discarded é˜¶æ®µã€‚</p><p>è¿™ä¸€èˆ¬æ˜¯åœ¨ç”¨æˆ·æ²¡æœ‰ä»‹å…¥çš„æƒ…å†µä¸‹ï¼Œç”±ç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œã€‚ä»»ä½•ç±»å‹çš„æ–°ä»»åŠ¡æˆ– JavaScript ä»£ç ï¼Œéƒ½ä¸èƒ½åœ¨æ­¤é˜¶æ®µæ‰§è¡Œï¼Œå› ä¸ºè¿™æ—¶é€šå¸¸å¤„åœ¨èµ„æºé™åˆ¶çš„çŠ¶å†µä¸‹ã€‚</p><p>ç½‘é¡µè¢«æµè§ˆå™¨è‡ªåŠ¨ Discarded ä»¥åï¼Œå®ƒçš„ Tab çª—å£è¿˜æ˜¯åœ¨çš„ã€‚å¦‚æœç”¨æˆ·é‡æ–°è®¿é—®è¿™ä¸ª Tab é¡µï¼Œæµè§ˆå™¨å°†ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œå†ä¸€æ¬¡é‡æ–°åŠ è½½ç½‘é¡µï¼Œå›åˆ° Active é˜¶æ®µã€‚</p><h2 id="å¸¸è§åœºæ™¯">å¸¸è§åœºæ™¯ <a href="about:blank#%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF">#</a></h2><p>ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§åœºæ™¯çš„ç½‘é¡µç”Ÿå‘½å‘¨æœŸå˜åŒ–ã€‚</p><p>ï¼ˆ1ï¼‰ç”¨æˆ·æ‰“å¼€ç½‘é¡µåï¼Œåˆåˆ‡æ¢åˆ°å…¶ä»– Appï¼Œä½†åªè¿‡äº†ä¸€ä¼šåˆå›åˆ°ç½‘é¡µã€‚</p><p>ç½‘é¡µç”± Active å˜æˆ Hiddenï¼Œåˆå˜å› Activeã€‚</p><p>ï¼ˆ2ï¼‰ç”¨æˆ·æ‰“å¼€ç½‘é¡µåï¼Œåˆåˆ‡æ¢åˆ°å…¶ä»– Appï¼Œå¹¶ä¸”é•¿æ—¶å€™ä½¿ç”¨åè€…ï¼Œå¯¼è‡´ç³»ç»Ÿè‡ªåŠ¨ä¸¢å¼ƒç½‘é¡µã€‚</p><p>ç½‘é¡µç”± Active å˜æˆ Hiddenï¼Œå†å˜æˆ Frozenï¼Œæœ€å Discardedã€‚</p><p>ï¼ˆ3ï¼‰ç”¨æˆ·æ‰“å¼€ç½‘é¡µåï¼Œåˆåˆ‡æ¢åˆ°å…¶ä»– Appï¼Œç„¶åä»ä»»åŠ¡ç®¡ç†å™¨é‡Œé¢å°†æµè§ˆå™¨è¿›ç¨‹æ¸…é™¤ã€‚</p><p>ç½‘é¡µç”± Active å˜æˆ Hiddenï¼Œç„¶å Terminatedã€‚</p><p>ï¼ˆ4ï¼‰ç³»ç»Ÿä¸¢å¼ƒäº†æŸä¸ª Tab é‡Œé¢çš„é¡µé¢åï¼Œç”¨æˆ·é‡æ–°æ‰“å¼€è¿™ä¸ª Tabã€‚</p><p>ç½‘é¡µç”± Discarded å˜æˆ Activeã€‚</p><h2 id="äº‹ä»¶">äº‹ä»¶ <a href="about:blank#%E4%BA%8B%E4%BB%B6">#</a></h2><p>ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µéƒ½æœ‰è‡ªå·±çš„äº‹ä»¶ï¼Œä»¥ä¾›å¼€å‘è€…æŒ‡å®šç›‘å¬å‡½æ•°ã€‚è¿™äº›äº‹ä»¶é‡Œé¢ï¼Œåªæœ‰ä¸¤ä¸ªæ˜¯æ–°å®šä¹‰çš„ï¼ˆ<code>freeze</code>äº‹ä»¶å’Œ<code>resume</code>äº‹ä»¶ï¼‰ï¼Œå…¶å®ƒéƒ½æ˜¯ç°æœ‰çš„ã€‚</p><p>æ³¨æ„ï¼Œç½‘é¡µçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ˜¯åœ¨æ‰€æœ‰å¸§ï¼ˆframeï¼‰è§¦å‘ï¼Œä¸ç®¡æ˜¯åº•å±‚çš„å¸§ï¼Œè¿˜æ˜¯å†…åµŒçš„å¸§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå†…åµŒçš„<code>&lt;iframe&gt;</code>ç½‘é¡µè·Ÿé¡¶å±‚ç½‘é¡µä¸€æ ·ï¼Œéƒ½ä¼šåŒæ—¶ç›‘å¬åˆ°ä¸‹é¢çš„äº‹ä»¶ã€‚</p><h3 id="focus-äº‹ä»¶">focus äº‹ä»¶ <a href="about:blank#focus-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>focus</code>äº‹ä»¶åœ¨é¡µé¢è·å¾—è¾“å…¥ç„¦ç‚¹æ—¶è§¦å‘ï¼Œæ¯”å¦‚ç½‘é¡µä» Passive é˜¶æ®µå˜ä¸º Active é˜¶æ®µã€‚</p><h3 id="blur-äº‹ä»¶">blur äº‹ä»¶ <a href="about:blank#blur-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>blur</code>äº‹ä»¶åœ¨é¡µé¢å¤±å»è¾“å…¥ç„¦ç‚¹æ—¶è§¦å‘ï¼Œæ¯”å¦‚ç½‘é¡µä» Active é˜¶æ®µå˜ä¸º Passive é˜¶æ®µã€‚</p><h3 id="visibilitychange-äº‹ä»¶">visibilitychange äº‹ä»¶ <a href="about:blank#visibilitychange-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>visibilitychange</code>äº‹ä»¶åœ¨ç½‘é¡µå¯è§çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œä¸€èˆ¬å‘ç”Ÿåœ¨ä»¥ä¸‹å‡ ç§åœºæ™¯ã€‚</p><blockquote><ul><li>ç”¨æˆ·éšè—é¡µé¢ï¼ˆåˆ‡æ¢ Tabã€æœ€å°åŒ–æµè§ˆå™¨ï¼‰ï¼Œé¡µé¢ç”± Active é˜¶æ®µå˜æˆ Hidden é˜¶æ®µã€‚</li><li>ç”¨æˆ·é‡æ–°è®¿é—®éšè—çš„é¡µé¢ï¼Œé¡µé¢ç”± Hidden é˜¶æ®µå˜æˆ Active é˜¶æ®µã€‚</li><li>ç”¨æˆ·å…³é—­é¡µé¢ï¼Œé¡µé¢ä¼šå…ˆè¿›å…¥ Hidden é˜¶æ®µï¼Œç„¶åè¿›å…¥ Terminated é˜¶æ®µã€‚</li></ul></blockquote><p>å¯ä»¥é€šè¿‡<code>document.onvisibilitychange</code>å±æ€§æŒ‡å®šè¿™ä¸ªäº‹ä»¶çš„å›è°ƒå‡½æ•°ã€‚</p><h3 id="freeze-äº‹ä»¶">freeze äº‹ä»¶ <a href="about:blank#freeze-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>freeze</code>äº‹ä»¶åœ¨ç½‘é¡µè¿›å…¥ Frozen é˜¶æ®µæ—¶è§¦å‘ã€‚</p><p>å¯ä»¥é€šè¿‡<code>document.onfreeze</code>å±æ€§æŒ‡å®šåœ¨è¿›å…¥ Frozen é˜¶æ®µæ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleFreeze</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Handle transition to FROZEN</span></span><br><span class="line">&#125;</span><br><span class="line">document.<span class="title function_ invoke__">addEventListener</span>(<span class="string">&#x27;freeze&#x27;</span>, handleFreeze);</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">document.onfreeze = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; â€¦ &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œæœ€é•¿åªèƒ½è¿è¡Œ500æ¯«ç§’ã€‚å¹¶ä¸”åªèƒ½å¤ç”¨å·²ç»æ‰“å¼€çš„ç½‘ç»œè¿æ¥ï¼Œä¸èƒ½å‘èµ·æ–°çš„ç½‘ç»œè¯·æ±‚ã€‚</p><p>æ³¨æ„ï¼Œä» Frozen é˜¶æ®µè¿›å…¥ Discarded é˜¶æ®µï¼Œä¸ä¼šè§¦å‘ä»»ä½•äº‹ä»¶ï¼Œæ— æ³•æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œåªèƒ½åœ¨è¿›å…¥ Frozen é˜¶æ®µæ—¶æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p><h3 id="resume-äº‹ä»¶">resume äº‹ä»¶ <a href="about:blank#resume-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>resume</code>äº‹ä»¶åœ¨ç½‘é¡µç¦»å¼€ Frozen é˜¶æ®µï¼Œå˜ä¸º Active / Passive / Hidden é˜¶æ®µæ—¶è§¦å‘ã€‚</p><p><code>document.onresume</code>å±æ€§æŒ‡çš„æ˜¯é¡µé¢ç¦»å¼€ Frozen é˜¶æ®µã€è¿›å…¥å¯ç”¨çŠ¶æ€æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleResume</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// handle state transition FROZEN -&gt; ACTIVE</span></span><br><span class="line">&#125;</span><br><span class="line">document.<span class="title function_ invoke__">addEventListener</span>(<span class="string">&quot;resume&quot;</span>, handleResume);</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">document.onresume = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; â€¦ &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="pageshow-äº‹ä»¶">pageshow äº‹ä»¶ <a href="about:blank#pageshow-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>pageshow</code>äº‹ä»¶åœ¨ç”¨æˆ·åŠ è½½ç½‘é¡µæ—¶è§¦å‘ã€‚è¿™æ—¶ï¼Œæœ‰å¯èƒ½æ˜¯å…¨æ–°çš„é¡µé¢åŠ è½½ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»ç¼“å­˜ä¸­è·å–çš„é¡µé¢ã€‚å¦‚æœæ˜¯ä»ç¼“å­˜ä¸­è·å–ï¼Œåˆ™è¯¥äº‹ä»¶å¯¹è±¡çš„<code>event.persisted</code>å±æ€§ä¸º<code>true</code>ï¼Œå¦åˆ™ä¸º<code>false</code>ã€‚</p><p>è¿™ä¸ªäº‹ä»¶çš„åå­—æœ‰ç‚¹è¯¯å¯¼ï¼Œå®ƒè·Ÿé¡µé¢çš„å¯è§æ€§å…¶å®æ¯«æ— å…³ç³»ï¼Œåªè·Ÿæµè§ˆå™¨çš„ History è®°å½•çš„å˜åŒ–æœ‰å…³ã€‚</p><h3 id="pagehide-äº‹ä»¶">pagehide äº‹ä»¶ <a href="about:blank#pagehide-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>pagehide</code>äº‹ä»¶åœ¨ç”¨æˆ·ç¦»å¼€å½“å‰ç½‘é¡µã€è¿›å…¥å¦ä¸€ä¸ªç½‘é¡µæ—¶è§¦å‘ã€‚å®ƒçš„å‰ææ˜¯æµè§ˆå™¨çš„ History è®°å½•å¿…é¡»å‘ç”Ÿå˜åŒ–ï¼Œè·Ÿç½‘é¡µæ˜¯å¦å¯è§æ— å…³ã€‚</p><p>å¦‚æœæµè§ˆå™¨èƒ½å¤Ÿå°†å½“å‰é¡µé¢æ·»åŠ åˆ°ç¼“å­˜ä»¥ä¾›ç¨åé‡ç”¨ï¼Œåˆ™äº‹ä»¶å¯¹è±¡çš„<code>event.persisted</code>å±æ€§ä¸º<code>true</code>ã€‚ å¦‚æœä¸º<code>true</code>ã€‚å¦‚æœé¡µé¢æ·»åŠ åˆ°äº†ç¼“å­˜ï¼Œåˆ™é¡µé¢è¿›å…¥ Frozen çŠ¶æ€ï¼Œå¦åˆ™è¿›å…¥ Terminatied çŠ¶æ€ã€‚</p><h3 id="beforeunload-äº‹ä»¶">beforeunload äº‹ä»¶ <a href="about:blank#beforeunload-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>beforeunload</code>äº‹ä»¶åœ¨çª—å£æˆ–æ–‡æ¡£å³å°†å¸è½½æ—¶è§¦å‘ã€‚è¯¥äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ–‡æ¡£ä»ç„¶å¯è§ï¼Œæ­¤æ—¶å¸è½½ä»å¯å–æ¶ˆã€‚ç»è¿‡è¿™ä¸ªäº‹ä»¶ï¼Œç½‘é¡µè¿›å…¥ Terminated çŠ¶æ€ã€‚</p><h3 id="unload-äº‹ä»¶">unload äº‹ä»¶ <a href="about:blank#unload-%E4%BA%8B%E4%BB%B6">#</a></h3><p><code>unload</code>äº‹ä»¶åœ¨é¡µé¢æ­£åœ¨å¸è½½æ—¶è§¦å‘ã€‚ç»è¿‡è¿™ä¸ªäº‹ä»¶ï¼Œç½‘é¡µè¿›å…¥ Terminated çŠ¶æ€ã€‚</p><h2 id="è·å–å½“å‰é˜¶æ®µ">è·å–å½“å‰é˜¶æ®µ <a href="about:blank#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E9%98%B6%E6%AE%B5">#</a></h2><p>å¦‚æœç½‘é¡µå¤„äº Activeã€Passive æˆ– Hidden é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œè·å¾—ç½‘é¡µå½“å‰çš„çŠ¶æ€ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getState = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.visibilityState === <span class="string">&#x27;hidden&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.hasFocus()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;active&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;passive&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç½‘é¡µå¤„äº Frozen å’Œ Terminated çŠ¶æ€ï¼Œç”±äºå®šæ—¶å™¨ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œåªèƒ½é€šè¿‡äº‹ä»¶ç›‘å¬åˆ¤æ–­çŠ¶æ€ã€‚è¿›å…¥ Frozen é˜¶æ®µï¼Œå¯ä»¥ç›‘å¬<code>freeze</code>äº‹ä»¶ï¼›è¿›å…¥ Terminated é˜¶æ®µï¼Œå¯ä»¥ç›‘å¬<code>pagehide</code>äº‹ä»¶ã€‚</p><h2 id="document-wasDiscarded">document.wasDiscarded <a href="about:blank#documentwasdiscarded">#</a></h2><p>å¦‚æœæŸä¸ªé€‰é¡¹å¡å¤„äº Frozen é˜¶æ®µï¼Œå°±éšæ—¶æœ‰å¯èƒ½è¢«ç³»ç»Ÿä¸¢å¼ƒï¼Œè¿›å…¥ Discarded é˜¶æ®µã€‚å¦‚æœåæ¥ç”¨æˆ·å†æ¬¡ç‚¹å‡»è¯¥é€‰é¡¹å¡ï¼Œæµè§ˆå™¨ä¼šé‡æ–°åŠ è½½è¯¥é¡µé¢ã€‚</p><p>è¿™æ—¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡åˆ¤æ–­<code>document.wasDiscarded</code>å±æ€§ï¼Œäº†è§£å…ˆå‰çš„ç½‘é¡µæ˜¯å¦è¢«ä¸¢å¼ƒäº†ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (document.wasDiscarded) &#123;</span><br><span class="line">  <span class="comment">// è¯¥ç½‘é¡µå·²ç»ä¸æ˜¯åŸæ¥çš„çŠ¶æ€äº†ï¼Œæ›¾ç»è¢«æµè§ˆå™¨ä¸¢å¼ƒè¿‡</span></span><br><span class="line">  <span class="comment">// æ¢å¤ä»¥å‰çš„çŠ¶æ€</span></span><br><span class="line">  <span class="built_in">getPersistedState</span>(self.discardedClientId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œ<code>window</code>å¯¹è±¡ä¸Šä¼šæ–°å¢<code>window.clientId</code>å’Œ<code>window.discardedClientId</code>ä¸¤ä¸ªå±æ€§ï¼Œç”¨æ¥æ¢å¤ä¸¢å¼ƒå‰çš„çŠ¶æ€ã€‚</p><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li><a href="https://developers.google.com/web/updates/2018/07/page-lifecycle-api">Page Lifecycle API</a>, Philip Walton</li><li><a href="https://github.com/WICG/page-lifecycle">Lifecycle API for Web Pages</a>, W3C</li><li><a href="https://wicg.github.io/page-lifecycle/spec.html">Page Lifecycle 1 Editorâ€™s Draft</a>, W3C</li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/page-lifecycle">https://wangdoc.com/webapi/page-lifecycle</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Page Lifecycle API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Intl segmenter API</title>
    <link href="https://www.hacp.top/posts/42.html"/>
    <id>https://www.hacp.top/posts/42.html</id>
    <published>2023-07-10T10:19:03.000Z</published>
    <updated>2023-07-10T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Intl segmenter API</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>Intl.Segmenter æ˜¯æµè§ˆå™¨å†…ç½®çš„ç”¨äºæ–‡æœ¬åˆ†è¯çš„ APIã€‚</p><p>ä½¿ç”¨æ—¶ï¼Œå…ˆç”¨<code>Intl.Segmenter()</code>æ–°å»ºä¸€ä¸ªåˆ†è¯å™¨å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenter = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Segmenter</span>(</span><br><span class="line">  <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">  &#123; <span class="attr">granularity</span>: <span class="string">&#x27;word&#x27;</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Intl.Segmenter()</code>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰€è¦åˆ†è¯çš„è¯­è¨€ç®€ç§°ï¼ˆä¸Šä¾‹æ˜¯<code>en</code>ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ã€‚</p><ul><li><code>localeMatcher</code>ï¼šæŒ‡å®šåˆ†è¯ç®—æ³•ï¼Œæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼Œä¸€ä¸ªæ˜¯<code>lookup</code>ï¼Œè¡¨ç¤ºé‡‡ç”¨ç‰¹å®šçš„ç®—æ³•ï¼ˆBCP 47ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯<code>best fit</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œè¡¨ç¤ºé‡‡ç”¨æ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨ç°æœ‰çš„å°½å¯èƒ½é€‚ç”¨çš„ç®—æ³•ã€‚</li><li><code>granularity</code>ï¼šè¡¨ç¤ºåˆ†è¯çš„é¢—ç²’åº¦ï¼Œæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼šgraphemeï¼ˆå­—ç¬¦ï¼Œè¿™æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œwordï¼ˆè¯è¯­ï¼‰ï¼Œsentenceï¼ˆå¥å­ï¼‰ã€‚</li></ul><p>æ‹¿åˆ°åˆ†è¯å™¨å¯¹è±¡ä»¥åï¼Œå°±å¯ä»¥è¿›è¡Œåˆ†è¯äº†ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const segmenter = <span class="keyword">new</span> <span class="built_in">Intl</span>.Segmenter(</span><br><span class="line">  <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">  &#123; granularity: <span class="string">&#x27;word&#x27;</span> &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">const segments = segmenter.segment(<span class="string">&#x27;This has four words!&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.<span class="keyword">from</span>(segments).map(<span class="function"><span class="params">(segment)</span> =&gt;</span> segment.segment);</span><br><span class="line"><span class="regexp">//</span> [<span class="string">&#x27;This&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;words&#x27;</span>, <span class="string">&#x27;!&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå˜é‡<code>segmenter</code>æ˜¯åˆ†è¯å™¨å¯¹è±¡ï¼Œå¯ä»¥å¯¹è‹±è¯­è¿›è¡Œåˆ†è¯ï¼Œé¢—ç²’åº¦æ˜¯è¯è¯­ã€‚æ‰€ä»¥ï¼Œâ€œThis has four words!â€è¢«åˆ†æˆäº†8ä¸ªéƒ¨åˆ†ï¼ŒåŒ…æ‹¬4ä¸ªè¯è¯­ã€3ä¸ªç©ºæ ¼å’Œ1ä¸ªæ ‡ç‚¹ç¬¦å·ã€‚</p><p>åˆ†è¯å™¨å¯¹è±¡çš„<code>segment()</code>æ–¹æ³•æ˜¯å®é™…çš„åˆ†è¯æ–¹æ³•ï¼Œå®ƒçš„å‚æ•°æ˜¯éœ€è¦åˆ†è¯çš„æ–‡æœ¬ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå…·æœ‰è¿­ä»£å™¨æ¥å£çš„åˆ†è¯ç»“æœå¯¹è±¡ã€‚<code>Array.from()</code>å°†è¿™ä¸ªåˆ†è¯ç»“æœå¯¹è±¡è½¬æˆæ•°ç»„ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨<code>[...segments]</code>çš„å†™æ³•ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ˜¯è¿‡æ»¤æ‰éè¯è¯­å­—ç¬¦ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const segments = segmenter.segment(<span class="string">&#x27;This has four words!&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.<span class="keyword">from</span>(segments)</span><br><span class="line">  .filter(<span class="function"><span class="params">(segment)</span> =&gt;</span> segment.isWordLike)</span><br><span class="line">  .map(<span class="function"><span class="params">(segment)</span> =&gt;</span> segment.segment);</span><br><span class="line"><span class="regexp">//</span> [<span class="string">&#x27;This&#x27;</span>, <span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;words&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>Array.from()</code>å°†åˆ†è¯ç»“æœå¯¹è±¡è½¬æˆä¸€ä¸ªæ•°ç»„ï¼Œå˜é‡<code>segment</code>æ˜¯æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„<code>isWordLike</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å€¼æ˜¯å¦ä¸ºä¸€ä¸ªçœŸæ­£çš„è¯ï¼Œè€Œè¯¥å¯¹è±¡çš„<code>segment</code>å±æ€§ï¼ˆä¸Šä¾‹çš„<code>segment.segment</code>ï¼‰åˆ™æ˜¯çœŸæ­£çš„åˆ†è¯ç»“æœã€‚</p><p>Intl Segmenter æ”¯æŒå„ç§è¯­è¨€ï¼Œä¸‹é¢æ˜¯æ—¥è¯­åˆ†è¯çš„ä¾‹å­ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const segmenter = <span class="keyword">new</span> <span class="built_in">Intl</span>.Segmenter(<span class="string">&#x27;ja&#x27;</span>, &#123; granularity: <span class="string">&#x27;word&#x27;</span> &#125;);</span><br><span class="line">const segments = segmenter.segment(<span class="string">&#x27;ã“ã‚Œã¯æ—¥æœ¬èªã®ãƒ†ã‚­ã‚¹ãƒˆã§ã™&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.<span class="keyword">from</span>(segments).map(<span class="function"><span class="params">(segment)</span> =&gt;</span> segment.segment);</span><br><span class="line"><span class="regexp">//</span> [<span class="string">&#x27;ã“ã‚Œ&#x27;</span>, <span class="string">&#x27;ã¯&#x27;</span>, <span class="string">&#x27;æ—¥æœ¬èª&#x27;</span>, <span class="string">&#x27;ã®&#x27;</span>, <span class="string">&#x27;ãƒ†ã‚­ã‚¹ãƒˆ&#x27;</span>, <span class="string">&#x27;ã§ã™&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ³•è¯­çš„ä¾‹å­ã€‚</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenterFr = <span class="keyword">new</span> Intl.Segmenter(<span class="string">&#x27;fr&#x27;</span>, &#123; granularity: <span class="string">&#x27;word&#x27;</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator1 = segmenterFr.segment(string1)[Symbol.iterator]();</span><br><span class="line"></span><br><span class="line">iterator1.<span class="keyword">next</span>().value.segment <span class="comment">// &#x27;Que&#x27;</span></span><br><span class="line">iterator1.<span class="keyword">next</span>().value.segment <span class="comment">// &#x27; &#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³• <a href="about:blank#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">#</a></h2><h3 id="Intl-Segmenter-supportedLocalesOf">Intl.Segmenter.supportedLocalesOf() <a href="about:blank#intlsegmentersupportedlocalesof">#</a></h3><p><code>Intl.Segmenter.supportedLocalesOf()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥æ£€æµ‹å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒæŒ‡å®šè¯­è¨€çš„åˆ†è¯ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> locales1 = [<span class="string">&#x27;ban&#x27;</span>, <span class="string">&#x27;id-u-co-pinyin&#x27;</span>, <span class="string">&#x27;de-ID&#x27;</span>]<span class="comment">;</span></span><br><span class="line"><span class="keyword">const</span> options1 = &#123; localeMatcher: <span class="string">&#x27;lookup&#x27;</span>, granularity: <span class="string">&#x27;string&#x27;</span> &#125;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Intl.Segmenter.supportedLocalesOf(locales1, options1)</span><br><span class="line">// [<span class="string">&quot;id-u-co-pinyin&quot;</span>, <span class="string">&quot;de-ID&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æˆå‘˜æ˜¯éœ€è¦æ£€æµ‹çš„è¯­è¨€ç®€ç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®å¯¹è±¡ï¼Œè·Ÿæ„é€ æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥çœç•¥ã€‚</p><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œéœ€è¦æ£€æµ‹çš„ä¸‰ç§è¯­è¨€åˆ†åˆ«æ˜¯å·´å˜å²›è¯­ï¼ˆbanï¼‰ã€å°åº¦å°¼è¥¿äºšè¯­ï¼ˆid-u-co-pinyinï¼‰ã€å¾·è¯­ï¼ˆde-IDï¼‰ã€‚ç»“æœæ˜¾ç¤ºåªæ”¯æŒå‰ä¸¤è€…ï¼Œä¸æ”¯æŒå·´å˜å²›è¯­ã€‚</p><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="resolvedOptions">resolvedOptions() <a href="about:blank#resolvedoptions">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>resolvedOptions()</code>æ–¹æ³•ï¼Œç”¨äºè·å–æ„é€ è¯¥å®ä¾‹æ—¶çš„å‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenter1 = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Segmenter</span>(<span class="string">&#x27;fr-FR&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> options1 = segmenter1.<span class="title function_">resolvedOptions</span>();</span><br><span class="line"></span><br><span class="line">options1.<span class="property">locale</span> <span class="comment">// &quot;fr-FR&quot;</span></span><br><span class="line">options1.<span class="property">granularity</span> <span class="comment">// &quot;grapheme&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>resolveOptions()</code>æ–¹æ³•è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„<code>locale</code>å±æ€§å¯¹åº”æ„é€ æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ<code>granularity</code>å±æ€§å¯¹åº”æ„é€ æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡çš„é¢—ç²’åº¦å±æ€§ã€‚</p><h3 id="segment">segment() <a href="about:blank#segment">#</a></h3><p>å®ä¾‹å¯¹è±¡çš„<code>segment()</code>æ–¹æ³•è¿›è¡Œå®é™…çš„åˆ†è¯ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenterFr = new Intl.Segmenter(<span class="string">&#x27;fr&#x27;</span>, &#123; granularity: <span class="string">&#x27;word&#x27;</span> &#125;)<span class="comment">;</span></span><br><span class="line"><span class="keyword">const</span> string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> segments = segmenterFr.segment(string1)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">segments.containing(<span class="number">5</span>)</span><br><span class="line">// &#123;segment: <span class="string">&#x27;ma&#x27;</span>, index: <span class="number">4</span>, input: <span class="string">&#x27;Que ma joie demeure&#x27;</span>, isWordLike: <span class="literal">true</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>segment()</code>æ–¹æ³•çš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªå…·æœ‰è¿­ä»£å™¨æ¥å£çš„åˆ†è¯ç»“æœå¯¹è±¡ï¼Œæœ‰ä¸‰ç§æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨<code>Array.from()</code>æˆ–æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰å°†åˆ†è¯ç»“æœå¯¹è±¡è½¬æˆæ•°ç»„ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const segmenterFr = <span class="keyword">new</span> Intl.Segmenter(<span class="string">&#x27;fr&#x27;</span>, &#123; <span class="attr">granularity</span>: <span class="string">&#x27;word&#x27;</span> &#125;);</span><br><span class="line">const string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span>;</span><br><span class="line"></span><br><span class="line">const iterator1 = segmenterFr.segment(string1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.from(iterator1).<span class="built_in">map</span>(<span class="function"><span class="params">segment</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (segment.segment.<span class="built_in">length</span> &gt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(segment.segment);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// demeure</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>segmenterFr.segment()</code>è¿”å›ä¸€ä¸ªé’ˆå¯¹<code>string1</code>çš„åˆ†è¯ç»“æœå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰è¿­ä»£å™¨æ¥å£ã€‚<code>Array.from()</code>å°†å…¶è½¬ä¸ºæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªåˆ†è¯é¢—ç²’å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„<code>segment</code>å±æ€§å°±æ˜¯åˆ†è¯ç»“æœã€‚åˆ†è¯é¢—ç²’å¯¹è±¡çš„ä»‹ç»ï¼Œè¯¦è§åæ–‡ã€‚</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œéå†åˆ†è¯ç»“æœå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenterFr = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Segmenter</span>(<span class="string">&#x27;fr&#x27;</span>, &#123; <span class="attr">granularity</span>: <span class="string">&#x27;word&#x27;</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator1 = segmenterFr.<span class="title function_">segment</span>(string1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> segment <span class="keyword">of</span> iterator1) &#123;</span><br><span class="line">  <span class="keyword">if</span> (segment.<span class="property">segment</span>.<span class="property">length</span> &gt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(segment.<span class="property">segment</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// demeure</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>for...of</code>é»˜è®¤è°ƒç”¨åˆ†è¯ç»“æœå¯¹è±¡çš„è¿­ä»£å™¨æ¥å£ï¼Œè·å–æ¯ä¸€è½®çš„åˆ†è¯é¢—ç²’å¯¹è±¡ã€‚</p><p>ç”±äºè¿­ä»£å™¨æ¥å£æ˜¯åœ¨<code>Symbol.iterator</code>å±æ€§ä¸Šé¢ï¼Œæ‰€ä»¥å®é™…æ‰§è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenterFr = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">Segmenter</span>(<span class="string">&#x27;fr&#x27;</span>, &#123; <span class="attr">granularity</span>: <span class="string">&#x27;word&#x27;</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterator1 = segmenterFr.<span class="title function_">segment</span>(string1)[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> segment <span class="keyword">of</span> iterator1) &#123;</span><br><span class="line">  <span class="keyword">if</span> (segment.<span class="property">segment</span>.<span class="property">length</span> &gt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(segment.<span class="property">segment</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;demeure&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>for...of</code>å¾ªç¯æ¯ä¸€è½®å¾—åˆ°çš„æ˜¯ä¸€ä¸ªåˆ†è¯é¢—ç²’å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„<code>segment</code>å±æ€§å°±æ˜¯å½“å‰çš„åˆ†è¯ç»“æœï¼Œè¯¦è§ä¸‹æ–‡ã€‚</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨<code>containing()</code>æ–¹æ³•è·å–æŸä¸ªä½ç½®çš„åˆ†è¯é¢—ç²’å¯¹è±¡ã€‚</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> segmenterFr = new Intl.Segmenter(<span class="string">&#x27;fr&#x27;</span>, &#123; granularity: <span class="string">&#x27;word&#x27;</span> &#125;)<span class="comment">;</span></span><br><span class="line"><span class="keyword">const</span> string1 = <span class="string">&#x27;Que ma joie demeure&#x27;</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> segments = segmenterFr.segment(string1)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">segments.containing(<span class="number">5</span>)</span><br><span class="line">// &#123;segment: <span class="string">&#x27;ma&#x27;</span>, index: <span class="number">4</span>, input: <span class="string">&#x27;Que ma joie demeure&#x27;</span>, isWordLike: <span class="literal">true</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>containing()</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåŸå§‹å­—ç¬¦ä¸²çš„æŒ‡å®šä½ç½®ï¼ˆä»0å¼€å§‹è®¡ç®—ï¼‰ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œåˆ™é»˜è®¤ä¸º0ã€‚</p><p><code>containing()</code>çš„è¿”å›å€¼æ˜¯è¯¥ä½ç½®çš„åˆ†è¯é¢—ç²’å¯¹è±¡ï¼Œå¦‚æœå‚æ•°ä½ç½®è¶…å‡ºåŸå§‹å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚åˆ†è¯é¢—ç²’å¯¹è±¡æœ‰ä»¥ä¸‹å±æ€§ã€‚</p><ul><li>segmentï¼šæŒ‡å®šä½ç½®å¯¹åº”çš„åˆ†è¯ç»“æœã€‚</li><li>indexï¼šæœ¬æ¬¡åˆ†è¯åœ¨åŸå§‹å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</li><li>inputï¼šè¿›è¡Œåˆ†è¯çš„åŸå§‹å­—ç¬¦ä¸²ã€‚</li><li>isWordLikeï¼šå¦‚æœåˆ†è¯é¢—ç²’åº¦ä¸º<code>word</code>ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å€¼æ˜¯å¦ä¸€ä¸ªçœŸæ­£çš„è¯ã€‚å¦‚æœåˆ†è¯é¢—ç²’åº¦ä¸ä¸º<code>word</code>ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚</li></ul><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const input <span class="operator">=</span> <span class="string">&quot;Allons-y!&quot;</span>;</span><br><span class="line"></span><br><span class="line">const segmenter <span class="operator">=</span> new Intl.Segmenter(<span class="string">&quot;fr&quot;</span>, &#123; <span class="params">granularity:</span> <span class="string">&quot;word&quot;</span> &#125;);</span><br><span class="line">const segments <span class="operator">=</span> segmenter.segment(input);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> current <span class="operator">=</span> segments.containing();</span><br><span class="line"><span class="operator">//</span> &#123; <span class="params">index:</span> <span class="number">0</span>, <span class="params">segment:</span> <span class="string">&quot;Allons&quot;</span>, <span class="params">isWordLike:</span> <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">current</span> <span class="operator">=</span> segments.containing(<span class="number">4</span>);</span><br><span class="line"><span class="operator">//</span> &#123; <span class="params">index:</span> <span class="number">0</span>, <span class="params">segment:</span> <span class="string">&quot;Allons&quot;</span>, <span class="params">isWordLike:</span> <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">current</span> <span class="operator">=</span> segments.containing(<span class="number">6</span>);</span><br><span class="line"><span class="operator">//</span> &#123; <span class="params">index:</span> <span class="number">6</span>, <span class="params">segment:</span> <span class="string">&quot;-&quot;</span>, <span class="params">isWordLike:</span> <span class="literal">false</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">current</span> <span class="operator">=</span> segments.containing(current.index <span class="operator">+</span> current.segment.length);</span><br><span class="line"><span class="operator">//</span> &#123; <span class="params">index:</span> <span class="number">7</span>, <span class="params">segment:</span> <span class="string">&quot;y&quot;</span>, <span class="params">isWordLike:</span> <span class="literal">true</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">current</span> <span class="operator">=</span> segments.containing(current.index <span class="operator">+</span> current.segment.length);</span><br><span class="line"><span class="operator">//</span> &#123; <span class="params">index:</span> <span class="number">8</span>, <span class="params">segment:</span> <span class="string">&quot;!&quot;</span>, <span class="params">isWordLike:</span> <span class="literal">false</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">current</span> <span class="operator">=</span> segments.containing(current.index <span class="operator">+</span> current.segment.length);</span><br><span class="line"><span class="operator">//</span> undefined</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œåˆ†è¯ç»“æœä¸­é™¤äº†ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·ï¼Œå…¶ä»–æƒ…å†µä¸‹ï¼Œ<code>isWordLike</code>éƒ½è¿”å›<code>false</code>ã€‚</p><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/intl-segmenter">https://wangdoc.com/webapi/intl-segmenter</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Intl segmenter API</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Intl.RelativeTimeFormat</title>
    <link href="https://www.hacp.top/posts/41.html"/>
    <id>https://www.hacp.top/posts/41.html</id>
    <published>2023-07-09T10:19:03.000Z</published>
    <updated>2023-07-09T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Intl.RelativeTimeFormat</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>å¾ˆå¤šæ—¥æœŸåº“æ”¯æŒæ˜¾ç¤ºç›¸å¯¹æ—¶é—´ï¼Œæ¯”å¦‚â€œæ˜¨å¤©â€ã€â€œäº”åˆ†é’Ÿå‰â€ã€â€œä¸¤ä¸ªæœˆä¹‹å‰â€ç­‰ç­‰ã€‚ç”±äºä¸åŒçš„è¯­è¨€ï¼Œæ—¥æœŸæ˜¾ç¤ºçš„æ ¼å¼å’Œç›¸å…³è¯è¯­éƒ½ä¸åŒï¼Œé€ æˆè¿™äº›åº“çš„ä½“ç§¯éå¸¸å¤§ã€‚</p><p>ç°åœ¨ï¼Œæµè§ˆå™¨æä¾›å†…ç½®çš„ Intl.RelativeTimeFormat APIï¼Œå¯ä»¥ä¸ä½¿ç”¨è¿™äº›åº“ï¼Œç›´æ¥æ˜¾ç¤ºç›¸å¯¹æ—¶é—´ã€‚</p><h2 id="åŸºæœ¬ç”¨æ³•">åŸºæœ¬ç”¨æ³• <a href="about:blank#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">#</a></h2><p><code>Intl.RelativeTimeFormat()</code>æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¯­è¨€ä»£ç ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç›¸å¯¹æ—¶é—´çš„å®ä¾‹å¯¹è±¡ã€‚å¦‚æœçœç•¥å‚æ•°ï¼Œåˆ™é»˜è®¤ä¼ å…¥å½“å‰è¿è¡Œæ—¶çš„è¯­è¨€ä»£ç ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const rtf = <span class="built_in">new</span> Intl.RelativeTimeFormat(<span class="string">&#x27;en&#x27;</span>);</span><br><span class="line"></span><br><span class="line">rtf.format(<span class="number">3.14</span>, <span class="string">&#x27;second&#x27;</span>) // &quot;in 3.14 seconds&quot;</span><br><span class="line">rtf.format(<span class="number">-15</span>, <span class="string">&#x27;minute&#x27;</span>) // &quot;15 minutes ago&quot;</span><br><span class="line">rtf.format(<span class="number">8</span>, <span class="string">&#x27;hour&#x27;</span>) // &quot;in 8 hours&quot;</span><br><span class="line">rtf.format(<span class="number">-2</span>, <span class="string">&#x27;day&#x27;</span>) // &quot;2 days ago&quot;</span><br><span class="line">rtf.format(<span class="number">3</span>, <span class="string">&#x27;week&#x27;</span>) // &quot;in 3 weeks&quot;</span><br><span class="line">rtf.format(<span class="number">-5</span>, <span class="string">&#x27;month&#x27;</span>) // &quot;5 months ago&quot;</span><br><span class="line">rtf.format(<span class="number">2</span>, <span class="string">&#x27;quarter&#x27;</span>) // &quot;in 2 quarters&quot;</span><br><span class="line">rtf.format(<span class="number">-42</span>, <span class="string">&#x27;year&#x27;</span>) // &quot;42 years ago&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æŒ‡å®šä½¿ç”¨è‹±è¯­æ˜¾ç¤ºç›¸å¯¹æ—¶é—´ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨è¥¿ç­ç‰™è¯­æ˜¾ç¤ºç›¸å¯¹æ—¶é—´çš„ä¾‹å­ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const rtf = <span class="built_in">new</span> Intl.RelativeTimeFormat(<span class="string">&#x27;es&#x27;</span>);</span><br><span class="line"></span><br><span class="line">rtf.format(<span class="number">3.14</span>, <span class="string">&#x27;second&#x27;</span>) // &quot;dentro de 3,14 segundos&quot;</span><br><span class="line">rtf.format(<span class="number">-15</span>, <span class="string">&#x27;minute&#x27;</span>) // &quot;hace 15 minutos&quot;</span><br><span class="line">rtf.format(<span class="number">8</span>, <span class="string">&#x27;hour&#x27;</span>) // &quot;dentro de 8 horas&quot;</span><br><span class="line">rtf.format(<span class="number">-2</span>, <span class="string">&#x27;day&#x27;</span>) // &quot;hace 2 dÃ­as&quot;</span><br><span class="line">rtf.format(<span class="number">3</span>, <span class="string">&#x27;week&#x27;</span>) // &quot;dentro de 3 semanas&quot;</span><br><span class="line">rtf.format(<span class="number">-5</span>, <span class="string">&#x27;month&#x27;</span>) // &quot;hace 5 meses&quot;</span><br><span class="line">rtf.format(<span class="number">2</span>, <span class="string">&#x27;quarter&#x27;</span>) // &quot;dentro de 2 trimestres&quot;</span><br><span class="line">rtf.format(<span class="number">-42</span>, <span class="string">&#x27;year&#x27;</span>) // &quot;hace 42 aÃ±os&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Intl.RelativeTimeFormat()</code>è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç²¾ç¡®æŒ‡å®šç›¸å¯¹æ—¶é—´å®ä¾‹çš„è¡Œä¸ºã€‚é…ç½®å¯¹è±¡å…±æœ‰ä¸‹é¢è¿™äº›å±æ€§ã€‚</p><ul><li>options.styleï¼šè¡¨ç¤ºè¿”å›å­—ç¬¦ä¸²çš„é£æ ¼ï¼Œå¯èƒ½çš„å€¼æœ‰<code>long</code>ï¼ˆé»˜è®¤å€¼ï¼Œæ¯”å¦‚â€œin 1 monthâ€ï¼‰ã€<code>short</code>ï¼ˆæ¯”å¦‚â€œin 1 mo.â€ï¼‰ã€<code>narrow</code>ï¼ˆæ¯”å¦‚â€œin 1 mo.â€ï¼‰ã€‚å¯¹äºä¸€éƒ¨åˆ†è¯­è¨€æ¥è¯´ï¼Œ<code>narrow</code>é£æ ¼å’Œ<code>short</code>é£æ ¼æ˜¯ç±»ä¼¼çš„ã€‚</li><li>options.localeMatcherï¼šè¡¨ç¤ºåŒ¹é…è¯­è¨€å‚æ•°çš„ç®—æ³•ï¼Œå¯èƒ½çš„å€¼æœ‰<code>best fit</code>ï¼ˆé»˜è®¤å€¼ï¼‰å’Œ<code>lookup</code>ã€‚</li><li>options.numericï¼šè¡¨ç¤ºè¿”å›å­—ç¬¦ä¸²æ˜¯æ•°å­—æ˜¾ç¤ºï¼Œè¿˜æ˜¯æ–‡å­—æ˜¾ç¤ºï¼Œå¯èƒ½çš„å€¼æœ‰<code>always</code>ï¼ˆé»˜è®¤å€¼ï¼Œæ€»æ˜¯æ–‡å­—æ˜¾ç¤ºï¼‰å’Œ<code>auto</code>ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰ã€‚</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> ä¸‹é¢çš„é…ç½®å¯¹è±¡ï¼Œä¼ å…¥çš„éƒ½æ˜¯é»˜è®¤å€¼</span><br><span class="line">const rtf = new Intl.RelativeTimeFormat(<span class="string">&#x27;en&#x27;</span>, &#123;</span><br><span class="line">  localeMatcher: <span class="string">&#x27;best fit&#x27;</span>, <span class="regexp">//</span> å…¶ä»–å€¼ï¼š<span class="string">&#x27;lookup&#x27;</span></span><br><span class="line">  style: <span class="string">&#x27;long&#x27;</span>, <span class="regexp">//</span> å…¶ä»–å€¼ï¼š<span class="string">&#x27;short&#x27;</span> or <span class="string">&#x27;narrow&#x27;</span></span><br><span class="line">  numeric: <span class="string">&#x27;always&#x27;</span>, <span class="regexp">//</span> å…¶ä»–å€¼ï¼š<span class="string">&#x27;auto&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> Now, letâ€™s try some special cases!</span><br><span class="line"></span><br><span class="line">rtf.format(-<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;1 day ago&quot;</span></span><br><span class="line">rtf.format(<span class="number">0</span>, <span class="string">&#x27;day&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;in 0 days&quot;</span></span><br><span class="line">rtf.format(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;in 1 day&quot;</span></span><br><span class="line">rtf.format(-<span class="number">1</span>, <span class="string">&#x27;week&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;1 week ago&quot;</span></span><br><span class="line">rtf.format(<span class="number">0</span>, <span class="string">&#x27;week&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;in 0 weeks&quot;</span></span><br><span class="line">rtf.format(<span class="number">1</span>, <span class="string">&#x27;week&#x27;</span>) <span class="regexp">//</span> <span class="string">&quot;in 1 week&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ˜¾ç¤ºçš„æ˜¯â€œ1 day agoâ€ï¼Œè€Œä¸æ˜¯â€œyesterdayâ€ï¼›æ˜¾ç¤ºçš„æ˜¯â€œin 0 weeksâ€ï¼Œè€Œä¸æ˜¯â€œthis weekâ€ã€‚è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œç›¸å¯¹æ—¶é—´æ˜¾ç¤ºçš„æ˜¯æ•°å€¼å½¢å¼ï¼Œè€Œä¸æ˜¯æ–‡å­—å½¢å¼ã€‚</p><p>æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼Œå¯ä»¥æŠŠé…ç½®å¯¹è±¡çš„<code>numeric</code>å±æ€§æ”¹æˆ<code>auto</code>ã€‚</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const rtf = <span class="built_in">new</span> Intl.RelativeTimeFormat(<span class="string">&#x27;en&#x27;</span>, &#123; <span class="type">numeric</span>: <span class="string">&#x27;auto&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">rtf.format(<span class="number">-1</span>, <span class="string">&#x27;day&#x27;</span>) // &quot;yesterday&quot;</span><br><span class="line">rtf.format(<span class="number">0</span>, <span class="string">&#x27;day&#x27;</span>) // &quot;today&quot;</span><br><span class="line">rtf.format(<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>) // &quot;tomorrow&quot;</span><br><span class="line">rtf.format(<span class="number">-1</span>, <span class="string">&#x27;week&#x27;</span>) // &quot;last week&quot;</span><br><span class="line">rtf.format(<span class="number">0</span>, <span class="string">&#x27;week&#x27;</span>) // &quot;this week&quot;</span><br><span class="line">rtf.format(<span class="number">1</span>, <span class="string">&#x27;week&#x27;</span>) // &quot;next week&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Intl-RelativeTimeFormat-prototype-format">Intl.RelativeTimeFormat.prototype.format() <a href="about:blank#intlrelativetimeformatprototypeformat">#</a></h2><p>ç›¸å¯¹æ—¶é—´å®ä¾‹å¯¹è±¡çš„<code>format</code>æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºæ—¶é—´é—´éš”çš„æ•°å€¼å’Œå•ä½ã€‚å…¶ä¸­ï¼Œâ€œå•ä½â€æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ¥å—ä»¥ä¸‹å…«ä¸ªå€¼ã€‚</p><ul><li>year</li><li>quarter</li><li>month</li><li>week</li><li>day</li><li>hour</li><li>minute</li><li>second</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rtf = <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">RelativeTimeFormat</span>(<span class="string">&#x27;en&#x27;</span>);</span><br><span class="line">rtf.<span class="title function_">format</span>(-<span class="number">1</span>, <span class="string">&quot;day&quot;</span>) <span class="comment">// &quot;yesterday&quot;</span></span><br><span class="line">rtf.<span class="title function_">format</span>(<span class="number">2.15</span>, <span class="string">&quot;day&quot;</span>) <span class="comment">// &quot;in 2.15 days</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Intl-RelativeTimeFormat-prototype-formatToParts">Intl.RelativeTimeFormat.prototype.formatToParts() <a href="about:blank#intlrelativetimeformatprototypeformattoparts">#</a></h2><p>ç›¸å¯¹æ—¶é—´å®ä¾‹å¯¹è±¡çš„<code>formatToParts()</code>æ–¹æ³•çš„å‚æ•°è·Ÿ<code>format()</code>æ–¹æ³•ä¸€æ ·ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥ç²¾ç¡®æ§åˆ¶ç›¸å¯¹æ—¶é—´çš„æ¯ä¸ªéƒ¨åˆ†ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const rtf = new Intl.RelativeTimeFormat(<span class="string">&#x27;en&#x27;</span>, &#123; numeric: <span class="string">&#x27;auto&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">rtf.format(-<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>) </span><br><span class="line"><span class="regexp">//</span> <span class="string">&quot;yesterday&quot;</span></span><br><span class="line">rtf.formatToParts(-<span class="number">1</span>, <span class="string">&#x27;day&#x27;</span>);</span><br><span class="line"><span class="regexp">//</span> [&#123; type: <span class="string">&quot;literal&quot;</span>, value: <span class="string">&quot;yesterday&quot;</span> &#125;]</span><br><span class="line"></span><br><span class="line">rtf.format(<span class="number">3</span>, <span class="string">&#x27;week&#x27;</span>);</span><br><span class="line"><span class="regexp">//</span> <span class="string">&quot;in 3 weeks&quot;</span></span><br><span class="line">rtf.formatToParts(<span class="number">3</span>, <span class="string">&#x27;week&#x27;</span>);</span><br><span class="line"><span class="regexp">//</span> [</span><br><span class="line"><span class="regexp">//</span>   &#123; type: <span class="string">&#x27;literal&#x27;</span>, value: <span class="string">&#x27;in &#x27;</span> &#125;,</span><br><span class="line"><span class="regexp">//</span>   &#123; type: <span class="string">&#x27;integer&#x27;</span>, value: <span class="string">&#x27;3&#x27;</span>, unit: <span class="string">&#x27;week&#x27;</span> &#125;,</span><br><span class="line"><span class="regexp">//</span>   &#123; type: <span class="string">&#x27;literal&#x27;</span>, value: <span class="string">&#x27; weeks&#x27;</span> &#125;</span><br><span class="line"><span class="regexp">//</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿”å›æ•°ç»„çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰ä¸¤ä¸ªå±æ€§ã€‚</p><ul><li>typeï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¾“å‡ºå€¼çš„ç±»å‹ã€‚</li><li>valueï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¾“å‡ºçš„å†…å®¹ã€‚</li><li>unitï¼šå¦‚æœè¾“å‡ºå†…å®¹è¡¨ç¤ºä¸€ä¸ªæ•°å€¼ï¼ˆå³<code>type</code>å±æ€§ä¸æ˜¯<code>literal</code>ï¼‰ï¼Œé‚£ä¹ˆè¿˜ä¼šæœ‰<code>unit</code>å±æ€§ï¼Œè¡¨ç¤ºæ•°å€¼çš„å•ä½ã€‚</li></ul><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li><a href="https://developers.google.com/web/updates/2018/10/intl-relativetimeformat">The Intl.RelativeTimeFormat API</a>, Mathias Bynens</li><li><a href="https://github.com/tc39/proposal-intl-relative-time#api">Intl.RelativeTimeFormat API Specification</a>, TC39</li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/intl-relativetimeformat">https://wangdoc.com/webapi/intl-relativetimeformat</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Intl.RelativeTimeFormat</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>IntersectionObserver</title>
    <link href="https://www.hacp.top/posts/40.html"/>
    <id>https://www.hacp.top/posts/40.html</id>
    <published>2023-07-08T10:19:03.000Z</published>
    <updated>2023-07-08T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>IntersectionObserver</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><p>ç½‘é¡µå¼€å‘æ—¶ï¼Œå¸¸å¸¸éœ€è¦äº†è§£æŸä¸ªå…ƒç´ æ˜¯å¦è¿›å…¥äº†â€œè§†å£â€ï¼ˆviewportï¼‰ï¼Œå³ç”¨æˆ·èƒ½ä¸èƒ½çœ‹åˆ°å®ƒã€‚</p><p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016110201.gif" alt=""></p><p>ä¸Šå›¾çš„ç»¿è‰²æ–¹å—ä¸æ–­æ»šåŠ¨ï¼Œé¡¶éƒ¨ä¼šæç¤ºå®ƒçš„å¯è§æ€§ã€‚</p><p>ä¼ ç»Ÿçš„å®ç°æ–¹æ³•æ˜¯ï¼Œç›‘å¬åˆ°<code>scroll</code>äº‹ä»¶åï¼Œè°ƒç”¨ç›®æ ‡å…ƒç´ ï¼ˆç»¿è‰²æ–¹å—ï¼‰çš„<a href="https://developer.mozilla.org/en/docs/Web/API/Element/getBoundingClientRect"><code>getBoundingClientRect()</code></a>æ–¹æ³•ï¼Œå¾—åˆ°å®ƒå¯¹åº”äºè§†å£å·¦ä¸Šè§’çš„åæ ‡ï¼Œå†åˆ¤æ–­æ˜¯å¦åœ¨è§†å£ä¹‹å†…ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œç”±äº<code>scroll</code>äº‹ä»¶å¯†é›†å‘ç”Ÿï¼Œè®¡ç®—é‡å¾ˆå¤§ï¼Œå®¹æ˜“é€ æˆ<a href="http://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html">æ€§èƒ½é—®é¢˜</a>ã€‚</p><p><a href="https://wicg.github.io/IntersectionObserver/">IntersectionObserver API</a>ï¼Œå¯ä»¥è‡ªåŠ¨â€œè§‚å¯Ÿâ€å…ƒç´ æ˜¯å¦å¯è§ï¼ŒChrome 51+ å·²ç»æ”¯æŒã€‚ç”±äºå¯è§ï¼ˆvisibleï¼‰çš„æœ¬è´¨æ˜¯ï¼Œç›®æ ‡å…ƒç´ ä¸è§†å£äº§ç”Ÿä¸€ä¸ªäº¤å‰åŒºï¼Œæ‰€ä»¥è¿™ä¸ª API å«åšâ€œäº¤å‰è§‚å¯Ÿå™¨â€ï¼ˆintersection oberserverï¼‰ã€‚</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>IntersectionObserver API çš„ç”¨æ³•ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸¤è¡Œã€‚</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> IntersectionObserver(callback, options);</span><br><span class="line">observer.observe(target);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>IntersectionObserver</code>æ˜¯æµè§ˆå™¨åŸç”Ÿæä¾›çš„æ„é€ å‡½æ•°ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<code>callback</code>æ˜¯å¯è§æ€§å˜åŒ–æ—¶çš„å›è°ƒå‡½æ•°ï¼Œ<code>option</code>æ˜¯é…ç½®å¯¹è±¡ï¼ˆè¯¥å‚æ•°å¯é€‰ï¼‰ã€‚</p><p><code>IntersectionObserver()</code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹ã€‚å®ä¾‹çš„<code>observe()</code>æ–¹æ³•å¯ä»¥æŒ‡å®šè§‚å¯Ÿå“ªä¸ª DOM èŠ‚ç‚¹ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å§‹è§‚å¯Ÿ</span></span><br><span class="line">observer<span class="selector-class">.observe</span>(document.getElementById(&#x27;example&#x27;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢è§‚å¯Ÿ</span></span><br><span class="line">observer<span class="selector-class">.unobserve</span>(element);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­è§‚å¯Ÿå™¨</span></span><br><span class="line">observer<span class="selector-class">.disconnect</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>observe()</code>çš„å‚æ•°æ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹å¯¹è±¡ã€‚å¦‚æœè¦è§‚å¯Ÿå¤šä¸ªèŠ‚ç‚¹ï¼Œå°±è¦å¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">observer.observe(elementA)<span class="comment">;</span></span><br><span class="line">observer.observe(elementB)<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒIntersectionObserver API æ˜¯å¼‚æ­¥çš„ï¼Œä¸éšç€ç›®æ ‡å…ƒç´ çš„æ»šåŠ¨åŒæ­¥è§¦å‘ã€‚è§„æ ¼å†™æ˜ï¼Œ<code>IntersectionObserver</code>çš„å®ç°ï¼Œåº”è¯¥é‡‡ç”¨<code>requestIdleCallback()</code>ï¼Œå³åªæœ‰çº¿ç¨‹ç©ºé—²ä¸‹æ¥ï¼Œæ‰ä¼šæ‰§è¡Œè§‚å¯Ÿå™¨ã€‚è¿™æ„å‘³ç€ï¼Œè¿™ä¸ªè§‚å¯Ÿå™¨çš„ä¼˜å…ˆçº§éå¸¸ä½ï¼Œåªåœ¨å…¶ä»–ä»»åŠ¡æ‰§è¡Œå®Œï¼Œæµè§ˆå™¨æœ‰äº†ç©ºé—²æ‰ä¼šæ‰§è¡Œã€‚</p><h2 id="IntersectionObserver-observe">IntersectionObserver.observe() <a href="about:blank#intersectionobserverobserve">#</a></h2><p>IntersectionObserver å®ä¾‹çš„<code>observe()</code>æ–¹æ³•ç”¨æ¥å¯åŠ¨å¯¹ä¸€ä¸ª DOM å…ƒç´ çš„è§‚å¯Ÿã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå›è°ƒå‡½æ•°<code>callback</code>å’Œé…ç½®å¯¹è±¡<code>options</code>ã€‚</p><h3 id="callback-å‚æ•°">callback å‚æ•° <a href="about:blank#callback-%E5%8F%82%E6%95%B0">#</a></h3><p>ç›®æ ‡å…ƒç´ çš„å¯è§æ€§å˜åŒ–æ—¶ï¼Œå°±ä¼šè°ƒç”¨è§‚å¯Ÿå™¨çš„å›è°ƒå‡½æ•°<code>callback</code>ã€‚</p><p><code>callback</code>ä¼šè§¦å‘ä¸¤æ¬¡ã€‚ä¸€æ¬¡æ˜¯ç›®æ ‡å…ƒç´ åˆšåˆšè¿›å…¥è§†å£ï¼ˆå¼€å§‹å¯è§ï¼‰ï¼Œå¦ä¸€æ¬¡æ˜¯å®Œå…¨ç¦»å¼€è§†å£ï¼ˆå¼€å§‹ä¸å¯è§ï¼‰ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  <span class="function">(<span class="params">entries, observer</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(entries);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå›è°ƒå‡½æ•°é‡‡ç”¨çš„æ˜¯<a href="http://es6.ruanyifeng.com/#docs/function#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">ç®­å¤´å‡½æ•°</a>çš„å†™æ³•ã€‚<code>callback</code>å‡½æ•°çš„å‚æ•°ï¼ˆ<code>entries</code>ï¼‰æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ª<a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a>å¯¹è±¡ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåŒæ—¶æœ‰ä¸¤ä¸ªè¢«è§‚å¯Ÿçš„å¯¹è±¡çš„å¯è§æ€§å‘ç”Ÿå˜åŒ–ï¼Œ<code>entries</code>æ•°ç»„å°±ä¼šæœ‰ä¸¤ä¸ªæˆå‘˜ã€‚</p><h3 id="IntersectionObserverEntry-å¯¹è±¡">IntersectionObserverEntry å¯¹è±¡ <a href="about:blank#intersectionobserverentry-%E5%AF%B9%E8%B1%A1">#</a></h3><p><code>IntersectionObserverEntry</code>å¯¹è±¡æä¾›ç›®æ ‡å…ƒç´ çš„ä¿¡æ¯ï¼Œä¸€å…±æœ‰å…­ä¸ªå±æ€§ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">time:</span> <span class="number">3893.92</span>,</span><br><span class="line">  <span class="attr">rootBounds:</span> <span class="string">ClientRect</span> &#123;</span><br><span class="line">    <span class="attr">bottom:</span> <span class="number">920</span>,</span><br><span class="line">    <span class="attr">height:</span> <span class="number">1024</span>,</span><br><span class="line">    <span class="attr">left:</span> <span class="number">0</span>,</span><br><span class="line">    <span class="attr">right:</span> <span class="number">1024</span>,</span><br><span class="line">    <span class="attr">top:</span> <span class="number">0</span>,</span><br><span class="line">    <span class="attr">width:</span> <span class="number">920</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">boundingClientRect:</span> <span class="string">ClientRect</span> &#123;</span><br><span class="line">     <span class="string">//</span> <span class="string">...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">intersectionRect:</span> <span class="string">ClientRect</span> &#123;</span><br><span class="line">    <span class="string">//</span> <span class="string">...</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">intersectionRatio:</span> <span class="number">0.54</span>,</span><br><span class="line">  <span class="attr">target:</span> <span class="string">element</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯ä¸ªå±æ€§çš„å«ä¹‰å¦‚ä¸‹ã€‚</p><blockquote><ul><li><code>time</code>ï¼šå¯è§æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼Œå•ä½ä¸ºæ¯«ç§’</li><li><code>target</code>ï¼šè¢«è§‚å¯Ÿçš„ç›®æ ‡å…ƒç´ ï¼Œæ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹å¯¹è±¡</li><li><code>rootBounds</code>ï¼šå®¹å™¨å…ƒç´ çš„çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯ï¼Œ<code>getBoundingClientRect()</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰å®¹å™¨å…ƒç´ ï¼ˆå³ç›´æ¥ç›¸å¯¹äºè§†å£æ»šåŠ¨ï¼‰ï¼Œåˆ™è¿”å›<code>null</code></li><li><code>boundingClientRect</code>ï¼šç›®æ ‡å…ƒç´ çš„çŸ©å½¢åŒºåŸŸçš„ä¿¡æ¯</li><li><code>intersectionRect</code>ï¼šç›®æ ‡å…ƒç´ ä¸è§†å£ï¼ˆæˆ–å®¹å™¨å…ƒç´ ï¼‰çš„äº¤å‰åŒºåŸŸçš„ä¿¡æ¯</li><li><code>intersectionRatio</code>ï¼šç›®æ ‡å…ƒç´ çš„å¯è§æ¯”ä¾‹ï¼Œå³<code>intersectionRect</code>å <code>boundingClientRect</code>çš„æ¯”ä¾‹ï¼Œå®Œå…¨å¯è§æ—¶ä¸º<code>1</code>ï¼Œå®Œå…¨ä¸å¯è§æ—¶å°äºç­‰äº<code>0</code></li></ul></blockquote><p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016110202.png" alt=""></p><p>ä¸Šå›¾ä¸­ï¼Œç°è‰²çš„æ°´å¹³æ–¹æ¡†ä»£è¡¨è§†å£ï¼Œæ·±çº¢è‰²çš„åŒºåŸŸä»£è¡¨å››ä¸ªè¢«è§‚å¯Ÿçš„ç›®æ ‡å…ƒç´ ã€‚å®ƒä»¬å„è‡ªçš„<code>intersectionRatio</code>å›¾ä¸­éƒ½å·²ç»æ³¨æ˜ã€‚</p><p>æˆ‘å†™äº†ä¸€ä¸ª <a href="http://jsbin.com/canuze/edit?js,console,output">Demo</a>ï¼Œæ¼”ç¤º<code>IntersectionObserverEntry</code>å¯¹è±¡ã€‚æ³¨æ„ï¼Œè¿™ä¸ª Demo åªèƒ½åœ¨ Chrome 51+ è¿è¡Œã€‚</p><h3 id="Option-å¯¹è±¡">Option å¯¹è±¡ <a href="about:blank#option-%E5%AF%B9%E8%B1%A1">#</a></h3><p><code>IntersectionObserver</code>æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚å®ƒå¯ä»¥è®¾ç½®ä»¥ä¸‹å±æ€§ã€‚</p><p><strong>ï¼ˆ1ï¼‰threshold å±æ€§</strong></p><p><code>threshold</code>å±æ€§å†³å®šäº†ä»€ä¹ˆæ—¶å€™è§¦å‘å›è°ƒå‡½æ•°ï¼Œå³å…ƒç´ è¿›å…¥è§†å£ï¼ˆæˆ–è€…å®¹å™¨å…ƒç´ ï¼‰å¤šå°‘æ¯”ä¾‹æ—¶ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªé—¨æ§›å€¼ï¼Œé»˜è®¤ä¸º<code>[0]</code>ï¼Œå³äº¤å‰æ¯”ä¾‹ï¼ˆ<code>intersectionRatio</code>ï¼‰è¾¾åˆ°<code>0</code>æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><p>å¦‚æœ<code>threshold</code>å±æ€§æ˜¯0.5ï¼Œå½“å…ƒç´ è¿›å…¥è§†å£50%æ—¶ï¼Œè§¦å‘å›è°ƒå‡½æ•°ã€‚å¦‚æœå€¼ä¸º<code>[0.3, 0.6]</code>ï¼Œåˆ™å½“å…ƒç´ è¿›å…¥30ï¼…å’Œ60ï¼…æ˜¯è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  <span class="function"><span class="params">entries</span> =&gt;</span> &#123;<span class="comment">/* â€¦ */</span>&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">threshold</span>: [<span class="number">0</span>, <span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>, <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªæ•°ç»„ã€‚æ¯”å¦‚ï¼Œä¸Šä¾‹çš„<code>[0, 0.25, 0.5, 0.75, 1]</code>å°±è¡¨ç¤ºå½“ç›®æ ‡å…ƒç´  0%ã€25%ã€50%ã€75%ã€100% å¯è§æ—¶ï¼Œä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚</p><p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016110202.gif" alt=""></p><p><strong>ï¼ˆ2ï¼‰root å±æ€§ï¼ŒrootMargin å±æ€§</strong></p><p><code>IntersectionObserver</code>ä¸ä»…å¯ä»¥è§‚å¯Ÿå…ƒç´ ç›¸å¯¹äºè§†å£çš„å¯è§æ€§ï¼Œè¿˜å¯ä»¥è§‚å¯Ÿå…ƒç´ ç›¸å¯¹äºå…¶æ‰€åœ¨å®¹å™¨çš„å¯è§æ€§ã€‚å®¹å™¨å†…æ»šåŠ¨ä¹Ÿä¼šå½±å“ç›®æ ‡å…ƒç´ çš„å¯è§æ€§ï¼Œå‚è§æœ¬æ–‡å¼€å§‹æ—¶çš„é‚£å¼ ç¤ºæ„å›¾ã€‚</p><p>IntersectionObserver API æ”¯æŒå®¹å™¨å†…æ»šåŠ¨ã€‚<code>root</code>å±æ€§æŒ‡å®šç›®æ ‡å…ƒç´ æ‰€åœ¨çš„å®¹å™¨èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œå®¹å™¨å…ƒç´ å¿…é¡»æ˜¯ç›®æ ‡å…ƒç´ çš„ç¥–å…ˆèŠ‚ç‚¹ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> opts = &#123;</span><br><span class="line">  root: <span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&#x27;.container&#x27;</span>),</span><br><span class="line">  rootMargin: <span class="string">&#x27;0px 0px -200px 0px&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  callback,</span><br><span class="line">  opts</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé™¤äº†<code>root</code>å±æ€§ï¼Œè¿˜æœ‰<a href="https://wicg.github.io/IntersectionObserver/#dom-intersectionobserverinit-rootmargin"><code>rootMargin</code></a>å±æ€§ã€‚è¯¥å±æ€§ç”¨æ¥æ‰©å±•æˆ–ç¼©å°<code>rootBounds</code>è¿™ä¸ªçŸ©å½¢çš„å¤§å°ï¼Œä»è€Œå½±å“<code>intersectionRect</code>äº¤å‰åŒºåŸŸçš„å¤§å°ã€‚å®ƒçš„å†™æ³•ç±»ä¼¼äº CSS çš„<code>margin</code>å±æ€§ï¼Œæ¯”å¦‚<code>0px 0px 0px 0px</code>ï¼Œä¾æ¬¡è¡¨ç¤º topã€rightã€bottom å’Œ left å››ä¸ªæ–¹å‘çš„å€¼ã€‚</p><p>ä¸Šä¾‹çš„<code>0px 0px -200px 0px</code>ï¼Œè¡¨ç¤ºå®¹å™¨çš„ä¸‹è¾¹ç¼˜å‘ä¸Šæ”¶ç¼©200åƒç´ ï¼Œå¯¼è‡´é¡µé¢å‘ä¸‹æ»šåŠ¨æ—¶ï¼Œç›®æ ‡å…ƒç´ çš„é¡¶éƒ¨è¿›å…¥å¯è§†åŒºåŸŸ200åƒç´ ä»¥åï¼Œæ‰ä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚</p><p>è¿™æ ·è®¾ç½®ä»¥åï¼Œä¸ç®¡æ˜¯çª—å£æ»šåŠ¨æˆ–è€…å®¹å™¨å†…æ»šåŠ¨ï¼Œåªè¦ç›®æ ‡å…ƒç´ å¯è§æ€§å˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘è§‚å¯Ÿå™¨ã€‚</p><h2 id="å®ä¾‹">å®ä¾‹ <a href="about:blank#%E5%AE%9E%E4%BE%8B">#</a></h2><h3 id="æƒ°æ€§åŠ è½½ï¼ˆlazy-loadï¼‰">æƒ°æ€§åŠ è½½ï¼ˆlazy loadï¼‰ <a href="about:blank#%E6%83%B0%E6%80%A7%E5%8A%A0%E8%BD%BDlazy-load">#</a></h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æŸäº›é™æ€èµ„æºï¼ˆæ¯”å¦‚å›¾ç‰‡ï¼‰ï¼Œåªæœ‰ç”¨æˆ·å‘ä¸‹æ»šåŠ¨ï¼Œå®ƒä»¬è¿›å…¥è§†å£æ—¶æ‰åŠ è½½ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå¸¦å®½ï¼Œæé«˜ç½‘é¡µæ€§èƒ½ã€‚è¿™å°±å«åšâ€œæƒ°æ€§åŠ è½½â€ã€‚</p><p>æœ‰äº† IntersectionObserver APIï¼Œå®ç°èµ·æ¥å°±å¾ˆå®¹æ˜“äº†ã€‚å›¾åƒçš„ HTML ä»£ç å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;placeholder.png&quot;</span> <span class="attribute">data-src</span>=<span class="string">&quot;img-1.jpg&quot;</span>&gt;</span><br><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;placeholder.png&quot;</span> <span class="attribute">data-src</span>=<span class="string">&quot;img-2.jpg&quot;</span>&gt;</span><br><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;placeholder.png&quot;</span> <span class="attribute">data-src</span>=<span class="string">&quot;img-3.jpg&quot;</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå›¾åƒé»˜è®¤æ˜¾ç¤ºä¸€ä¸ªå ä½ç¬¦ï¼Œ<code>data-src</code>å±æ€§æ˜¯æƒ°æ€§åŠ è½½çš„çœŸæ­£å›¾åƒã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">query</span>(selector) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="type">Array.from(document.querySelectorAll(selector))</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var observer = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  <span class="keyword">function</span>(entries) &#123;</span><br><span class="line">    entries.forEach(<span class="keyword">function</span>(<span class="keyword">entry</span>) &#123;</span><br><span class="line">      <span class="keyword">entry</span>.target.src = <span class="keyword">entry</span>.target.dataset.src;</span><br><span class="line">      observer.unobserve(<span class="keyword">entry</span>.target);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">query(&#x27;.lazy-loaded&#x27;).forEach(<span class="keyword">function</span> <span class="title"></span>(item) &#123;</span><br><span class="line">  observer.observe(item);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªæœ‰å›¾åƒå¼€å§‹å¯è§æ—¶ï¼Œæ‰ä¼šåŠ è½½çœŸæ­£çš„å›¾åƒæ–‡ä»¶ã€‚</p><h3 id="æ— é™æ»šåŠ¨">æ— é™æ»šåŠ¨ <a href="about:blank#%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8">#</a></h3><p>æ— é™æ»šåŠ¨ï¼ˆinfinite scrollï¼‰æŒ‡çš„æ˜¯ï¼Œéšç€ç½‘é¡µæ»šåŠ¨åˆ°åº•éƒ¨ï¼Œä¸æ–­åŠ è½½æ–°çš„å†…å®¹åˆ°é¡µé¢ï¼Œå®ƒçš„å®ç°ä¹Ÿå¾ˆç®€å•ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> intersectionObserver = <span class="keyword">new</span> IntersectionObserver(</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">entries</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸å¯è§ï¼Œå°±è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (entries[<span class="number">0</span>].intersectionRatio &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    loadItems(<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Loaded new items&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å§‹è§‚å¯Ÿ</span></span><br><span class="line">intersectionObserver.observe(</span><br><span class="line">  document.querySelector(<span class="string">&#x27;.scrollerFooter&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ— é™æ»šåŠ¨æ—¶ï¼Œæœ€å¥½åƒä¸Šä¾‹é‚£æ ·ï¼Œé¡µé¢åº•éƒ¨æœ‰ä¸€ä¸ªé¡µå°¾æ ï¼ˆåˆç§°<a href="https://wangdoc.com/sentinels">sentinels</a>ï¼Œä¸Šä¾‹æ˜¯<code>.scrollerFooter</code>ï¼‰ã€‚ä¸€æ—¦é¡µå°¾æ å¯è§ï¼Œå°±è¡¨ç¤ºç”¨æˆ·åˆ°è¾¾äº†é¡µé¢åº•éƒ¨ï¼Œä»è€ŒåŠ è½½æ–°çš„æ¡ç›®æ”¾åœ¨é¡µå°¾æ å‰é¢ã€‚å¦åˆ™å°±éœ€è¦æ¯ä¸€æ¬¡é¡µé¢åŠ å…¥æ–°å†…å®¹æ—¶ï¼Œéƒ½è°ƒç”¨<code>observe()</code>æ–¹æ³•ï¼Œå¯¹æ–°å¢å†…å®¹çš„åº•éƒ¨å»ºç«‹è§‚å¯Ÿã€‚</p><h3 id="è§†é¢‘è‡ªåŠ¨æ’­æ”¾">è§†é¢‘è‡ªåŠ¨æ’­æ”¾ <a href="about:blank#%E8%A7%86%E9%A2%91%E8%87%AA%E5%8A%A8%E6%92%AD%E6%94%BE">#</a></h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè§†é¢‘å…ƒç´ ï¼Œå¸Œæœ›å®ƒå®Œå…¨è¿›å…¥è§†å£çš„æ—¶å€™è‡ªåŠ¨æ’­æ”¾ï¼Œç¦»å¼€è§†å£çš„æ—¶å€™è‡ªåŠ¨æš‚åœã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;video <span class="attribute">src</span>=<span class="string">&quot;foo.mp4&quot;</span> <span class="attribute">controls</span>=<span class="string">&quot;&quot;</span>&gt;&lt;/video&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ JS ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> video = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;video&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> isPaused = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">entries, observer</span>) =&gt;</span> &#123;</span><br><span class="line">  entries.<span class="title function_">forEach</span>(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.<span class="property">intersectionRatio</span> != <span class="number">1</span>  &amp;&amp; !video.<span class="property">paused</span>) &#123;</span><br><span class="line">      video.<span class="title function_">pause</span>();</span><br><span class="line">      isPaused = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPaused) &#123;</span><br><span class="line">      video.<span class="title function_">play</span>();</span><br><span class="line">      isPaused=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, &#123;<span class="attr">threshold</span>: <span class="number">1</span>&#125;);</span><br><span class="line"></span><br><span class="line">observer.<span class="title function_">observe</span>(video);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>IntersectionObserver()</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®å¯¹è±¡ï¼Œå®ƒçš„<code>threshold</code>å±æ€§ç­‰äº<code>1</code>ï¼Œå³ç›®æ ‡å…ƒç´ å®Œå…¨å¯è§æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ <a href="about:blank#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">#</a></h2><ul><li><a href="https://developers.google.com/web/updates/2016/04/intersectionobserver">IntersectionObserverâ€™s Coming into View</a></li><li><a href="https://github.com/WICG/IntersectionObserver/blob/gh-pages/explainer.md">Intersection Observers Explained</a></li><li><a href="https://css-tricks.com/a-few-functional-uses-for-intersection-observer-to-know-when-an-element-is-in-view/">A Few Functional Uses for Intersection Observer to Know When an Element is in View</a>, Preethi</li></ul><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/intersectionObserver">https://wangdoc.com/webapi/intersectionObserver</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">IntersectionObserver</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
  <entry>
    <title>Headers å¯¹è±¡</title>
    <link href="https://www.hacp.top/posts/39.html"/>
    <id>https://www.hacp.top/posts/39.html</id>
    <published>2023-07-07T10:19:03.000Z</published>
    <updated>2023-07-07T10:19:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Headers å¯¹è±¡</h1><p>ç½‘é“ï¼ˆ<a href="http://WangDoc.com">WangDoc.com</a>ï¼‰ï¼Œäº’è”ç½‘æ–‡æ¡£è®¡åˆ’</p><h2 id="ç®€ä»‹">ç®€ä»‹ <a href="about:blank#%E7%AE%80%E4%BB%8B">#</a></h2><p>Headers ä»£è¡¨ HTTP æ¶ˆæ¯çš„æ•°æ®å¤´ã€‚</p><p>å®ƒé€šè¿‡<code>Headers()</code>æ„é€ æ–¹æ³•ï¼Œç”Ÿæˆå®ä¾‹å¯¹è±¡ã€‚<code>Request.headers</code>å±æ€§å’Œ<code>Response.headers</code>å±æ€§ï¼ŒæŒ‡å‘çš„éƒ½æ˜¯ Headers å®ä¾‹å¯¹è±¡ã€‚</p><p>Headers å®ä¾‹å¯¹è±¡å†…éƒ¨ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼ä¿å­˜ HTTP æ¶ˆæ¯å¤´ï¼Œå¯ä»¥ç”¨<code>for...of</code>å¾ªç¯è¿›è¡Œä¾¿åˆ©ï¼Œæ¯”å¦‚<code>for (const p of myHeaders)</code>ã€‚æ–°å»ºçš„ Headers å®ä¾‹å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯ç©ºçš„ï¼Œéœ€è¦ç”¨<code>append()</code>æ–¹æ³•æ·»åŠ é”®å€¼å¯¹ã€‚</p><h2 id="æ„é€ å‡½æ•°">æ„é€ å‡½æ•° <a href="about:blank#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">#</a></h2><p><code>Headers()</code>æ„é€ å‡½æ•°ç”¨æ¥æ–°å»º Headers å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const myHeaders <span class="operator">=</span> new Headers()<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªè¡¨ç¤º HTTP æ•°æ®å¤´çš„å¯¹è±¡ï¼Œæˆ–è€…å¦ä¸€ä¸ª Headers å®ä¾‹å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">const httpHeaders</span> = &#123;</span><br><span class="line">  <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;image/jpeg&quot;</span>,</span><br><span class="line">  <span class="string">&quot;X-My-Custom-Header&quot;</span>: <span class="string">&quot;Zeke are cool&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="attribute">const myHeaders</span> = new Headers(httpHeaders);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå®ƒè¿˜å¯ä»¥æ¥å—ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„ï¼Œä½œä¸ºå‚æ•°ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">const headers</span> = [</span><br><span class="line">  [<span class="string">&quot;Set-Cookie&quot;</span>, <span class="string">&quot;greeting=hello&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;Set-Cookie&quot;</span>, <span class="string">&quot;name=world&quot;</span>],</span><br><span class="line">];</span><br><span class="line"><span class="attribute">const myHeaders</span> = new Headers(headers);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³• <a href="about:blank#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95">#</a></h2><h3 id="append">append() <a href="about:blank#append">#</a></h3><p><code>append()</code>æ–¹æ³•ç”¨æ¥æ·»åŠ å­—æ®µã€‚å¦‚æœå­—æ®µå·²ç»å­˜åœ¨ï¼Œå®ƒä¼šå°†æ–°çš„å€¼æ·»åŠ åˆ°åŸæœ‰å€¼çš„æœ«ç«¯ã€‚</p><p>å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å­—æ®µåï¼Œç¬¬äºŒä¸ªæ˜¯å­—æ®µå€¼ã€‚å®ƒæ²¡æœ‰è¿”å›å€¼ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">append</span><span class="params">(name, value)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myHeaders = <span class="built_in">new</span> Headers();</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯åŒåå­—æ®µå·²ç»å­˜åœ¨çš„æƒ…å†µã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myHeaders.<span class="keyword">append</span>(<span class="string">&quot;Accept-Encoding&quot;</span>, <span class="string">&quot;deflate&quot;</span>);</span><br><span class="line">myHeaders.<span class="keyword">append</span>(<span class="string">&quot;Accept-Encoding&quot;</span>, <span class="string">&quot;gzip&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">get</span>(<span class="string">&quot;Accept-Encoding&quot;</span>); <span class="comment">// &#x27;deflate, gzip&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ<code>Accept-Encoding</code>å­—æ®µå·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥<code>append()</code>ä¼šå°†æ–°çš„å€¼æ·»åŠ åˆ°åŸæœ‰å€¼çš„æœ«å°¾ã€‚</p><h3 id="delete">delete() <a href="about:blank#delete">#</a></h3><p><code>delete()</code>ç”¨æ¥åˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå‚æ•°<code>name</code>æŒ‡å®šåˆ é™¤çš„å­—æ®µåã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">delete</span><span class="params">(name)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœå‚æ•°<code>name</code>ä¸æ˜¯åˆæ³•çš„å­—æ®µåï¼Œæˆ–è€…æ˜¯ä¸å¯åˆ é™¤çš„å­—æ®µï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šæŠ›é”™ã€‚</p><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myHeaders = <span class="built_in">new</span> Headers();</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">delete</span>(<span class="string">&quot;Content-Type&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="entries">entries() <a href="about:blank#entries">#</a></h3><p><code>entries()</code>æ–¹æ³•ç”¨æ¥éå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œè¿”å›ä¸€ä¸ª iterator æŒ‡é’ˆï¼Œä¾›<code>for...of</code>å¾ªç¯ä½¿ç”¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> myHeaders = <span class="keyword">new</span> <span class="built_in">Headers</span>();</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/xml&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Vary&quot;</span>, <span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> pair of myHeaders.<span class="built_in">entries</span>()) &#123;</span><br><span class="line">  console.<span class="built_in">log</span>(`$&#123;pair[<span class="number">0</span>]&#125;: $&#123;pair[<span class="number">1</span>]&#125;`);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="forEach">forEach() <a href="about:blank#foreach">#</a></h3><p><code>forEach()</code>æ–¹æ³•ç”¨æ¥éå†æ‰€æœ‰é”®å€¼å¯¹ï¼Œå¯¹æ¯ä¸ªæŒ‡å®šé”®å€¼å¯¹æ‰§è¡Œä¸€ä¸ªæŒ‡å®šå‡½æ•°ã€‚</p><p>å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°<code>callbackFn</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°<code>thisArg</code>æ˜¯<code>callbackFn</code>æ‰€ç”¨çš„ this å¯¹è±¡ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">forEach</span><span class="params">(callbackFn)</span></span></span><br><span class="line"><span class="function"><span class="title">forEach</span><span class="params">(callbackFn, thisArg)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å›è°ƒå‡½æ•°<code>callback</code>ä¼šæ¥å—åˆ°ä»¥ä¸‹å‚æ•°ã€‚</p><ul><li>valueï¼šå½“å‰çš„å­—æ®µå€¼ã€‚</li><li>keyï¼šå½“å‰çš„å­—æ®µåã€‚</li><li>objectï¼šå½“å‰æ­£åœ¨æ‰§è¡Œçš„ Headers å¯¹è±¡ã€‚</li></ul><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const myHeaders = <span class="keyword">new</span> Headers();</span><br><span class="line">myHeaders.append(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">myHeaders.append(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;This is a demo cookie&quot;</span>);</span><br><span class="line">myHeaders.append(<span class="string">&quot;compression&quot;</span>, <span class="string">&quot;gzip&quot;</span>);</span><br><span class="line"></span><br><span class="line">myHeaders.forEach(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> ==&gt; <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="get">get() <a href="about:blank#get">#</a></h3><p><code>get()</code>æ–¹æ³•ç”¨äºå–å‡ºæŒ‡å®šå­—æ®µçš„å­—æ®µå€¼ï¼Œå®ƒçš„å‚æ•°å°±æ˜¯å­—æ®µåã€‚å¦‚æœå­—æ®µåä¸åˆæ³•ï¼ˆæ¯”å¦‚åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼‰ï¼Œå®ƒä¼šæŠ›é”™ï¼›å¦‚æœå­—æ®µåœ¨å½“å‰ Headers å¯¹è±¡ä¸å­˜åœ¨ï¼Œå®ƒè¿”å›<code>null</code>ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">get</span><span class="params">(name)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">get</span>(<span class="string">&quot;Content-Type&quot;</span>); // <span class="string">&quot;image/jpeg&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœå½“å‰å­—æ®µæœ‰å¤šä¸ªå€¼ï¼Œ<code>get()</code>ä¼šè¿”å›æ‰€æœ‰å€¼ã€‚</p><h3 id="getSetCookie">getSetCookie() <a href="about:blank#getsetcookie">#</a></h3><p><code>getSetCookie()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰<code>Set-Cookie</code>è®¾å®šçš„ Cookie å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> headers = <span class="built_in">new</span> Headers(&#123;</span><br><span class="line">  <span class="string">&quot;Set-Cookie&quot;</span>: <span class="string">&quot;name1=value1&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">headers.<span class="built_in">append</span>(<span class="string">&quot;Set-Cookie&quot;</span>, <span class="string">&quot;name2=value2&quot;</span>);</span><br><span class="line"></span><br><span class="line">headers.getSetCookie();</span><br><span class="line"><span class="comment">// [&quot;name1=value1&quot;, &quot;name2=value2&quot;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="has">has() <a href="about:blank#has">#</a></h3><p><code>has()</code>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Headers å¯¹è±¡æ˜¯å¦åŒ…å«æŒ‡å®šå­—æ®µã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">has</span><span class="params">(name)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœå‚æ•°<code>name</code>ä¸æ˜¯æœ‰æ•ˆçš„ HTTP æ•°æ®å¤´çš„å­—æ®µåï¼Œè¯¥æ–¹æ³•ä¼šæŠ¥é”™ã€‚</p><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myHeaders.append(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">myHeaders.has(<span class="string">&quot;Content-Type&quot;</span>); <span class="regexp">//</span> <span class="literal">true</span></span><br><span class="line">myHeaders.has(<span class="string">&quot;Accept-Encoding&quot;</span>); <span class="regexp">//</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="keys">keys() <a href="about:blank#keys">#</a></h3><p><code>keys()</code>æ–¹æ³•ç”¨æ¥éå† Headers æ•°æ®å¤´çš„æ‰€æœ‰å­—æ®µåã€‚å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª iterator å¯¹è±¡ï¼Œä¾›<code>for...of</code>ä½¿ç”¨ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const myHeaders = <span class="built_in">new</span> Headers();</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/xml&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Vary&quot;</span>, <span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (const <span class="built_in">key</span> of myHeaders.keys()) &#123;</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="built_in">key</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="set">set() <a href="about:blank#set">#</a></h3><p><code>set()</code>æ–¹æ³•ç”¨æ¥ä¸ºæŒ‡å®šå­—æ®µæ·»åŠ å­—æ®µå€¼ã€‚å¦‚æœå­—æ®µä¸å­˜åœ¨ï¼Œå°±æ·»åŠ è¯¥å­—æ®µï¼›å¦‚æœå­—æ®µå·²å­˜åœ¨ï¼Œå°±ç”¨æ–°çš„å€¼æ›¿æ¢è€çš„å€¼ï¼Œè¿™æ˜¯å®ƒä¸<code>append()</code>æ–¹æ³•çš„ä¸»è¦åŒºåˆ«ã€‚</p><p>å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°<code>name</code>æ˜¯å­—æ®µåï¼Œç¬¬äºŒä¸ªå‚æ•°<code>value</code>æ˜¯å­—æ®µå€¼ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">set</span><span class="params">(name, value)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç”¨æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myHeaders = <span class="keyword">new</span> Headers();</span><br><span class="line">myHeaders.<span class="keyword">set</span>(<span class="string">&quot;Accept-Encoding&quot;</span>, <span class="string">&quot;deflate&quot;</span>);</span><br><span class="line">myHeaders.<span class="keyword">set</span>(<span class="string">&quot;Accept-Encoding&quot;</span>, <span class="string">&quot;gzip&quot;</span>);</span><br><span class="line">myHeaders.<span class="keyword">get</span>(<span class="string">&quot;Accept-Encoding&quot;</span>); <span class="comment">// &#x27;gzip&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œè¿ç»­ä¸¤æ¬¡ä½¿ç”¨<code>set()</code>å¯¹<code>Accept-Encoding</code>èµ‹å€¼ï¼Œç¬¬äºŒä¸ªå€¼ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªå€¼ã€‚</p><h3 id="values">values() <a href="about:blank#values">#</a></h3><p><code>values()</code>æ–¹æ³•ç”¨æ¥éå† Headers å¯¹è±¡çš„å­—æ®µå€¼ã€‚å®ƒè¿”å›ä¸€ä¸ª iterator å¯¹è±¡ï¼Œä¾›<code>for...of</code>ä½¿ç”¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myHeaders = <span class="built_in">new</span> Headers();</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/xml&quot;</span>);</span><br><span class="line">myHeaders.<span class="built_in">append</span>(<span class="string">&quot;Vary&quot;</span>, <span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value of myHeaders.values()) &#123;</span><br><span class="line">  console.log(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ¬æ–‡è½¬è‡ª <a href="https://wangdoc.com/webapi/headers">https://wangdoc.com/webapi/headers</a>ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p>]]></content>
    
    
    <summary type="html">Headers å¯¹è±¡</summary>
    
    
    
    <category term="webApi" scheme="https://www.hacp.top/categories/webApi/"/>
    
    
    <category term="webApi" scheme="https://www.hacp.top/tags/webApi/"/>
    
  </entry>
  
</feed>
